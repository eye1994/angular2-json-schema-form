!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("rxjs"),require("@angular/core"),require("lodash"),require("@angular/forms"),require("ajv"),require("@angular/platform-browser"),require("@angular/common"),require("@angular/flex-layout"),require("@angular/material")):"function"==typeof define&&define.amd?define(["exports","rxjs","@angular/core","lodash","@angular/forms","ajv","@angular/platform-browser","@angular/common","@angular/flex-layout","@angular/material"],e):e(t.angular2JsonSchemaForm={},t.rxjs,t.ng.core,t._,t.ng.forms,t.Ajv,t.ng.platformBrowser,t.ng.common,t.ng.flexLayout,t.ng.material)}(this,function(t,e,n,o,r,i,s,a,u,l){"use strict";function c(t,e,n){return void 0===n&&(n=!1),e.map(function(e){return e(t,n)})}function p(t,e,n){return void 0===n&&(n=!1),e.map(function(e){return e(t,n)})}function d(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n={},o=0,r=t;o<r.length;o++){var i=r[o];if(x(i))for(var s=0,a=Object.keys(i);s<a.length;s++){var u=a[s],l=i[u],c=n[u];n[u]=h(c)?"not"===u&&_(c,"strict")&&_(l,"strict")?E(c,l):"object"===C(c)&&"object"===C(l)?d(c,l):l:l}}return n}function f(t){var e=d.apply(void 0,t);return y(e)?null:e}function h(t){return void 0!==t&&null!==t}function m(t){return void 0!==t&&null!==t&&""!==t}function y(t){return w(t)?!t.length:x(t)?!Object.keys(t).length:void 0===t||null===t||""===t}function b(t){return"string"==typeof t}function v(t,e){return void 0===e&&(e=!1),(!e||"number"==typeof t)&&(!isNaN(t)&&t!==t/0)}function g(t,e){return void 0===e&&(e=!1),(!e||"number"==typeof t)&&(!isNaN(t)&&t!==t/0&&t%1==0)}function _(t,e){return void 0===e&&(e=null),"strict"===e?!0===t||!1===t:!0===e?!0===t||1===t||"true"===t||"1"===t:!1===e?!1===t||0===t||"false"===t||"0"===t:!0===t||1===t||"true"===t||"1"===t||!1===t||0===t||"false"===t||"0"===t}function x(t){return null!==t&&"object"==typeof t&&"[object Object]"===Object.prototype.toString.call(t)}function w(t){return Array.isArray(t)||"[object Array]"===Object.prototype.toString.call(t)}function O(t){return"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)}function I(t){return"object"==typeof t&&"[object Map]"===Object.prototype.toString.call(t)}function j(t){return"object"==typeof t&&"[object Set]"===Object.prototype.toString.call(t)}function C(t,e){return void 0===e&&(e=!1),h(t)?w(t)?"array":x(t)?"object":_(t,"strict")?"boolean":g(t,e)?"integer":v(t,e)?"number":b(t)||!e&&O(t)?"string":null:"null"}function S(t,e){switch(e){case"string":return b(t)||O(t);case"number":return v(t);case"integer":return g(t);case"boolean":return _(t);case"null":return!m(t);default:return console.error('isType error: "'+e+'" is not a recognized type.'),null}}function P(t){return b(t)||v(t)||_(t,"strict")||null===t}function M(t,e,n){if(void 0===n&&(n=!0),!h(t))return null;if(b(e)&&(e=[e]),n&&T("integer",e)){if(g(t,"strict"))return t;if(g(t))return parseInt(t,10)}if(T("number",e)||!n&&T("integer",e)){if(v(t,"strict"))return t;if(v(t))return parseFloat(t)}if(T("string",e)){if(b(t))return t;if(O(t))return t.toISOString().slice(0,10);if(v(t))return t.toString()}if(O(t)&&(T("integer",e)||T("number",e)))return t.getTime();if(T("boolean",e)){if(_(t,!0))return!0;if(_(t,!1))return!1}return null}function N(t,e){if(w(e)||(e=[e]),e.includes("null")&&!m(t))return null;if(e.includes("boolean")&&!_(t,"strict"))return t;if(e.includes("integer")&&null!==(n=M(t,"integer")))return+n;if(e.includes("number")&&null!==(n=M(t,"number")))return+n;if((b(t)||v(t,"strict"))&&e.includes("string"))return M(t,"string");if(e.includes("boolean")&&_(t))return M(t,"boolean");if(e.includes("string")){if(null===t)return"";var n;if(null!==(n=M(t,"string")))return n}if(e.includes("number")||e.includes("integer")){if(!0===t)return 1;if(!1===t||null===t||""===t)return 0}if(e.includes("number")&&(n=parseFloat(t)))return n;if(e.includes("integer")&&(n=parseInt(t,10)))return n;return e.includes("boolean")?!!t:!e.includes("number")&&!e.includes("integer")||e.includes("null")?void 0:0}function k(t){return!!t&&"function"==typeof t.then}function F(t){return!!t&&"function"==typeof t.subscribe}function A(t){var n=k(t)?e.from(t):t;return F(n)?n:(console.error("toObservable error: Expected validator to return Promise or Observable."),new e.Observable)}function T(t,e,n){return void 0===n&&(n=!1),!(!h(t)||!w(e))&&(w(t)?t[n?"every":"some"](function(t){return e.includes(t)}):e.includes(t))}function E(t,e){return!!t&&!e||!t&&!!e}var D=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};function L(t,e){var n=function(t){return!j(t)&&!w(t)&&!b(t)};if(n(e))return t;n(t)&&(t="");var o=function(t){return j(t)?t:w(t)?new Set(t):new Set(t.split(" "))},r=o(t);return o(e).forEach(function(t){return r.add(t)}),j(t)?r:w(t)?Array.from(r):Array.from(r).join(" ")}function V(t,e){return void 0===e&&(e=!1),"object"!=typeof t||null===t?t:I(t)?new Map(t):j(t)?new Set(t):w(t)?t.slice():x(t)?D({},t):(e&&console.error("copy error: Object to copy must be a JavaScript object or value."),t)}function R(t,e,n,o,r){if(void 0===n&&(n=!1),void 0===o&&(o=t),void 0===r&&(r=!1),!y(t)){if((x(t)||w(t))&&"function"==typeof e)for(var i=0,s=Object.keys(t);i<s.length;i++){var a=s[i],u=t[a];"bottom-up"===n&&(x(u)||w(u))&&R(u,e,n,o),e(u,a,t,o),"top-down"===n&&(x(u)||w(u))&&R(u,e,n,o)}r&&("function"!=typeof e&&(console.error("forEach error: Iterator must be a function."),console.error("function",e)),x(t)||w(t)||(console.error("forEach error: Input object must be an object or array."),console.error("object",t)))}}function q(t,e,n){if(void 0===n&&(n=!1),m(t)){if((x(t)||w(t))&&"function"!=typeof t){for(var o=w(t)?[]:{},r=0,i=Object.keys(t);r<i.length;r++){var s=i[r];o[s]=e(t[s],s,t)}return o}n&&("function"!=typeof e&&(console.error("forEachCopy error: Iterator must be a function."),console.error("function",e)),x(t)||w(t)||(console.error("forEachCopy error: Input object must be an object or array."),console.error("object",t)))}}function H(t,e){if(!(t&&["number","string","symbol"].includes(typeof e)&&(x(t)||w(t)||I(t)||j(t))))return!1;if(I(t)||j(t))return t.has(e);if("number"==typeof e){if(w(t))return t[e];e+=""}return t.hasOwnProperty(e)}function z(t,e,n,o,r){if(void 0===n&&(n=[]),void 0===o&&(o=function(t){return t}),void 0===r&&(r=function(t){return t}),!x(e))return t;x(t)||(t={});for(var i=0,s=Object.keys(e);i<s.length;i++){var a=s[i];!T(a,n)&&h(e[a])&&(t[o(a)]=r(e[a]))}return t}function W(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],o=0,r=t;o<r.length;o++){var i=r[o];n.includes(i)||n.push(i)}return n}function $(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=null,o=function(t){if(b(t)&&(t=[t]),!(n=null===n?t.slice():n.filter(function(e){return t.includes(e)})).length)return{value:[]}},r=0,i=t;r<i.length;r++){var s=o(i[r]);if("object"==typeof s)return s.value}return n}function B(t){return t&&J(t.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," "))}function J(t,e){if(!b(t))return t;var n=["a","an","and","as","at","but","by","en","for","if","in","nor","of","on","or","per","the","to","v","v.","vs","vs.","via"];b(e)&&(e=e.split("|")),w(e)&&(n=n.concat(e));var o=n.map(function(t){return t.toLowerCase()}),r=t===t.toUpperCase()||t===t.toLowerCase(),i="";return(t=t.trim()).replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,function(e,s){if(r||-1===e.slice(1).search(/[A-Z]|\../)){var a=void 0,u=n[o.indexOf(e.toLowerCase())];return a=u?u===u.toLowerCase()&&(0===s||s+e.length===t.length||":"===i||-1!==t[s-1].search(/[^\s-]/)||"-"!==t[s-1]&&"-"===t[s+e.length])?u[0].toUpperCase()+u.slice(1):u:r?-1!==e.slice(1).search(/\../)?e.toLowerCase():e[0].toUpperCase()+e.slice(1).toLowerCase():e[0].toUpperCase()+e.slice(1),i=e.slice(-1),a}return e})}var G=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},U=function(){function t(){}return t.get=function(t,e,n,o,r,i){if(void 0===n&&(n=0),void 0===o&&(o=null),void 0===r&&(r=!1),void 0===i&&(i=!1),null===t)return!r&&void 0;var s=this.parse(e,i);if("object"==typeof t&&null!==s){var a=t;if(n>=s.length||o<=-s.length)return t;n<=-s.length&&(n=0),(!h(o)||o>=s.length)&&(o=s.length);for(var u=0,l=s=s.slice(n,o);u<l.length;u++){var c=l[u];if("-"===c&&w(a)&&a.length&&(c=a.length-1),I(a)&&a.has(c))a=a.get(c);else{if("object"!=typeof a||null===a||!H(a,c))return i&&(console.error('get error: "'+c+'" key not found in object.'),console.error(e),console.error(t)),!r&&void 0;a=a[c]}}return!!r||a}return i&&null===s&&console.error("get error: Invalid JSON Pointer: "+e),i&&"object"!=typeof t&&(console.error("get error: Invalid object:"),console.error(t)),!r&&void 0},t.getCopy=function(t,e,n,o,r,i){void 0===n&&(n=0),void 0===o&&(o=null),void 0===r&&(r=!1),void 0===i&&(i=!1);var s=this.get(t,e,n,o,r,i);return this.forEachDeepCopy(s)},t.getFirst=function(t,e,n){if(void 0===e&&(e=null),void 0===n&&(n=!1),!y(t)){if(w(t)){for(var o=0,r=t;o<r.length;o++){var i=r[o];if(!y(i)){if(!(w(i)&&i.length>=2))return void console.error("getFirst error: Input not in correct format.\nShould be: [ [ object1, pointer1 ], [ object 2, pointer2 ], etc... ]");if(y(i[0])||y(i[1]))continue;if(u=n?this.getCopy(i[0],i[1]):this.get(i[0],i[1]))return u}}return e}if(I(t)){for(var s=0,a=t;s<a.length;s++){var u,l=a[s],c=l[0],p=l[1];if(null!==c&&this.isJsonPointer(p))if(u=n?this.getCopy(c,p):this.get(c,p))return u}return e}return console.error("getFirst error: Input not in correct format.\nShould be: [ [ object1, pointer1 ], [ object 2, pointer2 ], etc... ]"),e}},t.getFirstCopy=function(t,e){return void 0===e&&(e=null),this.getFirst(t,e,!0)},t.set=function(t,e,n,o){void 0===o&&(o=!1);var r=this.parse(e);if(null!==r&&r.length){for(var i=t,s=0;s<r.length-1;++s){var a=r[s];"-"===a&&w(i)&&(a=i.length),I(i)&&i.has(a)?i=i.get(a):(H(i,a)||(i[a]=r[s+1].match(/^(\d+|-)$/)?[]:{}),i=i[a])}var u=r[r.length-1];return w(i)&&"-"===u?i.push(n):o&&w(i)&&!isNaN(+u)?i.splice(u,0,n):I(i)?i.set(u,n):i[u]=n,t}return console.error("set error: Invalid JSON Pointer: "+e),t},t.setCopy=function(t,e,n,o){void 0===o&&(o=!1);var r=this.parse(e);if(null!==r){for(var i=V(t),s=i,a=0;a<r.length-1;++a){var u=r[a];"-"===u&&w(s)&&(u=s.length),I(s)&&s.has(u)?(s.set(u,V(s.get(u))),s=s.get(u)):(H(s,u)||(s[u]=r[a+1].match(/^(\d+|-)$/)?[]:{}),s[u]=V(s[u]),s=s[u])}var l=r[r.length-1];return w(s)&&"-"===l?s.push(n):o&&w(s)&&!isNaN(+l)?s.splice(l,0,n):I(s)?s.set(l,n):s[l]=n,i}return console.error("setCopy error: Invalid JSON Pointer: "+e),t},t.insert=function(t,e,n){return this.set(t,e,n,!0)},t.insertCopy=function(t,e,n){return this.setCopy(t,e,n,!0)},t.remove=function(t,e){var n=this.parse(e);if(null!==n&&n.length){var o=n.pop(),r=this.get(t,n);return w(r)?("-"===o&&(o=r.length-1),r.splice(o,1)):x(r)&&delete r[o],t}return console.error("remove error: Invalid JSON Pointer: "+e),t},t.has=function(t,e){return this.get(t,e,0,null,!0)},t.dict=function(t){var e={};return this.forEachDeep(t,function(t,n){"object"!=typeof t&&(e[n]=t)}),e},t.forEachDeep=function(t,e,n,o,r){if(void 0===e&&(e=function(t){return t}),void 0===n&&(n=!1),void 0===o&&(o=""),void 0===r&&(r=t),"function"==typeof e){if(n||e(t,o,r),x(t)||w(t))for(var i=0,s=Object.keys(t);i<s.length;i++){var a=s[i],u=o+"/"+this.escape(a);this.forEachDeep(t[a],e,n,u,r)}n&&e(t,o,r)}else console.error("forEachDeep error: Iterator is not a function:",e)},t.forEachDeepCopy=function(t,e,n,o,r){if(void 0===e&&(e=function(t){return t}),void 0===n&&(n=!1),void 0===o&&(o=""),void 0===r&&(r=t),"function"!=typeof e)return console.error("forEachDeepCopy error: Iterator is not a function:",e),null;if(x(t)||w(t)){var i=w(t)?t.slice():G({},t);n||(i=e(i,o,r));for(var s=0,a=Object.keys(i);s<a.length;s++){var u=a[s],l=o+"/"+this.escape(u);i[u]=this.forEachDeepCopy(i[u],e,n,l,r)}return n&&(i=e(i,o,r)),i}return e(t,o,r)},t.escape=function(t){return t.toString().replace(/~/g,"~0").replace(/\//g,"~1")},t.unescape=function(t){return t.toString().replace(/~1/g,"/").replace(/~0/g,"~")},t.parse=function(t,e){return void 0===e&&(e=!1),this.isJsonPointer(t)?w(t)?t:"string"==typeof t?("#"===t[0]&&(t=t.slice(1)),""===t||"/"===t?[]:t.slice(1).split("/").map(this.unescape)):void 0:(e&&console.error("parse error: Invalid JSON Pointer: "+t),null)},t.compile=function(t,e,n){var o=this;return void 0===e&&(e=""),void 0===n&&(n=!1),"#"===t?"":this.isJsonPointer(t)?w(t)?0===t.length?"":"/"+t.map(function(t){return""===t?e:o.escape(t)}).join("/"):"string"==typeof t?("#"===t[0]&&(t=t.slice(1)),t):void 0:(n&&console.error("compile error: Invalid JSON Pointer: "+t),null)},t.toKey=function(t,e){void 0===e&&(e=!1);var n=this.parse(t,e);return null===n?null:n.length?n[n.length-1]:""},t.isJsonPointer=function(t){if(w(t))return t.every(function(t){return"string"==typeof t});if(b(t)){if(""===t||"#"===t)return!0;if("/"===t[0]||"#/"===t.slice(0,2))return!/(~[^01]|~$)/g.test(t)}return!1},t.isSubPointer=function(t,e,n,o){if(void 0===n&&(n=!1),void 0===o&&(o=!1),this.isJsonPointer(t)&&this.isJsonPointer(e))return(t=this.compile(t,"",o))===(e=this.compile(e,"",o))?n:t+"/"===e.slice(0,t.length+1);if(o){var r="";this.isJsonPointer(t)||(r+=" 1: "+t),this.isJsonPointer(e)||(r+=" 2: "+e),console.error("isSubPointer error: Invalid JSON Pointer "+r)}},t.toIndexedPointer=function(t,e,n){if(void 0===n&&(n=null),this.isJsonPointer(t)&&w(e)){var o=this.compile(t);if(I(n)){var r=0;return o.replace(/\/\-(?=\/|$)/g,function(t,i){return n.has(o.slice(0,i))?"/"+e[r++]:t})}for(var i=0,s=e;i<s.length;i++){var a=s[i];o=o.replace("/-","/"+a)}return o}this.isJsonPointer(t)||console.error("toIndexedPointer error: Invalid JSON Pointer: "+t),w(e)||console.error("toIndexedPointer error: Invalid indexArray: "+e)},t.toGenericPointer=function(t,e){if(void 0===e&&(e=new Map),this.isJsonPointer(t)&&I(e)){for(var n=this.parse(t),o=1;o<n.length;o++){var r=this.compile(n.slice(0,o));e.has(r)&&e.get(r)<=+n[o]&&(n[o]="-")}return this.compile(n)}this.isJsonPointer(t)||console.error("toGenericPointer error: invalid JSON Pointer: "+t),I(e)||console.error("toGenericPointer error: invalid arrayMap: "+e)},t.toControlPointer=function(t,e,n){void 0===n&&(n=!1);var o=this.parse(t),r=[],i=e;if(null!==o){for(var s=0,a=o;s<a.length;s++){var u=a[s];if(H(i,"controls")&&(r.push("controls"),i=i.controls),w(i)&&"-"===u)r.push((i.length-1).toString()),i=i[i.length-1];else if(H(i,u))r.push(u),i=i[u];else{if(n)return console.error('toControlPointer error: Unable to find "'+u+'" item in FormGroup.'),console.error(t),void console.error(e);r.push(u),i={controls:{}}}}return this.compile(r)}console.error("toControlPointer error: Invalid JSON Pointer: "+t)},t.toSchemaPointer=function(t,e){if(this.isJsonPointer(t)&&"object"==typeof e){var n=this.parse(t);if(!n.length)return"";var o=n.shift();if("object"===e.type||e.properties||e.additionalProperties){if((e.properties||{})[o])return"/properties/"+this.escape(o)+this.toSchemaPointer(n,e.properties[o]);if(e.additionalProperties)return"/additionalProperties"+this.toSchemaPointer(n,e.additionalProperties)}if(("array"===e.type||e.items)&&(v(o)||"-"===o||""===o)){var r="-"===o||""===o?0:+o;if(w(e.items)){if(r<e.items.length)return"/items/"+r+this.toSchemaPointer(n,e.items[r]);if(e.additionalItems)return"/additionalItems"+this.toSchemaPointer(n,e.additionalItems)}else{if(x(e.items))return"/items"+this.toSchemaPointer(n,e.items);if(x(e.additionalItems))return"/additionalItems"+this.toSchemaPointer(n,e.additionalItems)}}return console.error("toSchemaPointer error: Data pointer "+t+" not compatible with schema "+e),null}return this.isJsonPointer(t)||console.error("toSchemaPointer error: Invalid JSON Pointer: "+t),"object"!=typeof e&&console.error("toSchemaPointer error: Invalid JSON Schema: "+e),null},t.toDataPointer=function(t,e,n){if(void 0===n&&(n=!1),this.isJsonPointer(t)&&"object"==typeof e&&this.has(e,t)){var o=this.parse(t);if(!o.length)return"";var r=o.shift();if("properties"===r||"items"===r&&w(e.items)){var i,s=o.shift();return null===(i=this.toDataPointer(o,e[r][s]))?null:"/"+s+i}if("additionalItems"===r||"items"===r&&x(e.items))return null===(i=this.toDataPointer(o,e[r]))?null:"/-"+i;if(["allOf","anyOf","oneOf"].includes(r)){s=o.shift();return this.toDataPointer(o,e[r][s])}return"not"===r?this.toDataPointer(o,e[r]):(["contains","definitions","dependencies","additionalItems","additionalProperties","patternProperties","propertyNames"].includes(r)&&n&&console.error("toDataPointer error: Ambiguous location"),"")}return n&&(this.isJsonPointer(t)||console.error("toDataPointer error: Invalid JSON Pointer: "+t),"object"!=typeof e&&console.error("toDataPointer error: Invalid JSON Schema: "+e),"object"!=typeof e&&console.error("toDataPointer error: Pointer "+t+" invalid for Schema: "+e)),null},t.parseObjectPath=function(t){if(w(t))return t;if(this.isJsonPointer(t))return this.parse(t);if("string"==typeof t){for(var e=0,n=[];e<t.length;){var o=t.indexOf(".",e),r=t.indexOf("[",e);if(-1===o&&-1===r)n.push(t.slice(e)),e=t.length;else if(-1!==o&&(o<r||-1===r))n.push(t.slice(e,o)),e=o+1;else{r>e&&(n.push(t.slice(e,r)),e=r);var i=t.charAt(r+1);if('"'===i||"'"===i){for(var s=t.indexOf(i+"]",r);-1!==s&&"\\"===t.charAt(s-1);)s=t.indexOf(i+"]",s+2);-1===s&&(s=t.length),n.push(t.slice(e+2,s).replace(new RegExp("\\"+i,"g"),i)),e=s+2}else{-1===(s=t.indexOf("]",r))&&(s=t.length),n.push(t.slice(e+1,s)),e=s+1}"."===t.charAt(e)&&e++}}return n}console.error("parseObjectPath error: Input object path must be a string.")},t.decorators=[{type:n.Injectable}],t}(),Y={date:/^\d\d\d\d-[0-1]\d-[0-3]\d$/,time:/^[0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,"date-time":/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d(?::[0-5]\d)?(?:\.\d+)?(?:z|[+-]\d\d:\d\d)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i,hostname:/^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(?:\.(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(?:%.+)?\s*$/i,uri:/^(?:[a-z][a-z0-9+-.]*)(?::|\/)\/?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+-.]*:)?\/\/)?[^\s]*$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:(?:http[s\u017F]?|ftp):\/\/)(?:(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+(?::(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?@)?(?:(?!10(?:\.[0-9]{1,3}){3})(?!127(?:\.[0-9]{1,3}){3})(?!169\.254(?:\.[0-9]{1,3}){2})(?!192\.168(?:\.[0-9]{1,3}){2})(?!172\.(?:1[6-9]|2[0-9]|3[01])(?:\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)(?:\.(?:(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+-?)*(?:[0-9KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)*(?:\.(?:(?:[KSa-z\xA1-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\/(?:[\0-\x08\x0E-\x1F!-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*)?$/i,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,color:/^\s*(#(?:[\da-f]{3}){1,2}|rgb\((?:\d{1,3},\s*){2}\d{1,3}\)|rgba\((?:\d{1,3},\s*){3}\d*\.?\d+\)|hsl\(\d{1,3}(?:,\s*\d{1,3}%){2}\)|hsla\(\d{1,3}(?:,\s*\d{1,3}%){2},\s*\d*\.?\d+\))\s*$/gi,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$|^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,regex:function(t){if(/[^\\]\\Z/.test(t))return!1;try{return!0}catch(t){return!1}}},Z="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function K(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Q(t,e){return t(e={exports:{}},e.exports),e.exports}var X=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.errorObject={e:{}}});K(X);X.errorObject;var tt=Q(function(t,e){var n;function o(){try{return n.apply(this,arguments)}catch(t){return X.errorObject.e=t,X.errorObject}}Object.defineProperty(e,"__esModule",{value:!0}),e.tryCatch=function(t){return n=t,o}});K(tt);tt.tryCatch;var et=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=function(t){return"function"==typeof t}});K(et);et.isFunction;var nt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=!1;e.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else n&&console.log("RxJS: Back to a better error behavior. Thank you. <3");n=t},get useDeprecatedSynchronousErrorHandling(){return n}}});K(nt);nt.config;var ot=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.hostReportError=function(t){setTimeout(function(){throw t})}});K(ot);ot.hostReportError;var rt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.empty={closed:!0,next:function(t){},error:function(t){if(nt.config.useDeprecatedSynchronousErrorHandling)throw t;ot.hostReportError(t)},complete:function(){}}});K(rt);rt.empty;var it=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}});K(it);it.isArray;var st=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=function(t){return null!=t&&"object"==typeof t}});K(st);st.isObject;var at=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(n){var o=t.call(this,n?n.length+" errors occurred during unsubscription:\n  "+n.map(function(t,e){return e+1+") "+t.toString()}).join("\n  "):"")||this;return o.errors=n,o.name="UnsubscriptionError",Object.setPrototypeOf(o,e.prototype),o}return o(e,t),e}(Error);e.UnsubscriptionError=r});K(at);at.UnsubscriptionError;var ut=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,s=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,u=r?r.length:0;n;)n.remove(this),n=++a<u&&r[a]||null;if(et.isFunction(i))tt.tryCatch(i).call(this)===X.errorObject&&(e=!0,t=t||(X.errorObject.e instanceof at.UnsubscriptionError?o(X.errorObject.e.errors):[X.errorObject.e]));if(it.isArray(s))for(a=-1,u=s.length;++a<u;){var l=s[a];if(st.isObject(l))if(tt.tryCatch(l.unsubscribe).call(l)===X.errorObject){e=!0,t=t||[];var c=X.errorObject.e;c instanceof at.UnsubscriptionError?t=t.concat(o(c.errors)):t.push(c)}}if(e)throw new at.UnsubscriptionError(t)}},t.prototype.add=function(e){if(!e||e===t.EMPTY)return t.EMPTY;if(e===this)return this;var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if("function"!=typeof n._addParent){var o=n;(n=new t)._subscriptions=[o]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}return(this._subscriptions||(this._subscriptions=[])).push(n),n._addParent(this),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;e&&e!==t?n?-1===n.indexOf(t)&&n.push(t):this._parents=[t]:this._parent=t},t.EMPTY=((e=new t).closed=!0,e),t}();function o(t){return t.reduce(function(t,e){return t.concat(e instanceof at.UnsubscriptionError?e.errors:e)},[])}e.Subscription=n});K(ut);ut.Subscription;var lt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.rxSubscriber="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("rxSubscriber"):"@@rxSubscriber",e.$$rxSubscriber=e.rxSubscriber});K(lt);lt.rxSubscriber,lt.$$rxSubscriber;var ct=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o){var r=t.call(this)||this;switch(r.syncErrorValue=null,r.syncErrorThrown=!1,r.syncErrorThrowable=!1,r.isStopped=!1,arguments.length){case 0:r.destination=rt.empty;break;case 1:if(!e){r.destination=rt.empty;break}if("object"==typeof e){if(s(e)){var a=e[lt.rxSubscriber]();r.syncErrorThrowable=a.syncErrorThrowable,r.destination=a,a.add(r)}else r.syncErrorThrowable=!0,r.destination=new i(r,e);break}default:r.syncErrorThrowable=!0,r.destination=new i(r,e,n,o)}return r}return o(e,t),e.prototype[lt.rxSubscriber]=function(){return this},e.create=function(t,n,o){var r=new e(t,n,o);return r.syncErrorThrowable=!1,r},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(ut.Subscription);e.Subscriber=r;var i=function(t){function e(e,n,o,r){var i,s=t.call(this)||this;s._parentSubscriber=e;var a=s;return et.isFunction(n)?i=n:n&&(i=n.next,o=n.error,r=n.complete,n!==rt.empty&&(a=Object.create(n),et.isFunction(a.unsubscribe)&&s.add(a.unsubscribe.bind(a)),a.unsubscribe=s.unsubscribe.bind(s))),s._context=a,s._next=i,s._error=o,s._complete=r,s}return o(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;nt.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=nt.config.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):ot.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;ot.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};nt.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),nt.config.useDeprecatedSynchronousErrorHandling)throw t;ot.hostReportError(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!nt.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return nt.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(ot.hostReportError(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(r);function s(t){return t instanceof r||"syncErrorThrowable"in t&&t[lt.rxSubscriber]}});K(ct);ct.Subscriber;var pt=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(ct.Subscriber);e.OuterSubscriber=r});K(pt);pt.OuterSubscriber;var dt=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o){var r=t.call(this)||this;return r.parent=e,r.outerValue=n,r.outerIndex=o,r.index=0,r}return o(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(ct.Subscriber);e.InnerSubscriber=r});K(dt);dt.InnerSubscriber;var ft=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.toSubscriber=function(t,e,n){if(t){if(t instanceof ct.Subscriber)return t;if(t[lt.rxSubscriber])return t[lt.rxSubscriber]()}return t||e||n?new ct.Subscriber(t,e,n):new ct.Subscriber(rt.empty)}});K(ft);ft.toSubscriber;var ht=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"});K(ht);ht.observable;var mt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.noop=function(){}});K(mt);mt.noop;var yt=Q(function(t,e){function n(t){return t?1===t.length?t[0]:function(e){return t.reduce(function(t,e){return e(t)},e)}:mt.noop}Object.defineProperty(e,"__esModule",{value:!0}),e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n(t)},e.pipeFromArray=n});K(yt);yt.pipe,yt.pipeFromArray;var bt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var o=this.operator,r=ft.toSubscriber(t,e,n);if(o?o.call(r,this.source):r.add(this.source||!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),nt.config.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){nt.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=o(e))(function(e,o){var r;r=n.subscribe(function(e){try{t(e)}catch(t){o(t),r&&r.unsubscribe()}},o,e)})},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[ht.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:yt.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=o(t))(function(t,n){var o;e.subscribe(function(t){return o=t},function(t){return n(t)},function(){return t(o)})})},t.create=function(e){return new t(e)},t}();function o(t){if(t||(t=nt.config.Promise||Promise),!t)throw new Error("no Promise impl found");return t}e.Observable=n});K(bt);bt.Observable;var vt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeToArray=function(t){return function(e){for(var n=0,o=t.length;n<o&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}}});K(vt);vt.subscribeToArray;var gt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeToPromise=function(t){return function(e){return t.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,ot.hostReportError),e}}});K(gt);gt.subscribeToPromise;var _t=Q(function(t,e){function n(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}Object.defineProperty(e,"__esModule",{value:!0}),e.getSymbolIterator=n,e.iterator=n(),e.$$iterator=e.iterator});K(_t);_t.getSymbolIterator,_t.iterator,_t.$$iterator;var xt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeToIterable=function(t){return function(e){for(var n=t[_t.iterator]();;){var o=n.next();if(o.done){e.complete();break}if(e.next(o.value),e.closed)break}return"function"==typeof n.return&&e.add(function(){n.return&&n.return()}),e}}});K(xt);xt.subscribeToIterable;var wt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeToObservable=function(t){return function(e){var n=t[ht.observable]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}}});K(wt);wt.subscribeToObservable;var Ot=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isArrayLike=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t}});K(Ot);Ot.isArrayLike;var It=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isPromise=function(t){return t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}});K(It);It.isPromise;var jt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeTo=function(t){if(t instanceof bt.Observable)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(Ot.isArrayLike(t))return vt.subscribeToArray(t);if(It.isPromise(t))return gt.subscribeToPromise(t);if(t&&"function"==typeof t[_t.iterator])return xt.subscribeToIterable(t);if(t&&"function"==typeof t[ht.observable])return wt.subscribeToObservable(t);var e=st.isObject(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}});K(jt);jt.subscribeTo;var Ct=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeToResult=function(t,e,n,o){var r=new dt.InnerSubscriber(t,n,o);return jt.subscribeTo(e)(r)}});K(Ct);Ct.subscribeToResult;var St=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.audit=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.durationSelector))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.durationSelector=n,o.hasValue=!1,o}return o(e,t),e.prototype._next=function(t){if(this.value=t,this.hasValue=!0,!this.throttled){var e=tt.tryCatch(this.durationSelector)(t);if(e===X.errorObject)this.destination.error(X.errorObject.e);else{var n=Ct.subscribeToResult(this,e);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},e.prototype.clearThrottle=function(){var t=this.value,e=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=null,n.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))},e.prototype.notifyNext=function(t,e,n,o){this.clearThrottle()},e.prototype.notifyComplete=function(){this.clearThrottle()},e}(pt.OuterSubscriber)});K(St);St.audit;var Pt=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n){return t.call(this)||this}return o(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(ut.Subscription);e.Action=r});K(Pt);Pt.Action;var Mt=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.scheduler=e,o.work=n,o.pending=!1,o}return o(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,o=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(o,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(o,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,o=void 0;try{this.work(t)}catch(t){n=!0,o=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),o},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,o=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==o&&n.splice(o,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(Pt.Action);e.AsyncAction=r});K(Mt);Mt.AsyncAction;var Nt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=Date.now?Date.now:function(){return+new Date},t}();e.Scheduler=n});K(Nt);Nt.Scheduler;var kt=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(n,o){void 0===o&&(o=Nt.Scheduler.now);var r=t.call(this,n,function(){return e.delegate&&e.delegate!==r?e.delegate.now():o()})||this;return r.actions=[],r.active=!1,r.scheduled=void 0,r}return o(e,t),e.prototype.schedule=function(n,o,r){return void 0===o&&(o=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,o,r):t.prototype.schedule.call(this,n,o,r)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(Nt.Scheduler);e.AsyncScheduler=r});K(kt);kt.AsyncScheduler;var Ft=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.async=new kt.AsyncScheduler(Mt.AsyncAction)});K(Ft);Ft.async;var At=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isNumeric=function(t){return!it.isArray(t)&&t-parseFloat(t)+1>=0}});K(At);At.isNumeric;var Tt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isScheduler=function(t){return t&&"function"==typeof t.schedule}});K(Tt);Tt.isScheduler;var Et=Q(function(t,e){function n(t){var e=t.index,n=t.period,o=t.subscriber;if(o.next(e),!o.closed){if(-1===n)return o.complete();t.index=e+1,this.schedule(t,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.timer=function(t,e,o){void 0===t&&(t=0);var r=-1;return At.isNumeric(e)?r=Number(e)<1?1:Number(e):Tt.isScheduler(e)&&(o=e),Tt.isScheduler(o)||(o=Ft.async),new bt.Observable(function(e){var i=At.isNumeric(t)?t:+t-o.now();return o.schedule(n,i,{index:0,period:r,subscriber:e})})}});K(Et);Et.timer;var Dt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.auditTime=function(t,e){return void 0===e&&(e=Ft.async),St.audit(function(){return Et.timer(t,e)})}});K(Dt);Dt.auditTime;var Lt=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.buffer=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.closingNotifier=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.closingNotifier))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.buffer=[],o.add(Ct.subscribeToResult(o,n)),o}return o(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype.notifyNext=function(t,e,n,o,r){var i=this.buffer;this.buffer=[],this.destination.next(i)},e}(pt.OuterSubscriber)});K(Lt);Lt.buffer;var Vt=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.bufferCount=function(t,e){return void 0===e&&(e=null),function(n){return n.lift(new r(t,e))}};var r=function(){function t(t,e){this.bufferSize=t,this.startBufferEvery=e,this.subscriberClass=e&&t!==e?s:i}return t.prototype.call=function(t,e){return e.subscribe(new this.subscriberClass(t,this.bufferSize,this.startBufferEvery))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.bufferSize=n,o.buffer=[],o}return o(e,t),e.prototype._next=function(t){var e=this.buffer;e.push(t),e.length==this.bufferSize&&(this.destination.next(e),this.buffer=[])},e.prototype._complete=function(){var e=this.buffer;e.length>0&&this.destination.next(e),t.prototype._complete.call(this)},e}(ct.Subscriber),s=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.bufferSize=n,r.startBufferEvery=o,r.buffers=[],r.count=0,r}return o(e,t),e.prototype._next=function(t){var e=this.bufferSize,n=this.startBufferEvery,o=this.buffers,r=this.count;this.count++,r%n==0&&o.push([]);for(var i=o.length;i--;){var s=o[i];s.push(t),s.length===e&&(o.splice(i,1),this.destination.next(s))}},e.prototype._complete=function(){for(var e=this.buffers,n=this.destination;e.length>0;){var o=e.shift();o.length>0&&n.next(o)}t.prototype._complete.call(this)},e}(ct.Subscriber)});K(Vt);Vt.bufferCount;var Rt=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.bufferTime=function(t){var e=arguments.length,n=Ft.async;Tt.isScheduler(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],e--);var o=null;e>=2&&(o=arguments[1]);var i=Number.POSITIVE_INFINITY;return e>=3&&(i=arguments[2]),function(e){return e.lift(new r(t,o,i,n))}};var r=function(){function t(t,e,n,o){this.bufferTimeSpan=t,this.bufferCreationInterval=e,this.maxBufferSize=n,this.scheduler=o}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},t}(),i=function(){return function(){this.buffer=[]}}(),s=function(t){function e(e,n,o,r,i){var s=t.call(this,e)||this;s.bufferTimeSpan=n,s.bufferCreationInterval=o,s.maxBufferSize=r,s.scheduler=i,s.contexts=[];var c=s.openContext();if(s.timespanOnly=null==o||o<0,s.timespanOnly){var p={subscriber:s,context:c,bufferTimeSpan:n};s.add(c.closeAction=i.schedule(a,n,p))}else{var d={subscriber:s,context:c},f={bufferTimeSpan:n,bufferCreationInterval:o,subscriber:s,scheduler:i};s.add(c.closeAction=i.schedule(l,n,d)),s.add(i.schedule(u,o,f))}return s}return o(e,t),e.prototype._next=function(t){for(var e,n=this.contexts,o=n.length,r=0;r<o;r++){var i=n[r],s=i.buffer;s.push(t),s.length==this.maxBufferSize&&(e=i)}e&&this.onBufferFull(e)},e.prototype._error=function(e){this.contexts.length=0,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts,n=this.destination;e.length>0;){var o=e.shift();n.next(o.buffer)}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.contexts=null},e.prototype.onBufferFull=function(t){this.closeContext(t);var e=t.closeAction;if(e.unsubscribe(),this.remove(e),!this.closed&&this.timespanOnly){t=this.openContext();var n=this.bufferTimeSpan,o={subscriber:this,context:t,bufferTimeSpan:n};this.add(t.closeAction=this.scheduler.schedule(a,n,o))}},e.prototype.openContext=function(){var t=new i;return this.contexts.push(t),t},e.prototype.closeContext=function(t){this.destination.next(t.buffer);var e=this.contexts;(e?e.indexOf(t):-1)>=0&&e.splice(e.indexOf(t),1)},e}(ct.Subscriber);function a(t){var e=t.subscriber,n=t.context;n&&e.closeContext(n),e.closed||(t.context=e.openContext(),t.context.closeAction=this.schedule(t,t.bufferTimeSpan))}function u(t){var e=t.bufferCreationInterval,n=t.bufferTimeSpan,o=t.subscriber,r=t.scheduler,i=o.openContext();o.closed||(o.add(i.closeAction=r.schedule(l,n,{subscriber:o,context:i})),this.schedule(t,e))}function l(t){var e=t.subscriber,n=t.context;e.closeContext(n)}});K(Rt);Rt.bufferTime;var qt=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.bufferToggle=function(t,e){return function(n){return n.lift(new r(t,e))}};var r=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.openings,this.closingSelector))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.openings=n,r.closingSelector=o,r.contexts=[],r.add(Ct.subscribeToResult(r,n)),r}return o(e,t),e.prototype._next=function(t){for(var e=this.contexts,n=e.length,o=0;o<n;o++)e[o].buffer.push(t)},e.prototype._error=function(e){for(var n=this.contexts;n.length>0;){var o=n.shift();o.subscription.unsubscribe(),o.buffer=null,o.subscription=null}this.contexts=null,t.prototype._error.call(this,e)},e.prototype._complete=function(){for(var e=this.contexts;e.length>0;){var n=e.shift();this.destination.next(n.buffer),n.subscription.unsubscribe(),n.buffer=null,n.subscription=null}this.contexts=null,t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,o,r){t?this.closeBuffer(t):this.openBuffer(e)},e.prototype.notifyComplete=function(t){this.closeBuffer(t.context)},e.prototype.openBuffer=function(t){try{var e=this.closingSelector.call(this,t);e&&this.trySubscribe(e)}catch(t){this._error(t)}},e.prototype.closeBuffer=function(t){var e=this.contexts;if(e&&t){var n=t.buffer,o=t.subscription;this.destination.next(n),e.splice(e.indexOf(t),1),this.remove(o),o.unsubscribe()}},e.prototype.trySubscribe=function(t){var e=this.contexts,n=new ut.Subscription,o={buffer:[],subscription:n};e.push(o);var r=Ct.subscribeToResult(this,t,o);!r||r.closed?this.closeBuffer(o):(r.context=o,this.add(r),n.add(r))},e}(pt.OuterSubscriber)});K(qt);qt.bufferToggle;var Ht=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.bufferWhen=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.closingSelector))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.closingSelector=n,o.subscribing=!1,o.openBuffer(),o}return o(e,t),e.prototype._next=function(t){this.buffer.push(t)},e.prototype._complete=function(){var e=this.buffer;e&&this.destination.next(e),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.buffer=null,this.subscribing=!1},e.prototype.notifyNext=function(t,e,n,o,r){this.openBuffer()},e.prototype.notifyComplete=function(){this.subscribing?this.complete():this.openBuffer()},e.prototype.openBuffer=function(){var t=this.closingSubscription;t&&(this.remove(t),t.unsubscribe());var e=this.buffer;this.buffer&&this.destination.next(e),this.buffer=[];var n=tt.tryCatch(this.closingSelector)();n===X.errorObject?this.error(X.errorObject.e):(t=new ut.Subscription,this.closingSubscription=t,this.add(t),this.subscribing=!0,t.add(Ct.subscribeToResult(this,n)),this.subscribing=!1)},e}(pt.OuterSubscriber)});K(Ht);Ht.bufferWhen;var zt=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.catchError=function(t){return function(e){var n=new r(t),o=e.lift(n);return n.caught=o}};var r=function(){function t(t){this.selector=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.selector,this.caught))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.selector=n,r.caught=o,r}return o(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=void 0;try{n=this.selector(e,this.caught)}catch(e){return void t.prototype.error.call(this,e)}this._unsubscribeAndRecycle(),this.add(Ct.subscribeToResult(this,n))}},e}(pt.OuterSubscriber)});K(zt);zt.catchError;var Wt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.fromArray=function(t,e){return e?new bt.Observable(function(n){var o=new ut.Subscription,r=0;return o.add(e.schedule(function(){r!==t.length?(n.next(t[r++]),n.closed||o.add(this.schedule())):n.complete()})),o}):new bt.Observable(vt.subscribeToArray(t))}});K(Wt);Wt.fromArray;var $t=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r={};e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,o=null;return Tt.isScheduler(t[t.length-1])&&(o=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&it.isArray(t[0])&&(t=t[0]),Wt.fromArray(t,o).lift(new i(n))};var i=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.resultSelector))},t}();e.CombineLatestOperator=i;var s=function(t){function e(e,n){var o=t.call(this,e)||this;return o.resultSelector=n,o.active=0,o.values=[],o.observables=[],o}return o(e,t),e.prototype._next=function(t){this.values.push(r),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var o=t[n];this.add(Ct.subscribeToResult(this,o,o,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,o,i){var s=this.values,a=s[n],u=this.toRespond?a===r?--this.toRespond:this.toRespond:0;s[n]=e,0===u&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(pt.OuterSubscriber);e.CombineLatestSubscriber=s});K($t);$t.combineLatest,$t.CombineLatestOperator,$t.CombineLatestSubscriber;var Bt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.combineAll=function(t){return function(e){return e.lift(new $t.CombineLatestOperator(t))}}});K(Bt);Bt.combineAll;var Jt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isInteropObservable=function(t){return t&&"function"==typeof t[ht.observable]}});K(Jt);Jt.isInteropObservable;var Gt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isIterable=function(t){return t&&"function"==typeof t[_t.iterator]}});K(Gt);Gt.isIterable;var Ut=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.fromPromise=function(t,e){return e?new bt.Observable(function(n){var o=new ut.Subscription;return o.add(e.schedule(function(){return t.then(function(t){o.add(e.schedule(function(){n.next(t),o.add(e.schedule(function(){return n.complete()}))}))},function(t){o.add(e.schedule(function(){return n.error(t)}))})})),o}):new bt.Observable(gt.subscribeToPromise(t))}});K(Ut);Ut.fromPromise;var Yt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.fromIterable=function(t,e){if(!t)throw new Error("Iterable cannot be null");return e?new bt.Observable(function(n){var o,r=new ut.Subscription;return r.add(function(){o&&"function"==typeof o.return&&o.return()}),r.add(e.schedule(function(){o=t[_t.iterator](),r.add(e.schedule(function(){if(!n.closed){var t,e;try{var r=o.next();t=r.value,e=r.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}}))})),r}):new bt.Observable(xt.subscribeToIterable(t))}});K(Yt);Yt.fromIterable;var Zt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.fromObservable=function(t,e){return e?new bt.Observable(function(n){var o=new ut.Subscription;return o.add(e.schedule(function(){var r=t[ht.observable]();o.add(r.subscribe({next:function(t){o.add(e.schedule(function(){return n.next(t)}))},error:function(t){o.add(e.schedule(function(){return n.error(t)}))},complete:function(){o.add(e.schedule(function(){return n.complete()}))}}))})),o}):new bt.Observable(wt.subscribeToObservable(t))}});K(Zt);Zt.fromObservable;var Kt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.from=function(t,e){if(!e)return t instanceof bt.Observable?t:new bt.Observable(jt.subscribeTo(t));if(null!=t){if(Jt.isInteropObservable(t))return Zt.fromObservable(t,e);if(It.isPromise(t))return Ut.fromPromise(t,e);if(Ot.isArrayLike(t))return Wt.fromArray(t,e);if(Gt.isIterable(t)||"string"==typeof t)return Yt.fromIterable(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}});K(Kt);Kt.from;var Qt=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.combineLatest=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null;return"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&it.isArray(t[0])&&(t=t[0].slice()),function(e){return e.lift.call(Kt.from([e].concat(t)),new $t.CombineLatestOperator(n))}}});K(Qt);Qt.combineLatest;var Xt=Q(function(t,e){function n(t){return new bt.Observable(function(e){return t.schedule(function(){return e.complete()})})}Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY=new bt.Observable(function(t){return t.complete()}),e.empty=function(t){return t?n(t):e.EMPTY},e.emptyScheduled=n});K(Xt);Xt.EMPTY,Xt.empty,Xt.emptyScheduled;var te=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.scalar=function(t){var e=new bt.Observable(function(e){e.next(t),e.complete()});return e._isScalar=!0,e.value=t,e}});K(te);te.scalar;var ee=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.of=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(Tt.isScheduler(n)?t.pop():n=void 0,t.length){case 0:return Xt.empty(n);case 1:return n?Wt.fromArray(t,n):te.scalar(t[0]);default:return Wt.fromArray(t,n)}}});K(ee);ee.of;var ne=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.map=function(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new r(t,e))}};var r=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.project,this.thisArg))},t}();e.MapOperator=r;var i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.project=n,r.count=0,r.thisArg=o||r,r}return o(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(ct.Subscriber)});K(ne);ne.map,ne.MapOperator;var oe=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.mergeMap=function t(e,n,o){return void 0===o&&(o=Number.POSITIVE_INFINITY),"function"==typeof n?function(r){return r.pipe(t(function(t,o){return Kt.from(e(t,o)).pipe(ne.map(function(e,r){return n(t,e,o,r)}))},o))}:("number"==typeof n&&(o=n),function(t){return t.lift(new r(e,o))})};var r=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.project,this.concurrent))},t}();e.MergeMapOperator=r;var i=function(t){function e(e,n,o){void 0===o&&(o=Number.POSITIVE_INFINITY);var r=t.call(this,e)||this;return r.project=n,r.concurrent=o,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return o(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){this.add(Ct.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,o,r){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(pt.OuterSubscriber);e.MergeMapSubscriber=i});K(oe);oe.mergeMap,oe.MergeMapOperator,oe.MergeMapSubscriber;var re=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.identity=function(t){return t}});K(re);re.identity;var ie=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.mergeAll=function(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),oe.mergeMap(re.identity,t)}});K(ie);ie.mergeAll;var se=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.concatAll=function(){return ie.mergeAll(1)}});K(se);se.concatAll;var ae=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length||2===t.length&&Tt.isScheduler(t[1])?Kt.from(t[0]):se.concatAll()(ee.of.apply(void 0,t))}});K(ae);ae.concat;var ue=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.concat=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(ae.concat.apply(void 0,[e].concat(t)))}}});K(ue);ue.concat;var le=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.concatMap=function(t,e){return oe.mergeMap(t,e,1)}});K(le);le.concatMap;var ce=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.concatMapTo=function(t,e){return le.concatMap(function(){return t},e)}});K(ce);ce.concatMapTo;var pe=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.count=function(t){return function(e){return e.lift(new r(t,e))}};var r=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.predicate,this.source))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.predicate=n,r.source=o,r.count=0,r.index=0,r}return o(e,t),e.prototype._next=function(t){this.predicate?this._tryPredicate(t):this.count++},e.prototype._tryPredicate=function(t){var e;try{e=this.predicate(t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(ct.Subscriber)});K(pe);pe.count;var de=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.debounce=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.durationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.durationSelector))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.durationSelector=n,o.hasValue=!1,o.durationSubscription=null,o}return o(e,t),e.prototype._next=function(t){try{var e=this.durationSelector.call(this,t);e&&this._tryNext(t,e)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.emitValue(),this.destination.complete()},e.prototype._tryNext=function(t,e){var n=this.durationSubscription;this.value=t,this.hasValue=!0,n&&(n.unsubscribe(),this.remove(n)),(n=Ct.subscribeToResult(this,e))&&!n.closed&&this.add(this.durationSubscription=n)},e.prototype.notifyNext=function(t,e,n,o,r){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){if(this.hasValue){var e=this.value,n=this.durationSubscription;n&&(this.durationSubscription=null,n.unsubscribe(),this.remove(n)),this.value=null,this.hasValue=!1,t.prototype._next.call(this,e)}},e}(pt.OuterSubscriber)});K(de);de.debounce;var fe=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.debounceTime=function(t,e){return void 0===e&&(e=Ft.async),function(n){return n.lift(new r(t,e))}};var r=function(){function t(t,e){this.dueTime=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.dueTime,this.scheduler))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.dueTime=n,r.scheduler=o,r.debouncedSubscription=null,r.lastValue=null,r.hasValue=!1,r}return o(e,t),e.prototype._next=function(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(s,this.dueTime,this))},e.prototype._complete=function(){this.debouncedNext(),this.destination.complete()},e.prototype.debouncedNext=function(){if(this.clearDebounce(),this.hasValue){var t=this.lastValue;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}},e.prototype.clearDebounce=function(){var t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)},e}(ct.Subscriber);function s(t){t.debouncedNext()}});K(fe);fe.debounceTime;var he=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.defaultIfEmpty=function(t){return void 0===t&&(t=null),function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.defaultValue))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.defaultValue=n,o.isEmpty=!0,o}return o(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(ct.Subscriber)});K(he);he.defaultIfEmpty;var me=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isDate=function(t){return t instanceof Date&&!isNaN(+t)}});K(me);me.isDate;var ye=Q(function(t,e){function n(t){var e=t.error;t.subscriber.error(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.throwError=function(t,e){return e?new bt.Observable(function(o){return e.schedule(n,0,{error:t,subscriber:o})}):new bt.Observable(function(e){return e.error(t)})}});K(ye);ye.throwError;var be=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return ee.of(this.value);case"E":return ye.throwError(this.error);case"C":return Xt.empty()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();e.Notification=n});K(be);be.Notification;var ve=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.delay=function(t,e){void 0===e&&(e=Ft.async);var n=me.isDate(t)?+t-e.now():Math.abs(t);return function(t){return t.lift(new r(n,e))}};var r=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.delay,this.scheduler))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.delay=n,r.scheduler=o,r.queue=[],r.active=!1,r.errored=!1,r}return o(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,o=t.scheduler,r=t.destination;n.length>0&&n[0].time-o.now()<=0;)n.shift().notification.observe(r);if(n.length>0){var i=Math.max(0,n[0].time-o.now());this.schedule(t,i)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new s(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(be.Notification.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t)},e.prototype._complete=function(){this.scheduleNotification(be.Notification.createComplete())},e}(ct.Subscriber),s=function(){return function(t,e){this.time=t,this.notification=e}}()});K(ve);ve.delay;var ge=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.delayWhen=function(t,e){return e?function(n){return new s(n,e).lift(new r(t))}:function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.delayDurationSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.delayDurationSelector))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.delayDurationSelector=n,o.completed=!1,o.delayNotifierSubscriptions=[],o.values=[],o}return o(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.destination.next(t),this.removeSubscription(r),this.tryComplete()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){var e=this.removeSubscription(t);e&&this.destination.next(e),this.tryComplete()},e.prototype._next=function(t){try{var e=this.delayDurationSelector(t);e&&this.tryDelay(e,t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.completed=!0,this.tryComplete()},e.prototype.removeSubscription=function(t){t.unsubscribe();var e=this.delayNotifierSubscriptions.indexOf(t),n=null;return-1!==e&&(n=this.values[e],this.delayNotifierSubscriptions.splice(e,1),this.values.splice(e,1)),n},e.prototype.tryDelay=function(t,e){var n=Ct.subscribeToResult(this,t,e);n&&!n.closed&&(this.add(n),this.delayNotifierSubscriptions.push(n)),this.values.push(e)},e.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},e}(pt.OuterSubscriber),s=function(t){function e(e,n){var o=t.call(this)||this;return o.source=e,o.subscriptionDelay=n,o}return o(e,t),e.prototype._subscribe=function(t){this.subscriptionDelay.subscribe(new a(t,this.source))},e}(bt.Observable),a=function(t){function e(e,n){var o=t.call(this)||this;return o.parent=e,o.source=n,o.sourceSubscribed=!1,o}return o(e,t),e.prototype._next=function(t){this.subscribeToSource()},e.prototype._error=function(t){this.unsubscribe(),this.parent.error(t)},e.prototype._complete=function(){this.subscribeToSource()},e.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},e}(ct.Subscriber)});K(ge);ge.delayWhen;var _e=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.dematerialize=function(){return function(t){return t.lift(new r)}};var r=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new i(t))},t}(),i=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._next=function(t){t.observe(this.destination)},e}(ct.Subscriber)});K(_e);_e.dematerialize;var xe=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.distinct=function(t,e){return function(n){return n.lift(new r(t,e))}};var r=function(){function t(t,e){this.keySelector=t,this.flushes=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.keySelector,this.flushes))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.keySelector=n,r.values=new Set,o&&r.add(Ct.subscribeToResult(r,o)),r}return o(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.values.clear()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype._next=function(t){this.keySelector?this._useKeySelector(t):this._finalizeNext(t,t)},e.prototype._useKeySelector=function(t){var e,n=this.destination;try{e=this.keySelector(t)}catch(t){return void n.error(t)}this._finalizeNext(e,t)},e.prototype._finalizeNext=function(t,e){var n=this.values;n.has(t)||(n.add(t),this.destination.next(e))},e}(pt.OuterSubscriber);e.DistinctSubscriber=i});K(xe);xe.distinct,xe.DistinctSubscriber;var we=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.distinctUntilChanged=function(t,e){return function(n){return n.lift(new r(t,e))}};var r=function(){function t(t,e){this.compare=t,this.keySelector=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.compare,this.keySelector))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.keySelector=o,r.hasKey=!1,"function"==typeof n&&(r.compare=n),r}return o(e,t),e.prototype.compare=function(t,e){return t===e},e.prototype._next=function(t){var e=t;if(this.keySelector&&(e=tt.tryCatch(this.keySelector)(t))===X.errorObject)return this.destination.error(X.errorObject.e);var n=!1;if(this.hasKey){if((n=tt.tryCatch(this.compare)(this.key,e))===X.errorObject)return this.destination.error(X.errorObject.e)}else this.hasKey=!0;!1===Boolean(n)&&(this.key=e,this.destination.next(t))},e}(ct.Subscriber)});K(we);we.distinctUntilChanged;var Oe=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.distinctUntilKeyChanged=function(t,e){return we.distinctUntilChanged(function(n,o){return e?e(n[t],o[t]):n[t]===o[t]})}});K(Oe);Oe.distinctUntilKeyChanged;var Ie=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var n=t.call(this,"argument out of range")||this;return n.name="ArgumentOutOfRangeError",Object.setPrototypeOf(n,e.prototype),n}return o(e,t),e}(Error);e.ArgumentOutOfRangeError=r});K(Ie);Ie.ArgumentOutOfRangeError;var je=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.filter=function(t,e){return function(n){return n.lift(new r(t,e))}};var r=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.predicate,this.thisArg))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.predicate=n,r.thisArg=o,r.count=0,r}return o(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(ct.Subscriber)});K(je);je.filter;var Ce=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.tap=function(t,e,n){return function(o){return o.lift(new r(t,e,n))}};var r=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.nextOrObserver,this.error,this.complete))},t}(),i=function(t){function e(e,n,o,r){var i=t.call(this,e)||this;return i._tapNext=mt.noop,i._tapError=mt.noop,i._tapComplete=mt.noop,i._tapError=o||mt.noop,i._tapComplete=r||mt.noop,et.isFunction(n)?(i._context=i,i._tapNext=n):n&&(i._context=n,i._tapNext=n.next||mt.noop,i._tapError=n.error||mt.noop,i._tapComplete=n.complete||mt.noop),i}return o(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(ct.Subscriber)});K(Ce);Ce.tap;var Se=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var n=t.call(this,"no elements in sequence")||this;return n.name="EmptyError",Object.setPrototypeOf(n,e.prototype),n}return o(e,t),e}(Error);e.EmptyError=r});K(Se);Se.EmptyError;var Pe=Q(function(t,e){function n(){return new Se.EmptyError}Object.defineProperty(e,"__esModule",{value:!0}),e.throwIfEmpty=function(t){return void 0===t&&(t=n),Ce.tap({hasValue:!1,next:function(){this.hasValue=!0},complete:function(){if(!this.hasValue)throw t()}})}});K(Pe);Pe.throwIfEmpty;var Me=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.take=function(t){return function(e){return 0===t?Xt.empty():e.lift(new r(t))}};var r=function(){function t(t){if(this.total=t,this.total<0)throw new Ie.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.total))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.total=n,o.count=0,o}return o(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(ct.Subscriber)});K(Me);Me.take;var Ne=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.elementAt=function(t,e){if(t<0)throw new Ie.ArgumentOutOfRangeError;var n=arguments.length>=2;return function(o){return o.pipe(je.filter(function(e,n){return n===t}),Me.take(1),n?he.defaultIfEmpty(e):Pe.throwIfEmpty(function(){return new Ie.ArgumentOutOfRangeError}))}}});K(Ne);Ne.elementAt;var ke=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.every=function(t,e){return function(n){return n.lift(new r(t,e,n))}};var r=function(){function t(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.predicate,this.thisArg,this.source))},t}(),i=function(t){function e(e,n,o,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=o,i.source=r,i.index=0,i.thisArg=o||i,i}return o(e,t),e.prototype.notifyComplete=function(t){this.destination.next(t),this.destination.complete()},e.prototype._next=function(t){var e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(t){return void this.destination.error(t)}e||this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(ct.Subscriber)});K(ke);ke.every;var Fe=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.exhaust=function(){return function(t){return t.lift(new r)}};var r=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new i(t))},t}(),i=function(t){function e(e){var n=t.call(this,e)||this;return n.hasCompleted=!1,n.hasSubscription=!1,n}return o(e,t),e.prototype._next=function(t){this.hasSubscription||(this.hasSubscription=!0,this.add(Ct.subscribeToResult(this,t)))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(pt.OuterSubscriber)});K(Fe);Fe.exhaust;var Ae=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.exhaustMap=function t(e,n){return n?function(o){return o.pipe(t(function(t,o){return Kt.from(e(t,o)).pipe(ne.map(function(e,r){return n(t,e,o,r)}))}))}:function(t){return t.lift(new r(e))}};var r=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.project))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.project=n,o.hasSubscription=!1,o.hasCompleted=!1,o.index=0,o}return o(e,t),e.prototype._next=function(t){this.hasSubscription||this.tryNext(t)},e.prototype.tryNext=function(t){var e=this.index++,n=this.destination;try{var o=this.project(t,e);this.hasSubscription=!0,this.add(Ct.subscribeToResult(this,o,t,e))}catch(t){n.error(t)}},e.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete()},e.prototype.notifyNext=function(t,e,n,o,r){this.destination.next(e)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.remove(t),this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},e}(pt.OuterSubscriber)});K(Ae);Ae.exhaustMap;var Te=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.expand=function(t,e,n){return void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=void 0),e=(e||0)<1?Number.POSITIVE_INFINITY:e,function(o){return o.lift(new r(t,e,n))}};var r=function(){function t(t,e,n){this.project=t,this.concurrent=e,this.scheduler=n}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.project,this.concurrent,this.scheduler))},t}();e.ExpandOperator=r;var i=function(t){function e(e,n,o,r){var i=t.call(this,e)||this;return i.project=n,i.concurrent=o,i.scheduler=r,i.index=0,i.active=0,i.hasCompleted=!1,o<Number.POSITIVE_INFINITY&&(i.buffer=[]),i}return o(e,t),e.dispatch=function(t){var e=t.subscriber,n=t.result,o=t.value,r=t.index;e.subscribeToProjection(n,o,r)},e.prototype._next=function(t){var n=this.destination;if(n.closed)this._complete();else{var o=this.index++;if(this.active<this.concurrent){n.next(t);var r=tt.tryCatch(this.project)(t,o);if(r===X.errorObject)n.error(X.errorObject.e);else if(this.scheduler){var i={subscriber:this,result:r,value:t,index:o};this.add(this.scheduler.schedule(e.dispatch,0,i))}else this.subscribeToProjection(r,t,o)}else this.buffer.push(t)}},e.prototype.subscribeToProjection=function(t,e,n){this.active++,this.add(Ct.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,this.hasCompleted&&0===this.active&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,o,r){this._next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e&&e.length>0&&this._next(e.shift()),this.hasCompleted&&0===this.active&&this.destination.complete()},e}(pt.OuterSubscriber);e.ExpandSubscriber=i});K(Te);Te.expand,Te.ExpandOperator,Te.ExpandSubscriber;var Ee=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.finalize=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.callback=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.callback))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.add(new ut.Subscription(n)),o}return o(e,t),e}(ct.Subscriber)});K(Ee);Ee.finalize;var De=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.find=function(t,e){if("function"!=typeof t)throw new TypeError("predicate is not a function");return function(n){return n.lift(new r(t,n,!1,e))}};var r=function(){function t(t,e,n,o){this.predicate=t,this.source=e,this.yieldIndex=n,this.thisArg=o}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.predicate,this.source,this.yieldIndex,this.thisArg))},t}();e.FindValueOperator=r;var i=function(t){function e(e,n,o,r,i){var s=t.call(this,e)||this;return s.predicate=n,s.source=o,s.yieldIndex=r,s.thisArg=i,s.index=0,s}return o(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){var e=this.predicate,n=this.thisArg,o=this.index++;try{e.call(n||this,t,o,this.source)&&this.notifyComplete(this.yieldIndex?o:t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){this.notifyComplete(this.yieldIndex?-1:void 0)},e}(ct.Subscriber);e.FindValueSubscriber=i});K(De);De.find,De.FindValueOperator,De.FindValueSubscriber;var Le=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.findIndex=function(t,e){return function(n){return n.lift(new De.FindValueOperator(t,n,!0,e))}}});K(Le);Le.findIndex;var Ve=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.first=function(t,e){var n=arguments.length>=2;return function(o){return o.pipe(t?je.filter(function(e,n){return t(e,n,o)}):re.identity,Me.take(1),n?he.defaultIfEmpty(e):Pe.throwIfEmpty(function(){return new Se.EmptyError}))}}});K(Ve);Ve.first;var Re=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var n=t.call(this,"object unsubscribed")||this;return n.name="ObjectUnsubscribedError",Object.setPrototypeOf(n,e.prototype),n}return o(e,t),e}(Error);e.ObjectUnsubscribedError=r});K(Re);Re.ObjectUnsubscribedError;var qe=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n){var o=t.call(this)||this;return o.subject=e,o.subscriber=n,o.closed=!1,o}return o(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(ut.Subscription);e.SubjectSubscription=r});K(qe);qe.SubjectSubscription;var He=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return o(e,t),e}(ct.Subscriber);e.SubjectSubscriber=r;var i=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return o(e,t),e.prototype[lt.rxSubscriber]=function(){return new r(this)},e.prototype.lift=function(t){var e=new s(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new Re.ObjectUnsubscribedError;if(!this.isStopped)for(var e=this.observers,n=e.length,o=e.slice(),r=0;r<n;r++)o[r].next(t)},e.prototype.error=function(t){if(this.closed)throw new Re.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,o=e.slice(),r=0;r<n;r++)o[r].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new Re.ObjectUnsubscribedError;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),o=0;o<e;o++)n[o].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new Re.ObjectUnsubscribedError;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new Re.ObjectUnsubscribedError;return this.hasError?(t.error(this.thrownError),ut.Subscription.EMPTY):this.isStopped?(t.complete(),ut.Subscription.EMPTY):(this.observers.push(t),new qe.SubjectSubscription(this,t))},e.prototype.asObservable=function(){var t=new bt.Observable;return t.source=this,t},e.create=function(t,e){return new s(t,e)},e}(bt.Observable);e.Subject=i;var s=function(t){function e(e,n){var o=t.call(this)||this;return o.destination=e,o.source=n,o}return o(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):ut.Subscription.EMPTY},e}(i);e.AnonymousSubject=s});K(He);He.SubjectSubscriber,He.Subject,He.AnonymousSubject;var ze=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.groupBy=function(t,e,n,o){return function(i){return i.lift(new r(t,e,n,o))}};var r=function(){function t(t,e,n,o){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=o}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},t}(),i=function(t){function e(e,n,o,r,i){var s=t.call(this,e)||this;return s.keySelector=n,s.elementSelector=o,s.durationSelector=r,s.subjectSelector=i,s.groups=null,s.attemptedToUnsubscribe=!1,s.count=0,s}return o(e,t),e.prototype._next=function(t){var e;try{e=this.keySelector(t)}catch(t){return void this.error(t)}this._group(t,e)},e.prototype._group=function(t,e){var n=this.groups;n||(n=this.groups=new Map);var o,r=n.get(e);if(this.elementSelector)try{o=this.elementSelector(t)}catch(t){this.error(t)}else o=t;if(!r){r=this.subjectSelector?this.subjectSelector():new He.Subject,n.set(e,r);var i=new a(e,r,this);if(this.destination.next(i),this.durationSelector){var u=void 0;try{u=this.durationSelector(new a(e,r))}catch(t){return void this.error(t)}this.add(u.subscribe(new s(e,r,this)))}}r.closed||r.next(o)},e.prototype._error=function(t){var e=this.groups;e&&(e.forEach(function(e,n){e.error(t)}),e.clear()),this.destination.error(t)},e.prototype._complete=function(){var t=this.groups;t&&(t.forEach(function(t,e){t.complete()}),t.clear()),this.destination.complete()},e.prototype.removeGroup=function(t){this.groups.delete(t)},e.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&t.prototype.unsubscribe.call(this))},e}(ct.Subscriber),s=function(t){function e(e,n,o){var r=t.call(this,n)||this;return r.key=e,r.group=n,r.parent=o,r}return o(e,t),e.prototype._next=function(t){this.complete()},e.prototype._unsubscribe=function(){var t=this.parent,e=this.key;this.key=this.parent=null,t&&t.removeGroup(e)},e}(ct.Subscriber),a=function(t){function e(e,n,o){var r=t.call(this)||this;return r.key=e,r.groupSubject=n,r.refCountSubscription=o,r}return o(e,t),e.prototype._subscribe=function(t){var e=new ut.Subscription,n=this.refCountSubscription,o=this.groupSubject;return n&&!n.closed&&e.add(new u(n)),e.add(o.subscribe(t)),e},e}(bt.Observable);e.GroupedObservable=a;var u=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return o(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(ut.Subscription)});K(ze);ze.groupBy,ze.GroupedObservable;var We=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.ignoreElements=function(){return function(t){return t.lift(new r)}};var r=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new i(t))},t}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._next=function(t){},e}(ct.Subscriber)});K(We);We.ignoreElements;var $e=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.isEmpty=function(){return function(t){return t.lift(new r)}};var r=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new i(t))},t}(),i=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.notifyComplete=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype._next=function(t){this.notifyComplete(!1)},e.prototype._complete=function(){this.notifyComplete(!0)},e}(ct.Subscriber)});K($e);$e.isEmpty;var Be=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.takeLast=function(t){return function(e){return 0===t?Xt.empty():e.lift(new r(t))}};var r=function(){function t(t){if(this.total=t,this.total<0)throw new Ie.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.total))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.total=n,o.ring=new Array,o.count=0,o}return o(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,o=this.count++;e.length<n?e.push(t):e[o%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,o=this.ring,r=0;r<n;r++){var i=e++%n;t.next(o[i])}t.complete()},e}(ct.Subscriber)});K(Be);Be.takeLast;var Je=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.last=function(t,e){var n=arguments.length>=2;return function(o){return o.pipe(t?je.filter(function(e,n){return t(e,n,o)}):re.identity,Be.takeLast(1),n?he.defaultIfEmpty(e):Pe.throwIfEmpty(function(){return new Se.EmptyError}))}}});K(Je);Je.last;var Ge=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.mapTo=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.value))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.value=n,o}return o(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(ct.Subscriber)});K(Ge);Ge.mapTo;var Ue=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.materialize=function(){return function(t){return t.lift(new r)}};var r=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new i(t))},t}(),i=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._next=function(t){this.destination.next(be.Notification.createNext(t))},e.prototype._error=function(t){var e=this.destination;e.next(be.Notification.createError(t)),e.complete()},e.prototype._complete=function(){var t=this.destination;t.next(be.Notification.createComplete()),t.complete()},e}(ct.Subscriber)});K(Ue);Ue.materialize;var Ye=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.scan=function(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(o){return o.lift(new r(t,e,n))}};var r=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.accumulator,this.seed,this.hasSeed))},t}(),i=function(t){function e(e,n,o,r){var i=t.call(this,e)||this;return i.accumulator=n,i._seed=o,i.hasSeed=r,i.index=0,i}return o(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(ct.Subscriber)});K(Ye);Ye.scan;var Ze=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=function(t,e){return arguments.length>=2?function(n){return yt.pipe(Ye.scan(t,e),Be.takeLast(1),he.defaultIfEmpty(e))(n)}:function(e){return yt.pipe(Ye.scan(function(e,n,o){return t(e,n,o+1)}),Be.takeLast(1))(e)}}});K(Ze);Ze.reduce;var Ke=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.max=function(t){var e="function"==typeof t?function(e,n){return t(e,n)>0?e:n}:function(t,e){return t>e?t:e};return Ze.reduce(e)}});K(Ke);Ke.max;var Qe=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,o=null,r=t[t.length-1];return Tt.isScheduler(r)?(o=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof r&&(n=t.pop()),null===o&&1===t.length&&t[0]instanceof bt.Observable?t[0]:ie.mergeAll(n)(Wt.fromArray(t,o))}});K(Qe);Qe.merge;var Xe=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.merge=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(Qe.merge.apply(void 0,[e].concat(t)))}}});K(Xe);Xe.merge;var tn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.mergeMapTo=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?oe.mergeMap(function(){return t},e,n):("number"==typeof e&&(n=e),oe.mergeMap(function(){return t},n))}});K(tn);tn.mergeMapTo;var en=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.mergeScan=function(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),function(o){return o.lift(new r(t,e,n))}};var r=function(){function t(t,e,n){this.accumulator=t,this.seed=e,this.concurrent=n}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.accumulator,this.seed,this.concurrent))},t}();e.MergeScanOperator=r;var i=function(t){function e(e,n,o,r){var i=t.call(this,e)||this;return i.accumulator=n,i.acc=o,i.concurrent=r,i.hasValue=!1,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return o(e,t),e.prototype._next=function(t){if(this.active<this.concurrent){var e=this.index++,n=tt.tryCatch(this.accumulator)(this.acc,t),o=this.destination;n===X.errorObject?o.error(X.errorObject.e):(this.active++,this._innerSub(n,t,e))}else this.buffer.push(t)},e.prototype._innerSub=function(t,e,n){this.add(Ct.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e.prototype.notifyNext=function(t,e,n,o,r){var i=this.destination;this.acc=e,this.hasValue=!0,i.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&(!1===this.hasValue&&this.destination.next(this.acc),this.destination.complete())},e}(pt.OuterSubscriber);e.MergeScanSubscriber=i});K(en);en.mergeScan,en.MergeScanOperator,en.MergeScanSubscriber;var nn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.min=function(t){var e="function"==typeof t?function(e,n){return t(e,n)<0?e:n}:function(t,e){return t<e?t:e};return Ze.reduce(e)}});K(nn);nn.min;var on=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.refCount=function(){return function(t){return t.lift(new r(t))}};var r=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var o=new i(t,n),r=e.subscribe(o);return o.closed||(o.connection=n.connect()),r},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.connectable=n,o}return o(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,o=t._connection;this.connection=null,!o||n&&o!==n||o.unsubscribe()}}else this.connection=null},e}(ct.Subscriber)});K(on);on.refCount;var rn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n){var o=t.call(this)||this;return o.source=e,o.subjectFactory=n,o._refCount=0,o._isComplete=!1,o}return o(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new ut.Subscription).add(this.source.subscribe(new s(this.getSubject(),this))),t.closed?(this._connection=null,t=ut.Subscription.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return on.refCount()(this)},e}(bt.Observable);e.ConnectableObservable=r;var i=r.prototype;e.connectableObservableDescriptor={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:i._subscribe},_isComplete:{value:i._isComplete,writable:!0},getSubject:{value:i.getSubject},connect:{value:i.connect},refCount:{value:i.refCount}};var s=function(t){function e(e,n){var o=t.call(this,e)||this;return o.connectable=n,o}return o(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(He.SubjectSubscriber);!function(t){function e(e,n){var o=t.call(this,e)||this;return o.connectable=n,o}o(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,o=t._connection;this.connection=null,!o||n&&o!==n||o.unsubscribe()}}else this.connection=null}}(ct.Subscriber)});K(rn);rn.ConnectableObservable,rn.connectableObservableDescriptor;var sn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.multicast=function(t,e){return function(o){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof e)return o.lift(new n(r,e));var i=Object.create(o,rn.connectableObservableDescriptor);return i.source=o,i.subjectFactory=r,i}};var n=function(){function t(t,e){this.subjectFactory=t,this.selector=e}return t.prototype.call=function(t,e){var n=this.selector,o=this.subjectFactory(),r=n(o).subscribe(t);return r.add(e.subscribe(o)),r},t}();e.MulticastOperator=n});K(sn);sn.multicast,sn.MulticastOperator;var an=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.observeOn=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new r(t,e))}};var r=function(){function t(t,e){void 0===e&&(e=0),this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.scheduler,this.delay))},t}();e.ObserveOnOperator=r;var i=function(t){function e(e,n,o){void 0===o&&(o=0);var r=t.call(this,e)||this;return r.scheduler=n,r.delay=o,r}return o(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.add(this.scheduler.schedule(e.dispatch,this.delay,new s(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(be.Notification.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(be.Notification.createError(t))},e.prototype._complete=function(){this.scheduleMessage(be.Notification.createComplete())},e}(ct.Subscriber);e.ObserveOnSubscriber=i;var s=function(){return function(t,e){this.notification=t,this.destination=e}}();e.ObserveOnMessage=s});K(an);an.observeOn,an.ObserveOnOperator,an.ObserveOnSubscriber,an.ObserveOnMessage;var un=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.onErrorResumeNext=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length&&it.isArray(t[0])&&(t=t[0]),function(e){return e.lift(new r(t))}},e.onErrorResumeNextStatic=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n;return 1===t.length&&it.isArray(t[0])&&(t=t[0]),n=t.shift(),Kt.from(n,null).lift(new r(t))};var r=function(){function t(t){this.nextSources=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.nextSources))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.destination=e,o.nextSources=n,o}return o(e,t),e.prototype.notifyError=function(t,e){this.subscribeToNextSource()},e.prototype.notifyComplete=function(t){this.subscribeToNextSource()},e.prototype._error=function(t){this.subscribeToNextSource()},e.prototype._complete=function(){this.subscribeToNextSource()},e.prototype.subscribeToNextSource=function(){var t=this.nextSources.shift();t?this.add(Ct.subscribeToResult(this,t)):this.destination.complete()},e}(pt.OuterSubscriber)});K(un);un.onErrorResumeNext,un.onErrorResumeNextStatic;var ln=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.pairwise=function(){return function(t){return t.lift(new r)}};var r=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new i(t))},t}(),i=function(t){function e(e){var n=t.call(this,e)||this;return n.hasPrev=!1,n}return o(e,t),e.prototype._next=function(t){this.hasPrev?this.destination.next([this.prev,t]):this.hasPrev=!0,this.prev=t},e}(ct.Subscriber)});K(ln);ln.pairwise;var cn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.not=function(t,e){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=t,n.thisArg=e,n}});K(cn);cn.not;var pn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.partition=function(t,e){return function(n){return[je.filter(t,e)(n),je.filter(cn.not(t,e))(n)]}}});K(pn);pn.partition;var dn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.pluck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.length;if(0===n)throw new Error("list of properties cannot be empty.");return function(e){return ne.map(function(t,e){return function(n){for(var o=n,r=0;r<e;r++){var i=o[t[r]];if(void 0===i)return;o=i}return o}}(t,n))(e)}}});K(dn);dn.pluck;var fn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.publish=function(t){return t?sn.multicast(function(){return new He.Subject},t):sn.multicast(new He.Subject)}});K(fn);fn.publish;var hn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Re.ObjectUnsubscribedError;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(He.Subject);e.BehaviorSubject=r});K(hn);hn.BehaviorSubject;var mn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.publishBehavior=function(t){return function(e){return sn.multicast(new hn.BehaviorSubject(t))(e)}}});K(mn);mn.publishBehavior;var yn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return o(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),ut.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),ut.Subscription.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(He.Subject);e.AsyncSubject=r});K(yn);yn.AsyncSubject;var bn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.publishLast=function(){return function(t){return sn.multicast(new yn.AsyncSubject)(t)}}});K(bn);bn.publishLast;var vn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.scheduler=e,o.work=n,o}return o(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,o){return void 0===o&&(o=0),null!==o&&o>0||null===o&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,o):e.flush(this)},e}(Mt.AsyncAction);e.QueueAction=r});K(vn);vn.QueueAction;var gn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(kt.AsyncScheduler);e.QueueScheduler=r});K(gn);gn.QueueScheduler;var _n=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.queue=new gn.QueueScheduler(vn.QueueAction)});K(_n);_n.queue;var xn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this)||this;return r.scheduler=o,r._events=[],r._infiniteTimeWindow=!1,r._bufferSize=e<1?1:e,r._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(r._infiniteTimeWindow=!0,r.next=r.nextInfiniteTimeWindow):r.next=r.nextTimeWindow,r}return o(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new i(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,o=n?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=o.length;if(this.closed)throw new Re.ObjectUnsubscribedError;if(this.isStopped||this.hasError?e=ut.Subscription.EMPTY:(this.observers.push(t),e=new qe.SubjectSubscription(this,t)),r&&t.add(t=new an.ObserveOnSubscriber(t,r)),n)for(var s=0;s<i&&!t.closed;s++)t.next(o[s]);else for(s=0;s<i&&!t.closed;s++)t.next(o[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||_n.queue).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,o=this._events,r=o.length,i=0;i<r&&!(t-o[i].time<n);)i++;return r>e&&(i=Math.max(i,r-e)),i>0&&o.splice(0,i),o},e}(He.Subject);e.ReplaySubject=r;var i=function(){return function(t,e){this.time=t,this.value=e}}()});K(xn);xn.ReplaySubject;var wn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.publishReplay=function(t,e,n,o){n&&"function"!=typeof n&&(o=n);var r="function"==typeof n?n:void 0,i=new xn.ReplaySubject(t,e,o);return function(t){return sn.multicast(function(){return i},r)(t)}}});K(wn);wn.publishReplay;var On=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!it.isArray(t[0]))return t[0];t=t[0]}return Wt.fromArray(t,void 0).lift(new r)};var r=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new i(t))},t}();e.RaceOperator=r;var i=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return o(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var o=t[n],r=Ct.subscribeToResult(this,o,o,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,o,r){if(!this.hasFirst){this.hasFirst=!0;for(var i=0;i<this.subscriptions.length;i++)if(i!==n){var s=this.subscriptions[i];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},e}(pt.OuterSubscriber);e.RaceSubscriber=i});K(On);On.race,On.RaceOperator,On.RaceSubscriber;var In=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.race=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return 1===t.length&&it.isArray(t[0])&&(t=t[0]),e.lift.call(On.race.apply(void 0,[e].concat(t)))}}});K(In);In.race;var jn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.repeat=function(t){return void 0===t&&(t=-1),function(e){return 0===t?Xt.empty():t<0?e.lift(new r(-1,e)):e.lift(new r(t-1,e))}};var r=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.count,this.source))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.count=n,r.source=o,r}return o(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,n=this.count;if(0===n)return t.prototype.complete.call(this);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(ct.Subscriber)});K(jn);jn.repeat;var Cn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.repeatWhen=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.notifier,e))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.notifier=n,r.source=o,r.sourceIsBeingSubscribedTo=!0,r}return o(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.sourceIsBeingSubscribedTo=!0,this.source.subscribe(this)},e.prototype.notifyComplete=function(e){if(!1===this.sourceIsBeingSubscribedTo)return t.prototype.complete.call(this)},e.prototype.complete=function(){if(this.sourceIsBeingSubscribedTo=!1,!this.isStopped){if(this.retries||this.subscribeToRetries(),!this.retriesSubscription||this.retriesSubscription.closed)return t.prototype.complete.call(this);this._unsubscribeAndRecycle(),this.notifications.next()}},e.prototype._unsubscribe=function(){var t=this.notifications,e=this.retriesSubscription;t&&(t.unsubscribe(),this.notifications=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype._unsubscribeAndRecycle=function(){var e=this._unsubscribe;return this._unsubscribe=null,t.prototype._unsubscribeAndRecycle.call(this),this._unsubscribe=e,this},e.prototype.subscribeToRetries=function(){this.notifications=new He.Subject;var e=tt.tryCatch(this.notifier)(this.notifications);if(e===X.errorObject)return t.prototype.complete.call(this);this.retries=e,this.retriesSubscription=Ct.subscribeToResult(this,e)},e}(pt.OuterSubscriber)});K(Cn);Cn.repeatWhen;var Sn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.retry=function(t){return void 0===t&&(t=-1),function(e){return e.lift(new r(t,e))}};var r=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.count,this.source))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.count=n,r.source=o,r}return o(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.source,o=this.count;if(0===o)return t.prototype.error.call(this,e);o>-1&&(this.count=o-1),n.subscribe(this._unsubscribeAndRecycle())}},e}(ct.Subscriber)});K(Sn);Sn.retry;var Pn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.retryWhen=function(t){return function(e){return e.lift(new r(t,e))}};var r=function(){function t(t,e){this.notifier=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.notifier,this.source))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.notifier=n,r.source=o,r}return o(e,t),e.prototype.error=function(e){if(!this.isStopped){var n=this.errors,o=this.retries,r=this.retriesSubscription;if(o)this.errors=null,this.retriesSubscription=null;else{if(n=new He.Subject,(o=tt.tryCatch(this.notifier)(n))===X.errorObject)return t.prototype.error.call(this,X.errorObject.e);r=Ct.subscribeToResult(this,o)}this._unsubscribeAndRecycle(),this.errors=n,this.retries=o,this.retriesSubscription=r,n.next(e)}},e.prototype._unsubscribe=function(){var t=this.errors,e=this.retriesSubscription;t&&(t.unsubscribe(),this.errors=null),e&&(e.unsubscribe(),this.retriesSubscription=null),this.retries=null},e.prototype.notifyNext=function(t,e,n,o,r){var i=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=i,this.source.subscribe(this)},e}(pt.OuterSubscriber)});K(Pn);Pn.retryWhen;var Mn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.sample=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new i(t),o=e.subscribe(n);return o.add(Ct.subscribeToResult(n,this.notifier)),o},t}(),i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasValue=!1,e}return o(e,t),e.prototype._next=function(t){this.value=t,this.hasValue=!0},e.prototype.notifyNext=function(t,e,n,o,r){this.emitValue()},e.prototype.notifyComplete=function(){this.emitValue()},e.prototype.emitValue=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))},e}(pt.OuterSubscriber)});K(Mn);Mn.sample;var Nn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.sampleTime=function(t,e){return void 0===e&&(e=Ft.async),function(n){return n.lift(new r(t,e))}};var r=function(){function t(t,e){this.period=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.period,this.scheduler))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.period=n,r.scheduler=o,r.hasValue=!1,r.add(o.schedule(s,n,{subscriber:r,period:n})),r}return o(e,t),e.prototype._next=function(t){this.lastValue=t,this.hasValue=!0},e.prototype.notifyNext=function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.lastValue))},e}(ct.Subscriber);function s(t){var e=t.subscriber,n=t.period;e.notifyNext(),this.schedule(t,n)}});K(Nn);Nn.sampleTime;var kn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.sequenceEqual=function(t,e){return function(n){return n.lift(new r(t,e))}};var r=function(){function t(t,e){this.compareTo=t,this.comparor=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.compareTo,this.comparor))},t}();e.SequenceEqualOperator=r;var i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.compareTo=n,r.comparor=o,r._a=[],r._b=[],r._oneComplete=!1,r.add(n.subscribe(new s(e,r))),r}return o(e,t),e.prototype._next=function(t){this._oneComplete&&0===this._b.length?this.emit(!1):(this._a.push(t),this.checkValues())},e.prototype._complete=function(){this._oneComplete?this.emit(0===this._a.length&&0===this._b.length):this._oneComplete=!0},e.prototype.checkValues=function(){for(var t=this._a,e=this._b,n=this.comparor;t.length>0&&e.length>0;){var o=t.shift(),r=e.shift(),i=!1;n?(i=tt.tryCatch(n)(o,r))===X.errorObject&&this.destination.error(X.errorObject.e):i=o===r,i||this.emit(!1)}},e.prototype.emit=function(t){var e=this.destination;e.next(t),e.complete()},e.prototype.nextB=function(t){this._oneComplete&&0===this._a.length?this.emit(!1):(this._b.push(t),this.checkValues())},e}(ct.Subscriber);e.SequenceEqualSubscriber=i;var s=function(t){function e(e,n){var o=t.call(this,e)||this;return o.parent=n,o}return o(e,t),e.prototype._next=function(t){this.parent.nextB(t)},e.prototype._error=function(t){this.parent.error(t)},e.prototype._complete=function(){this.parent._complete()},e}(ct.Subscriber)});K(kn);kn.sequenceEqual,kn.SequenceEqualOperator,kn.SequenceEqualSubscriber;var Fn=Q(function(t,e){function n(){return new He.Subject}Object.defineProperty(e,"__esModule",{value:!0}),e.share=function(){return function(t){return on.refCount()(sn.multicast(n)(t))}}});K(Fn);Fn.share;var An=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.shareReplay=function(t,e,n){return function(o){return o.lift(function(t,e,n){var o,r,i=0,s=!1,a=!1;return function(u){i++,o&&!s||(s=!1,o=new xn.ReplaySubject(t,e,n),r=u.subscribe({next:function(t){o.next(t)},error:function(t){s=!0,o.error(t)},complete:function(){a=!0,o.complete()}}));var l=o.subscribe(this);return function(){i--,l.unsubscribe(),r&&0===i&&a&&r.unsubscribe()}}}(t,e,n))}}});K(An);An.shareReplay;var Tn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.single=function(t){return function(e){return e.lift(new r(t,e))}};var r=function(){function t(t,e){this.predicate=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.predicate,this.source))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.predicate=n,r.source=o,r.seenValue=!1,r.index=0,r}return o(e,t),e.prototype.applySingleValue=function(t){this.seenValue?this.destination.error("Sequence contains more than one element"):(this.seenValue=!0,this.singleValue=t)},e.prototype._next=function(t){var e=this.index++;this.predicate?this.tryNext(t,e):this.applySingleValue(t)},e.prototype.tryNext=function(t,e){try{this.predicate(t,e,this.source)&&this.applySingleValue(t)}catch(t){this.destination.error(t)}},e.prototype._complete=function(){var t=this.destination;this.index>0?(t.next(this.seenValue?this.singleValue:void 0),t.complete()):t.error(new Se.EmptyError)},e}(ct.Subscriber)});K(Tn);Tn.single;var En=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.skip=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.total=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.total))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.total=n,o.count=0,o}return o(e,t),e.prototype._next=function(t){++this.count>this.total&&this.destination.next(t)},e}(ct.Subscriber)});K(En);En.skip;var Dn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.skipLast=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){if(this._skipCount=t,this._skipCount<0)throw new Ie.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return 0===this._skipCount?e.subscribe(new ct.Subscriber(t)):e.subscribe(new i(t,this._skipCount))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o._skipCount=n,o._count=0,o._ring=new Array(n),o}return o(e,t),e.prototype._next=function(t){var e=this._skipCount,n=this._count++;if(n<e)this._ring[n]=t;else{var o=n%e,r=this._ring,i=r[o];r[o]=t,this.destination.next(i)}},e}(ct.Subscriber)});K(Dn);Dn.skipLast;var Ln=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.skipUntil=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.notifier))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.hasValue=!1,o.add(o.innerSubscription=Ct.subscribeToResult(o,n)),o}return o(e,t),e.prototype._next=function(e){this.hasValue&&t.prototype._next.call(this,e)},e.prototype.notifyNext=function(t,e,n,o,r){this.hasValue=!0,this.innerSubscription.unsubscribe()},e.prototype.notifyComplete=function(){},e}(pt.OuterSubscriber)});K(Ln);Ln.skipUntil;var Vn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.skipWhile=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.predicate))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.predicate=n,o.skipping=!0,o.index=0,o}return o(e,t),e.prototype._next=function(t){var e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)},e.prototype.tryCallPredicate=function(t){try{var e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(t){this.destination.error(t)}},e}(ct.Subscriber)});K(Vn);Vn.skipWhile;var Rn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.startWith=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n=t[t.length-1];Tt.isScheduler(n)?t.pop():n=null;var o=t.length;return 1!==o||n?o>0?ae.concat(Wt.fromArray(t,n),e):ae.concat(Xt.empty(n),e):ae.concat(te.scalar(t[0]),e)}}});K(Rn);Rn.startWith;var qn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=1,o={};e.Immediate={setImmediate:function(t){var e=n++;return o[e]=t,Promise.resolve().then(function(){return function(t){var e=o[t];e&&e()}(e)}),e},clearImmediate:function(t){delete o[t]}}});K(qn);qn.Immediate;var Hn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.scheduler=e,o.work=n,o}return o(e,t),e.prototype.requestAsyncId=function(e,n,o){return void 0===o&&(o=0),null!==o&&o>0?t.prototype.requestAsyncId.call(this,e,n,o):(e.actions.push(this),e.scheduled||(e.scheduled=qn.Immediate.setImmediate(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,o){if(void 0===o&&(o=0),null!==o&&o>0||null===o&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,o);0===e.actions.length&&(qn.Immediate.clearImmediate(n),e.scheduled=void 0)},e}(Mt.AsyncAction);e.AsapAction=r});K(Hn);Hn.AsapAction;var zn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,o=-1,r=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++o<r&&(t=n.shift()));if(this.active=!1,e){for(;++o<r&&(t=n.shift());)t.unsubscribe();throw e}},e}(kt.AsyncScheduler);e.AsapScheduler=r});K(zn);zn.AsapScheduler;var Wn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.asap=new zn.AsapScheduler(Hn.AsapAction)});K(Wn);Wn.asap;var $n=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(e,n,o){void 0===n&&(n=0),void 0===o&&(o=Wn.asap);var r=t.call(this)||this;return r.source=e,r.delayTime=n,r.scheduler=o,(!At.isNumeric(n)||n<0)&&(r.delayTime=0),o&&"function"==typeof o.schedule||(r.scheduler=Wn.asap),r}return o(e,t),e.create=function(t,n,o){return void 0===n&&(n=0),void 0===o&&(o=Wn.asap),new e(t,n,o)},e.dispatch=function(t){var e=t.source,n=t.subscriber;return this.add(e.subscribe(n))},e.prototype._subscribe=function(t){var n=this.delayTime,o=this.source;return this.scheduler.schedule(e.dispatch,n,{source:o,subscriber:t})},e}(bt.Observable);e.SubscribeOnObservable=r});K($n);$n.SubscribeOnObservable;var Bn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.subscribeOn=function(t,e){return void 0===e&&(e=0),function(o){return o.lift(new n(t,e))}};var n=function(){function t(t,e){this.scheduler=t,this.delay=e}return t.prototype.call=function(t,e){return new $n.SubscribeOnObservable(e,this.delay,this.scheduler).subscribe(t)},t}()});K(Bn);Bn.subscribeOn;var Jn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.switchMap=function t(e,n){return"function"==typeof n?function(o){return o.pipe(t(function(t,o){return Kt.from(e(t,o)).pipe(ne.map(function(e,r){return n(t,e,o,r)}))}))}:function(t){return t.lift(new r(e))}};var r=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.project))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.project=n,o.index=0,o}return o(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var o=this.innerSubscription;o&&o.unsubscribe(),this.add(this.innerSubscription=Ct.subscribeToResult(this,t,e,n))},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){this.innerSubscription=null},e.prototype.notifyComplete=function(e){this.remove(e),this.innerSubscription=null,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t,e,n,o,r){this.destination.next(e)},e}(pt.OuterSubscriber)});K(Jn);Jn.switchMap;var Gn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.switchAll=function(){return Jn.switchMap(re.identity)}});K(Gn);Gn.switchAll;var Un=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.switchMapTo=function(t,e){return e?Jn.switchMap(function(){return t},e):Jn.switchMap(function(){return t})}});K(Un);Un.switchMapTo;var Yn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.takeUntil=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.notifier=t}return t.prototype.call=function(t,e){var n=new i(t),o=Ct.subscribeToResult(n,this.notifier);return o&&!o.closed?(n.add(o),e.subscribe(n)):n},t}(),i=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.complete()},e.prototype.notifyComplete=function(){},e}(pt.OuterSubscriber)});K(Yn);Yn.takeUntil;var Zn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.takeWhile=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.predicate=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.predicate))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.predicate=n,o.index=0,o}return o(e,t),e.prototype._next=function(t){var e,n=this.destination;try{e=this.predicate(t,this.index++)}catch(t){return void n.error(t)}this.nextOrComplete(t,e)},e.prototype.nextOrComplete=function(t,e){var n=this.destination;Boolean(e)?n.next(t):n.complete()},e}(ct.Subscriber)});K(Zn);Zn.takeWhile;var Kn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.defaultThrottleConfig={leading:!0,trailing:!1},e.throttle=function(t,n){return void 0===n&&(n=e.defaultThrottleConfig),function(e){return e.lift(new r(t,n.leading,n.trailing))}};var r=function(){function t(t,e,n){this.durationSelector=t,this.leading=e,this.trailing=n}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.durationSelector,this.leading,this.trailing))},t}(),i=function(t){function e(e,n,o,r){var i=t.call(this,e)||this;return i.destination=e,i.durationSelector=n,i._leading=o,i._trailing=r,i._hasValue=!1,i}return o(e,t),e.prototype._next=function(t){this._hasValue=!0,this._sendValue=t,this._throttled||(this._leading?this.send():this.throttle(t))},e.prototype.send=function(){var t=this._hasValue,e=this._sendValue;t&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=null},e.prototype.throttle=function(t){var e=this.tryDurationSelector(t);e&&this.add(this._throttled=Ct.subscribeToResult(this,e))},e.prototype.tryDurationSelector=function(t){try{return this.durationSelector(t)}catch(t){return this.destination.error(t),null}},e.prototype.throttlingDone=function(){var t=this._throttled,e=this._trailing;t&&t.unsubscribe(),this._throttled=null,e&&this.send()},e.prototype.notifyNext=function(t,e,n,o,r){this.throttlingDone()},e.prototype.notifyComplete=function(){this.throttlingDone()},e}(pt.OuterSubscriber)});K(Kn);Kn.defaultThrottleConfig,Kn.throttle;var Qn=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.throttleTime=function(t,e,n){return void 0===e&&(e=Ft.async),void 0===n&&(n=Kn.defaultThrottleConfig),function(o){return o.lift(new r(t,e,n.leading,n.trailing))}};var r=function(){function t(t,e,n,o){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=o}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.duration,this.scheduler,this.leading,this.trailing))},t}(),i=function(t){function e(e,n,o,r,i){var s=t.call(this,e)||this;return s.duration=n,s.scheduler=o,s.leading=r,s.trailing=i,s._hasTrailingValue=!1,s._trailingValue=null,s}return o(e,t),e.prototype._next=function(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(s,this.duration,{subscriber:this})),this.leading&&this.destination.next(t))},e.prototype._complete=function(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()},e.prototype.clearThrottle=function(){var t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)},e}(ct.Subscriber);function s(t){t.subscriber.clearThrottle()}});K(Qn);Qn.throttleTime;var Xn=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.defer=function(t){return new bt.Observable(function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?Kt.from(n):Xt.empty()).subscribe(e)})}});K(Xn);Xn.defer;var to=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeInterval=function(t){return void 0===t&&(t=Ft.async),function(e){return Xn.defer(function(){return e.pipe(Ye.scan(function(e,n){var o=e.current;return{value:n,current:t.now(),last:o}},{current:t.now(),value:void 0,last:void 0}),ne.map(function(t){var e=t.current,o=t.last,r=t.value;return new n(r,e-o)}))})}};var n=function(){return function(t,e){this.value=t,this.interval=e}}();e.TimeInterval=n});K(to);to.timeInterval,to.TimeInterval;var eo=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){var n=t.call(this,"Timeout has occurred")||this;return Object.setPrototypeOf(n,e.prototype),n}return o(e,t),e}(Error);e.TimeoutError=r});K(eo);eo.TimeoutError;var no=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.timeoutWith=function(t,e,n){return void 0===n&&(n=Ft.async),function(o){var i=me.isDate(t),s=i?+t-n.now():Math.abs(t);return o.lift(new r(s,i,e,n))}};var r=function(){function t(t,e,n,o){this.waitFor=t,this.absoluteTimeout=e,this.withObservable=n,this.scheduler=o}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},t}(),i=function(t){function e(e,n,o,r,i){var s=t.call(this,e)||this;return s.absoluteTimeout=n,s.waitFor=o,s.withObservable=r,s.scheduler=i,s.action=null,s.scheduleTimeout(),s}return o(e,t),e.dispatchTimeout=function(t){var e=t.withObservable;t._unsubscribeAndRecycle(),t.add(Ct.subscribeToResult(t,e))},e.prototype.scheduleTimeout=function(){var t=this.action;t?this.action=t.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(e.dispatchTimeout,this.waitFor,this))},e.prototype._next=function(e){this.absoluteTimeout||this.scheduleTimeout(),t.prototype._next.call(this,e)},e.prototype._unsubscribe=function(){this.action=null,this.scheduler=null,this.withObservable=null},e}(pt.OuterSubscriber)});K(no);no.timeoutWith;var oo=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.timeout=function(t,e){return void 0===e&&(e=Ft.async),no.timeoutWith(t,ye.throwError(new eo.TimeoutError),e)}});K(oo);oo.timeout;var ro=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.timestamp=function(t){return void 0===t&&(t=Ft.async),ne.map(function(e){return new n(e,t.now())})};var n=function(){return function(t,e){this.value=t,this.timestamp=e}}();e.Timestamp=n});K(ro);ro.timestamp,ro.Timestamp;var io=Q(function(t,e){function n(t,e,n){return 0===n?[e]:(t.push(e),t)}Object.defineProperty(e,"__esModule",{value:!0}),e.toArray=function(){return Ze.reduce(n,[])}});K(io);io.toArray;var so=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.window=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.windowBoundaries=t}return t.prototype.call=function(t,e){var n=new i(t),o=e.subscribe(n);return o.closed||n.add(Ct.subscribeToResult(n,this.windowBoundaries)),o},t}(),i=function(t){function e(e){var n=t.call(this,e)||this;return n.window=new He.Subject,e.next(n.window),n}return o(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.openWindow()},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this._complete()},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t)},e.prototype._complete=function(){this.window.complete(),this.destination.complete()},e.prototype._unsubscribe=function(){this.window=null},e.prototype.openWindow=function(){var t=this.window;t&&t.complete();var e=this.destination,n=this.window=new He.Subject;e.next(n)},e}(pt.OuterSubscriber)});K(so);so.window;var ao=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.windowCount=function(t,e){return void 0===e&&(e=0),function(n){return n.lift(new r(t,e))}};var r=function(){function t(t,e){this.windowSize=t,this.startWindowEvery=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.windowSize,this.startWindowEvery))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.destination=e,r.windowSize=n,r.startWindowEvery=o,r.windows=[new He.Subject],r.count=0,e.next(r.windows[0]),r}return o(e,t),e.prototype._next=function(t){for(var e=this.startWindowEvery>0?this.startWindowEvery:this.windowSize,n=this.destination,o=this.windowSize,r=this.windows,i=r.length,s=0;s<i&&!this.closed;s++)r[s].next(t);var a=this.count-o+1;if(a>=0&&a%e==0&&!this.closed&&r.shift().complete(),++this.count%e==0&&!this.closed){var u=new He.Subject;r.push(u),n.next(u)}},e.prototype._error=function(t){var e=this.windows;if(e)for(;e.length>0&&!this.closed;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){var t=this.windows;if(t)for(;t.length>0&&!this.closed;)t.shift().complete();this.destination.complete()},e.prototype._unsubscribe=function(){this.count=0,this.windows=null},e}(ct.Subscriber)});K(ao);ao.windowCount;var uo=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.windowTime=function(t){var e=Ft.async,n=null,o=Number.POSITIVE_INFINITY;return Tt.isScheduler(arguments[3])&&(e=arguments[3]),Tt.isScheduler(arguments[2])?e=arguments[2]:At.isNumeric(arguments[2])&&(o=arguments[2]),Tt.isScheduler(arguments[1])?e=arguments[1]:At.isNumeric(arguments[1])&&(n=arguments[1]),function(i){return i.lift(new r(t,n,o,e))}};var r=function(){function t(t,e,n,o){this.windowTimeSpan=t,this.windowCreationInterval=e,this.maxWindowSize=n,this.scheduler=o}return t.prototype.call=function(t,e){return e.subscribe(new s(t,this.windowTimeSpan,this.windowCreationInterval,this.maxWindowSize,this.scheduler))},t}(),i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._numberOfNextedValues=0,e}return o(e,t),e.prototype.next=function(e){this._numberOfNextedValues++,t.prototype.next.call(this,e)},Object.defineProperty(e.prototype,"numberOfNextedValues",{get:function(){return this._numberOfNextedValues},enumerable:!0,configurable:!0}),e}(He.Subject),s=function(t){function e(e,n,o,r,i){var s=t.call(this,e)||this;s.destination=e,s.windowTimeSpan=n,s.windowCreationInterval=o,s.maxWindowSize=r,s.scheduler=i,s.windows=[];var c=s.openWindow();if(null!==o&&o>=0){var p={subscriber:s,window:c,context:null},d={windowTimeSpan:n,windowCreationInterval:o,subscriber:s,scheduler:i};s.add(i.schedule(l,n,p)),s.add(i.schedule(u,o,d))}else{var f={subscriber:s,window:c,windowTimeSpan:n};s.add(i.schedule(a,n,f))}return s}return o(e,t),e.prototype._next=function(t){for(var e=this.windows,n=e.length,o=0;o<n;o++){var r=e[o];r.closed||(r.next(t),r.numberOfNextedValues>=this.maxWindowSize&&this.closeWindow(r))}},e.prototype._error=function(t){for(var e=this.windows;e.length>0;)e.shift().error(t);this.destination.error(t)},e.prototype._complete=function(){for(var t=this.windows;t.length>0;){var e=t.shift();e.closed||e.complete()}this.destination.complete()},e.prototype.openWindow=function(){var t=new i;return this.windows.push(t),this.destination.next(t),t},e.prototype.closeWindow=function(t){t.complete();var e=this.windows;e.splice(e.indexOf(t),1)},e}(ct.Subscriber);function a(t){var e=t.subscriber,n=t.windowTimeSpan,o=t.window;o&&e.closeWindow(o),t.window=e.openWindow(),this.schedule(t,n)}function u(t){var e=t.windowTimeSpan,n=t.subscriber,o=t.scheduler,r=t.windowCreationInterval,i={action:this,subscription:null},s={subscriber:n,window:n.openWindow(),context:i};i.subscription=o.schedule(l,e,s),this.add(i.subscription),this.schedule(t,r)}function l(t){var e=t.subscriber,n=t.window,o=t.context;o&&o.action&&o.subscription&&o.action.remove(o.subscription),e.closeWindow(n)}});K(uo);uo.windowTime;var lo=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.windowToggle=function(t,e){return function(n){return n.lift(new r(t,e))}};var r=function(){function t(t,e){this.openings=t,this.closingSelector=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.openings,this.closingSelector))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.openings=n,r.closingSelector=o,r.contexts=[],r.add(r.openSubscription=Ct.subscribeToResult(r,n,n)),r}return o(e,t),e.prototype._next=function(t){var e=this.contexts;if(e)for(var n=e.length,o=0;o<n;o++)e[o].window.next(t)},e.prototype._error=function(e){var n=this.contexts;if(this.contexts=null,n)for(var o=n.length,r=-1;++r<o;){var i=n[r];i.window.error(e),i.subscription.unsubscribe()}t.prototype._error.call(this,e)},e.prototype._complete=function(){var e=this.contexts;if(this.contexts=null,e)for(var n=e.length,o=-1;++o<n;){var r=e[o];r.window.complete(),r.subscription.unsubscribe()}t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.contexts;if(this.contexts=null,t)for(var e=t.length,n=-1;++n<e;){var o=t[n];o.window.unsubscribe(),o.subscription.unsubscribe()}},e.prototype.notifyNext=function(t,e,n,o,r){if(t===this.openings){var i=this.closingSelector,s=tt.tryCatch(i)(e);if(s===X.errorObject)return this.error(X.errorObject.e);var a=new He.Subject,u=new ut.Subscription,l={window:a,subscription:u};this.contexts.push(l);var c=Ct.subscribeToResult(this,s,l);c.closed?this.closeWindow(this.contexts.length-1):(c.context=l,u.add(c)),this.destination.next(a)}else this.closeWindow(this.contexts.indexOf(t))},e.prototype.notifyError=function(t){this.error(t)},e.prototype.notifyComplete=function(t){t!==this.openSubscription&&this.closeWindow(this.contexts.indexOf(t.context))},e.prototype.closeWindow=function(t){if(-1!==t){var e=this.contexts,n=e[t],o=n.window,r=n.subscription;e.splice(t,1),o.complete(),r.unsubscribe()}},e}(pt.OuterSubscriber)});K(lo);lo.windowToggle;var co=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.windowWhen=function(t){return function(e){return e.lift(new r(t))}};var r=function(){function t(t){this.closingSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.closingSelector))},t}(),i=function(t){function e(e,n){var o=t.call(this,e)||this;return o.destination=e,o.closingSelector=n,o.openWindow(),o}return o(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.openWindow(r)},e.prototype.notifyError=function(t,e){this._error(t)},e.prototype.notifyComplete=function(t){this.openWindow(t)},e.prototype._next=function(t){this.window.next(t)},e.prototype._error=function(t){this.window.error(t),this.destination.error(t),this.unsubscribeClosingNotification()},e.prototype._complete=function(){this.window.complete(),this.destination.complete(),this.unsubscribeClosingNotification()},e.prototype.unsubscribeClosingNotification=function(){this.closingNotification&&this.closingNotification.unsubscribe()},e.prototype.openWindow=function(t){void 0===t&&(t=null),t&&(this.remove(t),t.unsubscribe());var e=this.window;e&&e.complete();var n=this.window=new He.Subject;this.destination.next(n);var o=tt.tryCatch(this.closingSelector)();if(o===X.errorObject){var r=X.errorObject.e;this.destination.error(r),this.window.error(r)}else this.add(this.closingNotification=Ct.subscribeToResult(this,o))},e}(pt.OuterSubscriber)});K(co);co.windowWhen;var po=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.withLatestFrom=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){var n;"function"==typeof t[t.length-1]&&(n=t.pop());var o=t;return e.lift(new r(o,n))}};var r=function(){function t(t,e){this.observables=t,this.project=e}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.observables,this.project))},t}(),i=function(t){function e(e,n,o){var r=t.call(this,e)||this;r.observables=n,r.project=o,r.toRespond=[];var i=n.length;r.values=new Array(i);for(var s=0;s<i;s++)r.toRespond.push(s);for(s=0;s<i;s++){var a=n[s];r.add(Ct.subscribeToResult(r,a,a,s))}return r}return o(e,t),e.prototype.notifyNext=function(t,e,n,o,r){this.values[n]=e;var i=this.toRespond;if(i.length>0){var s=i.indexOf(n);-1!==s&&i.splice(s,1)}},e.prototype.notifyComplete=function(){},e.prototype._next=function(t){if(0===this.toRespond.length){var e=[t].concat(this.values);this.project?this._tryProject(e):this.destination.next(e)}},e.prototype._tryProject=function(t){var e;try{e=this.project.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(pt.OuterSubscriber)});K(po);po.withLatestFrom;var fo=Q(function(t,e){var n,o=Z&&Z.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)});Object.defineProperty(e,"__esModule",{value:!0}),e.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),Wt.fromArray(t,void 0).lift(new r(n))};var r=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new i(t,this.resultSelector))},t}();e.ZipOperator=r;var i=function(t){function e(e,n,o){void 0===o&&(o=Object.create(null));var r=t.call(this,e)||this;return r.iterators=[],r.active=0,r.resultSelector="function"==typeof n?n:null,r.values=o,r}return o(e,t),e.prototype._next=function(t){var e=this.iterators;it.isArray(t)?e.push(new a(t)):"function"==typeof t[_t.iterator]?e.push(new s(t[_t.iterator]())):e.push(new u(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(0!==e){this.active=e;for(var n=0;n<e;n++){var o=t[n];o.stillUnsubscribed?this.add(o.subscribe(o,n)):this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,o=0;o<e;o++){if("function"==typeof(s=t[o]).hasValue&&!s.hasValue())return}var r=!1,i=[];for(o=0;o<e;o++){var s,a=(s=t[o]).next();if(s.hasCompleted()&&(r=!0),a.done)return void n.complete();i.push(a.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(ct.Subscriber);e.ZipSubscriber=i;var s=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),a=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[_t.iterator]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),u=function(t){function e(e,n,o){var r=t.call(this,e)||this;return r.parent=n,r.observable=o,r.stillUnsubscribed=!0,r.buffer=[],r.isComplete=!1,r}return o(e,t),e.prototype[_t.iterator]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,o,r){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Ct.subscribeToResult(this,this.observable,this,e)},e}(pt.OuterSubscriber)});K(fo);fo.zip,fo.ZipOperator,fo.ZipSubscriber;var ho=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.zip=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(fo.zip.apply(void 0,[e].concat(t)))}}});K(ho);ho.zip;var mo=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.zipAll=function(t){return function(e){return e.lift(new fo.ZipOperator(t))}}});K(mo);mo.zipAll;var yo=Q(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.audit=St.audit,e.auditTime=Dt.auditTime,e.buffer=Lt.buffer,e.bufferCount=Vt.bufferCount,e.bufferTime=Rt.bufferTime,e.bufferToggle=qt.bufferToggle,e.bufferWhen=Ht.bufferWhen,e.catchError=zt.catchError,e.combineAll=Bt.combineAll,e.combineLatest=Qt.combineLatest,e.concat=ue.concat,e.concatAll=se.concatAll,e.concatMap=le.concatMap,e.concatMapTo=ce.concatMapTo,e.count=pe.count,e.debounce=de.debounce,e.debounceTime=fe.debounceTime,e.defaultIfEmpty=he.defaultIfEmpty,e.delay=ve.delay,e.delayWhen=ge.delayWhen,e.dematerialize=_e.dematerialize,e.distinct=xe.distinct,e.distinctUntilChanged=we.distinctUntilChanged,e.distinctUntilKeyChanged=Oe.distinctUntilKeyChanged,e.elementAt=Ne.elementAt,e.every=ke.every,e.exhaust=Fe.exhaust,e.exhaustMap=Ae.exhaustMap,e.expand=Te.expand,e.filter=je.filter,e.finalize=Ee.finalize,e.find=De.find,e.findIndex=Le.findIndex,e.first=Ve.first,e.groupBy=ze.groupBy,e.ignoreElements=We.ignoreElements,e.isEmpty=$e.isEmpty,e.last=Je.last,e.map=ne.map,e.mapTo=Ge.mapTo,e.materialize=Ue.materialize,e.max=Ke.max,e.merge=Xe.merge,e.mergeAll=ie.mergeAll,e.mergeMap=oe.mergeMap;var n=oe;e.flatMap=n.mergeMap,e.mergeMapTo=tn.mergeMapTo,e.mergeScan=en.mergeScan,e.min=nn.min,e.multicast=sn.multicast,e.observeOn=an.observeOn,e.onErrorResumeNext=un.onErrorResumeNext,e.pairwise=ln.pairwise,e.partition=pn.partition,e.pluck=dn.pluck,e.publish=fn.publish,e.publishBehavior=mn.publishBehavior,e.publishLast=bn.publishLast,e.publishReplay=wn.publishReplay,e.race=In.race,e.reduce=Ze.reduce,e.repeat=jn.repeat,e.repeatWhen=Cn.repeatWhen,e.retry=Sn.retry,e.retryWhen=Pn.retryWhen,e.refCount=on.refCount,e.sample=Mn.sample,e.sampleTime=Nn.sampleTime,e.scan=Ye.scan,e.sequenceEqual=kn.sequenceEqual,e.share=Fn.share,e.shareReplay=An.shareReplay,e.single=Tn.single,e.skip=En.skip,e.skipLast=Dn.skipLast,e.skipUntil=Ln.skipUntil,e.skipWhile=Vn.skipWhile,e.startWith=Rn.startWith,e.subscribeOn=Bn.subscribeOn,e.switchAll=Gn.switchAll,e.switchMap=Jn.switchMap,e.switchMapTo=Un.switchMapTo,e.take=Me.take,e.takeLast=Be.takeLast,e.takeUntil=Yn.takeUntil,e.takeWhile=Zn.takeWhile,e.tap=Ce.tap,e.throttle=Kn.throttle,e.throttleTime=Qn.throttleTime,e.timeInterval=to.timeInterval,e.timeout=oo.timeout,e.timeoutWith=no.timeoutWith,e.timestamp=ro.timestamp,e.toArray=io.toArray,e.window=so.window,e.windowCount=ao.windowCount,e.windowTime=uo.windowTime,e.windowToggle=lo.windowToggle,e.windowWhen=co.windowWhen,e.withLatestFrom=po.withLatestFrom,e.zip=ho.zip,e.zipAll=mo.zipAll});K(yo);yo.audit,yo.auditTime,yo.buffer,yo.bufferCount,yo.bufferTime,yo.bufferToggle,yo.bufferWhen,yo.catchError,yo.combineAll,yo.combineLatest,yo.concat,yo.concatAll,yo.concatMap,yo.concatMapTo,yo.count,yo.debounce,yo.debounceTime,yo.defaultIfEmpty,yo.delay,yo.delayWhen,yo.dematerialize,yo.distinct,yo.distinctUntilChanged,yo.distinctUntilKeyChanged,yo.elementAt,yo.every,yo.exhaust,yo.exhaustMap,yo.expand,yo.filter,yo.finalize,yo.find,yo.findIndex,yo.first,yo.groupBy,yo.ignoreElements,yo.isEmpty,yo.last;var bo=yo.map,vo=(yo.mapTo,yo.materialize,yo.max,yo.merge,yo.mergeAll,yo.mergeMap,yo.flatMap,yo.mergeMapTo,yo.mergeScan,yo.min,yo.multicast,yo.observeOn,yo.onErrorResumeNext,yo.pairwise,yo.partition,yo.pluck,yo.publish,yo.publishBehavior,yo.publishLast,yo.publishReplay,yo.race,yo.reduce,yo.repeat,yo.repeatWhen,yo.retry,yo.retryWhen,yo.refCount,yo.sample,yo.sampleTime,yo.scan,yo.sequenceEqual,yo.share,yo.shareReplay,yo.single,yo.skip,yo.skipLast,yo.skipUntil,yo.skipWhile,yo.startWith,yo.subscribeOn,yo.switchAll,yo.switchMap,yo.switchMapTo,yo.take,yo.takeLast,yo.takeUntil,yo.takeWhile,yo.tap,yo.throttle,yo.throttleTime,yo.timeInterval,yo.timeout,yo.timeoutWith,yo.timestamp,yo.toArray,yo.window,yo.windowCount,yo.windowTime,yo.windowToggle,yo.windowWhen,yo.withLatestFrom,yo.zip,yo.zipAll,function(){function t(){}return t.required=function(e){switch(void 0===e&&(e=!0),e){case!0:return function(t,e){return void 0===e&&(e=!1),e?null:m(t.value)?null:{required:!0}};case!1:return t.nullValidator;default:return m(e.value)?null:{required:!0}}},t.type=function(e){return m(e)?function(t,n){if(void 0===n&&(n=!1),y(t.value))return null;var o=t.value;return E(w(e)?e.some(function(t){return S(o,t)}):S(o,e),n)?null:{type:{requiredType:e,currentValue:o}}}:t.nullValidator},t.enum=function(e){return w(e)?function(t,n){if(void 0===n&&(n=!1),y(t.value))return null;var r=t.value,i=function(t,e){return t===e||v(t)&&+e==+t||_(t,"strict")&&M(e,"boolean")===t||null===t&&!m(e)||o.isEqual(t,e)};return E(w(r)?r.every(function(t){return e.some(function(e){return i(e,t)})}):e.some(function(t){return i(t,r)}),n)?null:{enum:{allowedValues:e,currentValue:r}}}:t.nullValidator},t.const=function(e){return m(e)?function(t,n){if(void 0===n&&(n=!1),y(t.value))return null;var o,r,i=t.value;return E((o=e)===(r=i)||v(o)&&+r==+o||_(o,"strict")&&M(r,"boolean")===o||null===o&&!m(r),n)?null:{const:{requiredValue:e,currentValue:i}}}:t.nullValidator},t.minLength=function(e){return m(e)?function(t,n){if(void 0===n&&(n=!1),y(t.value))return null;var o=b(t.value)?t.value.length:0;return E(o>=e,n)?null:{minLength:{minimumLength:e,currentLength:o}}}:t.nullValidator},t.maxLength=function(e){return m(e)?function(t,n){void 0===n&&(n=!1);var o=b(t.value)?t.value.length:0;return E(o<=e,n)?null:{maxLength:{maximumLength:e,currentLength:o}}}:t.nullValidator},t.pattern=function(e,n){return void 0===n&&(n=!1),m(e)?function(t,o){if(void 0===o&&(o=!1),y(t.value))return null;var r,i;"string"==typeof e?(i=n?"^"+e+"$":e,r=new RegExp(i)):(i=e.toString(),r=e);var s=t.value;return E(!!b(s)&&r.test(s),o)?null:{pattern:{requiredPattern:i,currentValue:s}}}:t.nullValidator},t.format=function(e){return m(e)?function(t,n){if(void 0===n&&(n=!1),y(t.value))return null;var o,r=t.value;if(b(r)){var i=Y[e];"object"==typeof i?o=i.test(r):"function"==typeof i?o=i(r):(console.error('format validator error: "'+e+'" is not a recognized format.'),o=!0)}else o=["date","time","date-time"].includes(e)&&"[object Date]"===Object.prototype.toString.call(r);return E(o,n)?null:{format:{requiredFormat:e,currentValue:r}}}:t.nullValidator},t.minimum=function(e){return m(e)?function(t,n){if(void 0===n&&(n=!1),y(t.value))return null;var o=t.value;return E(!v(o)||o>=e,n)?null:{minimum:{minimumValue:e,currentValue:o}}}:t.nullValidator},t.exclusiveMinimum=function(e){return m(e)?function(t,n){if(void 0===n&&(n=!1),y(t.value))return null;var o=t.value;return E(!v(o)||+o<e,n)?null:{exclusiveMinimum:{exclusiveMinimumValue:e,currentValue:o}}}:t.nullValidator},t.maximum=function(e){return m(e)?function(t,n){if(void 0===n&&(n=!1),y(t.value))return null;var o=t.value;return E(!v(o)||+o<=e,n)?null:{maximum:{maximumValue:e,currentValue:o}}}:t.nullValidator},t.exclusiveMaximum=function(e){return m(e)?function(t,n){if(void 0===n&&(n=!1),y(t.value))return null;var o=t.value;return E(!v(o)||+o<e,n)?null:{exclusiveMaximum:{exclusiveMaximumValue:e,currentValue:o}}}:t.nullValidator},t.multipleOf=function(e){return m(e)?function(t,n){if(void 0===n&&(n=!1),y(t.value))return null;var o=t.value;return E(v(o)&&o%e==0,n)?null:{multipleOf:{multipleOfValue:e,currentValue:o}}}:t.nullValidator},t.minProperties=function(e){return m(e)?function(t,n){if(void 0===n&&(n=!1),y(t.value))return null;var o=Object.keys(t.value).length||0;return E(o>=e,n)?null:{minProperties:{minimumProperties:e,currentProperties:o}}}:t.nullValidator},t.maxProperties=function(e){return m(e)?function(t,n){void 0===n&&(n=!1);var o=Object.keys(t.value).length||0;return E(o<=e,n)?null:{maxProperties:{maximumProperties:e,currentProperties:o}}}:t.nullValidator},t.dependencies=function(e){return"object"!==C(e)||y(e)?t.nullValidator:function(n,o){if(void 0===o&&(o=!1),y(n.value))return null;var r=d(q(e,function(r,i){if(!m(n.value[i]))return null;var s,a,u={},l={};"array"===C(e[i])?s=e[i]:"object"===C(e[i])&&(s=e[i].required||[],l=e[i].properties||{});for(var c=0,p=s;c<p.length;c++){var f=p[c];E(!m(n.value[f]),o)&&(u[f]={required:!0})}return y(u=d(u,q(l,function(e,o){var r,i=d(q(e,function(r,i){var s=null;if("maximum"===r||"minimum"===r){var a=!!e["exclusiveM"+r.slice(1)];s=t[r](i,a)}else"function"==typeof t[r]&&(s=t[r](i));return h(s)?s(n.value[o]):null}));return y(i)?null:((r={})[o]=i,r)})))?null:((a={})[i]=u,a)}));return y(r)?null:r}},t.minItems=function(e){return m(e)?function(t,n){if(void 0===n&&(n=!1),y(t.value))return null;var o=w(t.value)?t.value.length:0;return E(o>=e,n)?null:{minItems:{minimumItems:e,currentItems:o}}}:t.nullValidator},t.maxItems=function(e){return m(e)?function(t,n){void 0===n&&(n=!1);var o=w(t.value)?t.value.length:0;return E(o<=e,n)?null:{maxItems:{maximumItems:e,currentItems:o}}}:t.nullValidator},t.uniqueItems=function(e){return void 0===e&&(e=!0),e?function(t,e){if(void 0===e&&(e=!1),y(t.value))return null;for(var n=t.value.slice().sort(),o=[],r=1;r<n.length;r++)n[r-1]===n[r]&&o.includes(n[r])&&o.push(n[r]);return E(!o.length,e)?null:{uniqueItems:{duplicateItems:o}}}:t.nullValidator},t.contains=function(e){return void 0===e&&(e=!0),e?function(t,n){if(void 0===n&&(n=!1),y(t.value)||!w(t.value))return null;var o=t.value;return E(!0,n)?null:{contains:{requiredItem:e,currentItems:o}}}:t.nullValidator},t.nullValidator=function(t){return null},t.composeAnyOf=function(t){if(!t)return null;var e=t.filter(h);return 0===e.length?null:function(n,o){void 0===o&&(o=!1);var r=c(n,e,o).filter(h);return E(t.length>r.length,o)?null:d.apply(void 0,r.concat([{anyOf:!o}]))}},t.composeOneOf=function(t){if(!t)return null;var e=t.filter(h);return 0===e.length?null:function(n,o){void 0===o&&(o=!1);var r=c(n,e);if(E(1===t.length-r.filter(h).length,o))return null;var i=c(n,e,o);return d.apply(void 0,r.concat(i,[{oneOf:!o}]))}},t.composeAllOf=function(t){if(!t)return null;var e=t.filter(h);return 0===e.length?null:function(t,n){void 0===n&&(n=!1);var o=f(c(t,e,n));return E(null===o,n)?null:d(o,{allOf:!n})}},t.composeNot=function(t){return t?function(e,n){if(void 0===n&&(n=!1),y(e.value))return null;var o=t(e,!n);return E(null===o,n)?null:d(o,{not:!n})}:null},t.compose=function(t){if(!t)return null;var e=t.filter(h);return 0===e.length?null:function(t,n){return void 0===n&&(n=!1),f(c(t,e,n))}},t.composeAsync=function(t){if(!t)return null;var n=t.filter(h);return 0===n.length?null:function(t){var o=p(t,n).pipe(bo(A));return bo.call(e.forkJoin(o),f)}},t.min=function(e){return m(e)?function(t){if(y(t.value)||y(e))return null;var n=parseFloat(t.value),o=t.value;return isNaN(n)||n>=e?null:{min:{min:e,actual:o}}}:t.nullValidator},t.max=function(e){return m(e)?function(t){if(y(t.value)||y(e))return null;var n=parseFloat(t.value),o=t.value;return isNaN(n)||n<=e?null:{max:{max:e,actual:o}}}:t.nullValidator},t.requiredTrue=function(e){return e?!0===e.value?null:{required:!0}:t.nullValidator},t.email=function(e){if(!e)return t.nullValidator;return/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/.test(e.value)?null:{email:!0}},t}()),go=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};function _o(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if((t=t.filter(function(t){return!y(t)})).some(function(t){return!x(t)}))return null;for(var n={},r=0,i=t;r<i.length;r++)for(var s=i[r],a=function(e){var r,i,a=n[e],u=s[e];if(!H(n,e)||o.isEqual(a,u))n[e]=u;else switch(e){case"allOf":if(!w(a)||!w(u))return{value:{allOf:t.slice()}};n.allOf=_o.apply(void 0,a.concat(u));break;case"additionalItems":case"additionalProperties":case"contains":case"propertyNames":if(x(a)&&x(u))n[e]=_o(a,u);else{if("additionalProperties"!==e||!1!==a&&!1!==u)return{value:{allOf:t.slice()}};n.combinedSchema=!1}break;case"anyOf":case"oneOf":case"enum":if(!w(a)||!w(u))return{value:{allOf:t.slice()}};if(n[e]=a.filter(function(t){return u.findIndex(function(e){return o.isEqual(t,e)})>-1}),!n[e].length)return{value:{allOf:t.slice()}};break;case"definitions":if(!x(a)||!x(u))return{value:{allOf:t.slice()}};for(var l=go({},a),c=0,p=Object.keys(u);c<p.length;c++){if(H(l,P=p[c])&&!o.isEqual(l[P],u[P]))return{value:{allOf:t.slice()}};l[P]=u[P]}n.definitions=l;break;case"dependencies":if(!x(a)||!x(u))return{value:{allOf:t.slice()}};l=go({},a);for(var d=0,f=Object.keys(u);d<f.length;d++){if(!H(l,P=f[d])||o.isEqual(l[P],u[P]))l[P]=u[P];else if(w(u[P])&&w(l[P]))l[P]=W.apply(void 0,l[P].concat(u[P]));else{if(!w(u[P])&&!x(u[P])||!w(l[P])&&!x(l[P]))return{value:{allOf:t.slice()}};var h=w(n.required)?n.required:[],m=w(l[P])?{required:W.apply(void 0,h.concat([l[P]]))}:l[P],y=w(u[P])?{required:W.apply(void 0,h.concat([u[P]]))}:u[P];l[P]=_o(m,y)}}n.dependencies=l;break;case"items":if(w(a)&&w(u)){if(n.items=a.filter(function(t){return u.findIndex(function(e){return o.isEqual(t,e)})>-1}),!n.items.length)return{value:{allOf:t.slice()}}}else if(x(a)&&x(u))n.items=_o(a,u);else if(w(a)&&x(u))n.items=a.map(function(t){return _o(t,u)});else{if(!x(a)||!w(u))return{value:{allOf:t.slice()}};n.items=u.map(function(t){return _o(t,a)})}break;case"multipleOf":if(!v(a)||!v(u))return{value:{allOf:t.slice()}};var g=function(t,e){return e?g(e,t%e):t};n.multipleOf=(r=a)*(i=u)/g(r,i);break;case"maximum":case"exclusiveMaximum":case"maxLength":case"maxItems":case"maxProperties":if(!v(a)||!v(u))return{value:{allOf:t.slice()}};n[e]=Math.min(a,u);break;case"minimum":case"exclusiveMinimum":case"minLength":case"minItems":case"minProperties":if(!v(a)||!v(u))return{value:{allOf:t.slice()}};n[e]=Math.max(a,u);break;case"not":if(!x(a)||!x(u))return{value:{allOf:t.slice()}};var _=[a,u].reduce(function(t,e){return w(e.anyOf)&&1===Object.keys(e).length?t.concat(e.anyOf):t.concat([e])},[]);n.not={anyOf:_};break;case"patternProperties":if(!x(a)||!x(u))return{value:{allOf:t.slice()}};l=go({},a);for(var O=0,I=Object.keys(u);O<I.length;O++){if(!H(l,P=I[O])||o.isEqual(l[P],u[P]))l[P]=u[P];else{if(!x(u[P])||!x(l[P]))return{value:{allOf:t.slice()}};l[P]=_o(l[P],u[P])}}n.patternProperties=l;break;case"properties":if(!x(a)||!x(u))return{value:{allOf:t.slice()}};var j=go({},a);H(u,"additionalProperties")&&Object.keys(a).filter(function(t){return!Object.keys(u).includes(t)}).forEach(function(t){!1===u.additionalProperties?delete j[t]:x(u.additionalProperties)&&(j[t]=_o(j[t],u.additionalProperties))});for(var C=0,S=Object.keys(u);C<S.length;C++){var P=S[C];if(o.isEqual(j[P],u[P])||!H(j,P)&&!H(j,"additionalProperties"))j[P]=u[P];else if(!H(j,P)&&H(j,"additionalProperties"))x(j.additionalProperties)&&(j[P]=_o(j.additionalProperties,u[P]));else{if(!x(u[P])||!x(j[P]))return{value:{allOf:t.slice()}};j[P]=_o(j[P],u[P])}}n.properties=j;break;case"required":if(w(a)&&w(u))n.required=W.apply(void 0,a.concat(u));else{if("boolean"!=typeof u||"boolean"!=typeof a)return{value:{allOf:t.slice()}};n.required=!!a||!!u}break;case"$schema":case"$id":case"id":break;case"title":case"description":n[e]=u;break;case"type":if(!w(u)&&!b(u)||!w(a)&&!b(a))return{value:{allOf:t.slice()}};var M=$(a,u);if(!M.length)return{value:{allOf:t.slice()}};n.type=M.length>1?M:M[0];break;case"uniqueItems":n.uniqueItems=!!a||!!u;break;default:return{value:{allOf:t.slice()}}}},u=0,l=Object.keys(s);u<l.length;u++){var c=a(l[u]);if("object"==typeof c)return c.value}return n}var xo=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};function wo(t){}function Oo(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!0);var o={},r=function(t){var e=C(t,"strict");return{integer:"number",null:"string"}[e]||e},i=function(t){return Oo(t,e,!1)};if(n&&(o.$schema="http://json-schema.org/draft-06/schema#"),o.type=r(t),"object"===o.type){o.properties={},e&&(o.required=[]);for(var s=0,a=Object.keys(t);s<a.length;s++){var u=a[s];o.properties[u]=i(t[u]),e&&o.required.push(u)}}else"array"===o.type&&(o.items=t.map(i),1===new Set(t.map(r)).size&&(o.items=o.items.reduce(function(t,e){return xo({},t,e)},{})),e&&(o.minItems=1));return o}function Io(t,e,n){void 0===n&&(n="schema");var o=U.parse(e);if(null===o)return console.error("getFromSchema error: Invalid JSON Pointer: "+e),null;var r=t,i=[],s=o.length;"parent"===n.slice(0,6)&&o.length--;for(var a=0;a<s;++a){var u=o[a],l=!1;if("object"!=typeof r)return console.error('getFromSchema error: Unable to find "'+u+'" key in schema.'),console.error(t),console.error(e),null;if("array"!==r.type||isNaN(u)&&"-"!==u?"object"===r.type&&(x(r.properties)&&H(r.properties,u)?(l=!0,r=r.properties[u],i.push("properties",u)):x(r.additionalProperties)?(l=!0,r=r.additionalProperties,i.push("additionalProperties")):!1!==r.additionalProperties&&(l=!0,r={},i.push("additionalProperties"))):(H(r,"items")&&(x(r.items)?(l=!0,r=r.items,i.push("items")):w(r.items)&&!isNaN(u)&&r.items.length>=+u&&(l=!0,r=r.items[+u],i.push("items",u))),!l&&x(r.additionalItems)?(l=!0,r=r.additionalItems,i.push("additionalItems")):!1!==r.additionalItems&&(l=!0,r={},i.push("additionalItems"))),!l)return console.error('getFromSchema error: Unable to find "'+u+'" item in schema.'),console.error(t),void console.error(e)}return"Pointer"===n.slice(-7)?i:r}function jo(t,e,n){if(void 0===n&&(n=new Map),!t)return"";var o=U.toGenericPointer(U.compile(t),n);if(-1===o.indexOf("/"))return o;for(var r=!0;r;)r=!1,e.forEach(function(t,e){if(U.isSubPointer(t,e))for(;U.isSubPointer(e,o,!0);)o=U.toGenericPointer(t+o.slice(e.length),n),r=!0});return o}function Co(t,e){void 0===e&&(e=null);var n=U.getFirst([[t,"/x-schema-form/type"],[t,"/x-schema-form/widget/component"],[t,"/x-schema-form/widget"],[t,"/widget/component"],[t,"/widget"]]);if(b(n))return So(n,t,e);var o=t.type;if(o){if(w(o)&&(o=T("object",o)&&H(t,"properties")?"object":T("array",o)&&H(t,"items")?"array":T("array",o)&&H(t,"additionalItems")?"array":T("string",o)?"string":T("number",o)?"number":T("integer",o)?"integer":T("boolean",o)?"boolean":"unknown"),"boolean"===o)return"checkbox";if("object"===o){if(H(t,"properties")||H(t,"additionalProperties"))return"section";if(H(t,"$ref"))return"$ref"}if("array"===o)return H(U.getFirst([[t,"/items"],[t,"/additionalItems"]])||{},"enum")&&1!==t.maxItems?So("checkboxes",t,e):"array";if("null"===o)return"none";if(U.has(e,"/options/titleMap")||H(t,"enum")||No(t,null,!0))return"select";if("number"===o||"integer"===o)return("integer"===o||H(t,"multipleOf"))&&H(t,"maximum")&&H(t,"minimum")?"range":o;if("string"===o)return{color:"color",date:"date","date-time":"datetime-local",email:"email",uri:"url"}[t.format]||"text"}return H(t,"$ref")?"$ref":w(t.oneOf)||w(t.anyOf)?"one-of":(console.error("getInputType error: Unable to determine input type for "+o),console.error("schema",t),e&&console.error("layoutNode",e),"none")}function So(t,e,n){return void 0===n&&(n=null),!b(t)||"checkbox"!==t.slice(0,8)&&"radio"!==t.slice(0,5)?t:!0===U.getFirst([[n,"/inline"],[n,"/options/inline"],[e,"/inline"],[e,"/x-schema-form/inline"],[e,"/x-schema-form/options/inline"],[e,"/x-schema-form/widget/inline"],[e,"/x-schema-form/widget/component/inline"],[e,"/x-schema-form/widget/component/options/inline"],[e,"/widget/inline"],[e,"/widget/component/inline"],[e,"/widget/component/options/inline"]])?"radio"===t.slice(0,5)?"radios-inline":"checkboxes-inline":t}function Po(t,e){if(!x(t))return console.error("isInputRequired error: Input schema must be an object."),!1;var n=U.parse(e);if(w(n)){if(!n.length)return!0===t.required;var o=n.pop(),r=n[n.length-1];["properties","additionalProperties","patternProperties","items","additionalItems"].includes(r)&&n.pop();var i=U.get(t,n)||{};if(w(i.required))return i.required.includes(o);if("array"===i.type)return H(i,"minItems")&&v(o)&&+i.minItems>+o}return!1}function Mo(t,e,n){if(x(t)&&x(t.options)){var o={},r=function(t){return"ui:"===t.slice(0,3).toLowerCase()?t.slice(3):t};if(z(o,n.formOptions.defautWidgetOptions,[],r),[[U.get(e,"/ui:widget/options"),[]],[U.get(e,"/ui:widget"),[]],[e,["additionalProperties","additionalItems","properties","items","required","type","x-schema-form","$ref"]],[U.get(e,"/x-schema-form/options"),[]],[U.get(e,"/x-schema-form"),["items","options"]],[t,["_id","$ref","arrayItem","arrayItemType","dataPointer","dataType","items","key","name","options","recursiveReference","type","widget"]],[t.options,[]]].forEach(function(t){var e=t[0],n=t[1];return z(o,e,n,r)}),!H(o,"titleMap")){var i=null;(i=No(e,o.flatList))&&(o.titleMap=i),H(o,"titleMap")||H(o,"enum")||!H(e,"items")||(U.has(e,"/items/titleMap")?o.titleMap=e.items.titleMap:U.has(e,"/items/enum")?(o.enum=e.items.enum,!H(o,"enumNames")&&U.has(e,"/items/enumNames")&&(o.enumNames=e.items.enumNames)):U.has(e,"/items/oneOf")&&(i=No(e.items,o.flatList))&&(o.titleMap=i))}"integer"!==e.type||m(o.multipleOf)||(o.multipleOf=1),U.has(o,"/autocomplete/source")?o.typeahead=o.autocomplete:U.has(o,"/tagsinput/source")?o.typeahead=o.tagsinput:U.has(o,"/tagsinput/typeahead/source")&&(o.typeahead=o.tagsinput.typeahead),t.options=o}}function No(t,e,n){void 0===t&&(t={}),void 0===e&&(e=null),void 0===n&&(n=!1);var o=null,r=t.oneOf||t.anyOf||null;if(w(r)&&r.every(function(t){return t.title})){if(r.every(function(t){return w(t.enum)&&1===t.enum.length})){if(n)return!0;o=r.map(function(t){return{name:t.title,value:t.enum[0]}})}else if(r.every(function(t){return t.const})){if(n)return!0;o=r.map(function(t){return{name:t.title,value:t.const}})}if(!1!==e&&(o||[]).filter(function(t){return((t||{}).name||"").indexOf(": ")}).length>1){var i=o.map(function(t){var e=t.name.split(/: (.+)/),n=e[0],o=e[1];return n&&o?xo({},t,{group:n,name:o}):t});(!0===e||i.some(function(t,e){return e&&H(t,"group")&&t.group===i[e-1].group}))&&(o=i)}}return!n&&o}function ko(t){if(!x(t))return null;var e={};if(H(t,"type"))switch(t.type){case"string":R(["pattern","format","minLength","maxLength"],function(n){H(t,n)&&(e[n]=[t[n]])});break;case"number":case"integer":R(["Minimum","Maximum"],function(n){var o="exclusive"+n,r=n.toLowerCase();if(H(t,r)){var i=H(t,o)&&!0===t[o];e[r]=[t[r],i]}}),R(["multipleOf","type"],function(n){H(t,n)&&(e[n]=[t[n]])});break;case"object":R(["minProperties","maxProperties","dependencies"],function(n){H(t,n)&&(e[n]=[t[n]])});break;case"array":R(["minItems","maxItems","uniqueItems"],function(n){H(t,n)&&(e[n]=[t[n]])})}return H(t,"enum")&&(e.enum=[t.enum]),e}function Fo(t,e,n,o,r){if(x(t)){var i=new Set,s=new Set,a=new Map,u=new Map,l={};U.forEachDeep(t,function(t,e){if(H(t,"$ref")&&b(t.$ref)){var n=U.compile(t.$ref);i.add(n),s.add(e+"~~"+n),a.set(e,n)}}),i.forEach(function(e){return l[e]=Ao(t,e)});for(var c=!0;c;)c=!1,Array.from(a).forEach(function(t){var e=t[0],n=t[1];return Array.from(a).filter(function(t){var o=t[0],r=t[1];return U.isSubPointer(n,o,!0)&&!U.isSubPointer(r,n,!0)&&!s.has(e+o.slice(n.length)+"~~"+r)}).forEach(function(t){var o=t[0],r=t[1];s.add(e+o.slice(n.length)+"~~"+r),c=!0})});Array.from(s).map(function(t){return t.split("~~")}).filter(function(t){var e=t[0],n=t[1];return U.isSubPointer(n,e)}).forEach(function(t){var e=t[0],n=t[1];return u.set(e,n)}),Array.from(a).filter(function(t){var e=t[0];t[1];return Array.from(u.keys()).every(function(t){return!U.isSubPointer(e,t,!0)})}).forEach(function(t){var e=t[0],n=t[1];return Array.from(u).filter(function(t){var o=t[0];t[1];return!u.has(e+o.slice(n.length))&&U.isSubPointer(n,o,!0)&&!U.isSubPointer(n,e,!0)}).forEach(function(t){var o=t[0],r=t[1];return u.set(e+o.slice(n.length),e+r.slice(n.length))})});var p=xo({},t);return delete p.definitions,p=Ao(p,"",l,u),U.forEachDeep(p,function(t,i){if(b(t.$ref)){var s=U.compile(t.$ref);U.isSubPointer(s,i,!0)||(s=jo(i,u),U.set(p,i,{$ref:"#"+s})),H(e,"refPointer")||(e[s]=s.length?Ao(p,s,e,u):p),n.has(i)||n.set(i,s);var a=U.toDataPointer(i,p);if(!o.has(a)){var l=U.toDataPointer(s,p);o.set(a,l)}}if("array"===t.type&&(H(t,"items")||H(t,"additionalItems"))){var c=U.toDataPointer(i,p);if(!r.has(c)){var d=w(t.items)?t.items.length:0;r.set(c,d)}}},!0),p}console.error("resolveSchemaReferences error: schema must be an object.")}function Ao(t,e,n,r,i){if(void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=[]),!n||!r)return U.getCopy(t,e);"string"!=typeof e&&(e=U.compile(e)),i=i.concat([e]);var s=null;if(""===e)s=o.cloneDeep(t);else{var a=jo(e,r);a!==e&&(i=i.concat([a])),s=U.getFirstCopy([[n,[a]],[t,e],[t,a]])}return U.forEachDeepCopy(s,function(e,o){if(x(e)){if(b(e.$ref)){var s=U.compile(e.$ref);if(s.length&&i.every(function(t){return!U.isSubPointer(s,t,!0)})){var a=Ao(t,s,n,r,i);if(1===Object.keys(e).length)return a;var u=xo({},e);return delete u.$ref,_o(a,u)}}if(w(e.allOf))return To(e);if("array"===e.type&&w(e.required))return Eo(e)}return e},!0,e)}function To(t){if(!x(t)||!w(t.allOf))return t;var e=_o.apply(void 0,t.allOf);if(Object.keys(t).length>1){var n=xo({},t);delete n.allOf,e=_o(e,n)}return e}function Eo(t){if("array"===t.type&&w(t.required)){var e=H(t.items,"properties")?"items":H(t.additionalItems,"properties")?"additionalItems":null;e&&!H(t[e],"required")&&(H(t[e],"additionalProperties")||t.required.every(function(n){return H(t[e].properties,n)}))&&((t=o.cloneDeep(t))[e].required=t.required,delete t.required)}return t}var Do=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};function Lo(t,e){void 0===e&&(e={});var n=e.draft||null,r=e.changed||!1;if("object"!=typeof t)return t;if("function"==typeof t.map)return t.map(function(t){return Lo(t,{changed:r,draft:n})}).slice();var i=Do({},t),s=["array","boolean","integer","null","number","object","string"];if("string"==typeof i.$schema&&/http\:\/\/json\-schema\.org\/draft\-0\d\/schema\#/.test(i.$schema)&&(n=i.$schema[30]),i.contentEncoding&&(i.media={binaryEncoding:i.contentEncoding},delete i.contentEncoding,r=!0),"object"==typeof i.extends&&(i.allOf="function"==typeof i.extends.map?i.extends.map(function(t){return Lo(t,{changed:r,draft:n})}):[Lo(i.extends,{changed:r,draft:n})],delete i.extends,r=!0),i.disallow&&("string"==typeof i.disallow?i.not={type:i.disallow}:"function"==typeof i.disallow.map&&(i.not={anyOf:i.disallow.map(function(t){return"object"==typeof t?t:{type:t}})}),delete i.disallow,r=!0),"object"==typeof i.dependencies&&Object.keys(i.dependencies).some(function(t){return"string"==typeof i.dependencies[t]})&&(i.dependencies=Do({},i.dependencies),Object.keys(i.dependencies).filter(function(t){return"string"==typeof i.dependencies[t]}).forEach(function(t){return i.dependencies[t]=[i.dependencies[t]]}),r=!0),"number"==typeof i.maxDecimal&&(i.multipleOf=1/Math.pow(10,i.maxDecimal),delete i.divisibleBy,r=!0,n&&2!==n||(n=1)),"number"==typeof i.divisibleBy&&(i.multipleOf=i.divisibleBy,delete i.divisibleBy,r=!0),"number"==typeof i.minimum&&!1===i.minimumCanEqual?(i.exclusiveMinimum=i.minimum,delete i.minimum,r=!0,n||(n=2)):"boolean"==typeof i.minimumCanEqual&&(delete i.minimumCanEqual,r=!0,n||(n=2)),"number"==typeof i.minimum&&!0===i.exclusiveMinimum?(i.exclusiveMinimum=i.minimum,delete i.minimum,r=!0):"boolean"==typeof i.exclusiveMinimum&&(delete i.exclusiveMinimum,r=!0),"number"==typeof i.maximum&&!1===i.maximumCanEqual?(i.exclusiveMaximum=i.maximum,delete i.maximum,r=!0,n||(n=2)):"boolean"==typeof i.maximumCanEqual&&(delete i.maximumCanEqual,r=!0,n||(n=2)),"number"==typeof i.maximum&&!0===i.exclusiveMaximum?(i.exclusiveMaximum=i.maximum,delete i.maximum,r=!0):"boolean"==typeof i.exclusiveMaximum&&(delete i.exclusiveMaximum,r=!0),"object"==typeof i.properties){var a=Do({},i.properties),u=Array.isArray(i.required)?new Set(i.required):new Set;if((1===n||2===n||Object.keys(a).some(function(t){return!0===a[t].optional}))&&(Object.keys(a).filter(function(t){return!0!==a[t].optional}).forEach(function(t){return u.add(t)}),r=!0,n||(n=2)),Object.keys(a).some(function(t){return!0===a[t].required})&&(Object.keys(a).filter(function(t){return!0===a[t].required}).forEach(function(t){return u.add(t)}),r=!0),u.size&&(i.required=Array.from(u)),Object.keys(a).some(function(t){return a[t].requires})){var l="object"==typeof i.dependencies?Do({},i.dependencies):{};Object.keys(a).filter(function(t){return a[t].requires}).forEach(function(t){return l[t]="string"==typeof a[t].requires?[a[t].requires]:a[t].requires}),i.dependencies=l,r=!0,n||(n=2)}i.properties=a}if("boolean"==typeof i.optional&&(delete i.optional,r=!0,n||(n=2)),i.requires&&delete i.requires,"boolean"==typeof i.required&&delete i.required,"string"!=typeof i.id||i.$id||("#"===i.id.slice(-1)&&(i.id=i.id.slice(0,-1)),i.$id=i.id+"-CONVERTED-TO-DRAFT-06#",delete i.id,r=!0),!i.type||("function"==typeof i.type.every?i.type.every(function(t){return s.includes(t)}):s.includes(i.type))||(r=!0),"string"==typeof i.$schema&&/http\:\/\/json\-schema\.org\/draft\-0[1-4]\/schema\#/.test(i.$schema))i.$schema="http://json-schema.org/draft-06/schema#",r=!0;else if(r&&"string"==typeof i.$schema){var c="Converted to draft 6 from "+i.$schema;"string"==typeof i.description&&i.description.length?i.description+="\n"+c:i.description=c,delete i.$schema}if(i.type&&("function"==typeof i.type.every?!i.type.every(function(t){return s.includes(t)}):!s.includes(i.type)))if(1===i.type.length&&(i.type=i.type[0]),"string"==typeof i.type)"any"===i.type?i.type=s:delete i.type;else if("object"==typeof i.type){if("function"==typeof i.type.every)if(i.type.every(function(t){return"string"==typeof t}))i.type=i.type.some(function(t){return"any"===t})?i.type=s:i.type.filter(function(t){return s.includes(t)});else if(i.type.length>1){for(var p=["additionalItems","items","maxItems","minItems","uniqueItems","contains"],d=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"],f=["maxProperties","minProperties","required","additionalProperties","properties","patternProperties","dependencies","propertyNames"],h=["maxLength","minLength","pattern","format"],m={array:d.concat(f,h),integer:p.concat(f,h),number:p.concat(f,h),object:p.concat(d,h),string:p.concat(d,f),all:p.concat(d,f,h)},y=[],b=function(t){var e="string"==typeof t?{type:t}:Do({},t);Object.keys(i).filter(function(t){return!e.hasOwnProperty(t)&&!(m[e.type]||m.all).concat(["type","default"]).includes(t)}).forEach(function(t){return e[t]=i[t]}),y.push(e)},v=0,g=i.type;v<g.length;v++){b(g[v])}i=i.hasOwnProperty("default")?{anyOf:y,default:i.default}:{anyOf:y}}else{var _=i.type;delete i.type,Object.assign(i,_)}}else delete i.type;return Object.keys(i).filter(function(t){return"object"==typeof i[t]}).forEach(function(t){if(["definitions","dependencies","properties","patternProperties"].includes(t)&&"function"!=typeof i[t].map){var e={};Object.keys(i[t]).forEach(function(o){return e[o]=Lo(i[t][o],{changed:r,draft:n})}),i[t]=e}else["items","additionalItems","additionalProperties","allOf","anyOf","oneOf","not"].includes(t)?i[t]=Lo(i[t],{changed:r,draft:n}):i[t]=o.cloneDeep(i[t])}),i}Object.assign;function Vo(t,e,n,r,i,s){void 0===e&&(e=null),void 0===n&&(n=!0),void 0===r&&(r=""),void 0===i&&(i=""),void 0===s&&(s="");var a=U.get(t.schema,r);n?!h(e)&&(!0===t.formOptions.setSchemaDefaults||"auto"===t.formOptions.setSchemaDefaults&&y(t.formValues))&&(e=U.get(t.schema,r+"/default")):e=null;var u=U.get(a,"/type"),l=(H(a,"properties")||H(a,"additionalProperties"))&&"object"===u?"FormGroup":(H(a,"items")||H(a,"additionalItems"))&&"array"===u?"FormArray":!u&&H(a,"$ref")?"$ref":"FormControl",c=jo(i,t.dataRecursiveRefMap,t.arrayMap);t.dataMap.has(c)||t.dataMap.set(c,new Map);var p,d=t.dataMap.get(c);d.has("schemaType")||(d.set("schemaPointer",r),d.set("schemaType",a.type),a.format&&(d.set("schemaFormat",a.format),a.type||d.set("schemaType","string")),l&&(d.set("templatePointer",s),d.set("templateType",l)));var f=ko(a);switch(l){case"FormGroup":if(p={},H(a,"ui:order")||H(a,"properties")){var m=a["ui:order"]||Object.keys(a.properties);if(m.includes("*")&&!H(a.properties,"*"))for(var b=Object.keys(a.properties).filter(function(t){return!m.includes(t)}),v=m.length-1;v>=0;v--)"*"===m[v]&&m.splice.apply(m,[v,1].concat(b));m.filter(function(t){return H(a.properties,t)||H(a,"additionalProperties")}).forEach(function(o){return p[o]=Vo(t,U.get(e,[o]),n,r+(H(a.properties,o)?"/properties/"+o:"/additionalProperties"),i+"/"+o,s+"/controls/"+o)}),t.formOptions.fieldsRequired=qo(a,p)}return{controlType:l,controls:p,validators:f};case"FormArray":p=[];var g=Math.max(a.minItems||0,d.get("minItems")||0),_=Math.min(a.maxItems||1e3,d.get("maxItems")||1e3),O=null;if(w(a.items)){var I=d.get("tupleItems")||(w(a.items)?Math.min(a.items.length,_):0);for(v=0;v<I;v++)if(v<g)p.push(Vo(t,w(e)?e[v]:e,n,r+"/items/"+v,i+"/"+v,s+"/controls/"+v));else{var j=jo(r+"/items/"+v,t.schemaRecursiveRefMap),C=(S=jo(c+"/"+v,t.dataRecursiveRefMap,t.arrayMap))!==c+"/"+v;H(t.templateRefLibrary,S)||(t.templateRefLibrary[S]=null,t.templateRefLibrary[S]=Vo(t,null,n,j,S,s+"/controls/"+v)),p.push(w(e)?Vo(t,e[v],n,r+"/items/"+v,i+"/"+v,s+"/controls/"+v):C?null:o.cloneDeep(t.templateRefLibrary[S]))}a.items.length<_&&x(a.additionalItems)&&(O=r+"/additionalItems")}else O=r+"/items";if(O){var S;j=jo(O,t.schemaRecursiveRefMap),C=(S=jo(c+"/-",t.dataRecursiveRefMap,t.arrayMap))!==c+"/-";H(t.templateRefLibrary,S)||(t.templateRefLibrary[S]=null,t.templateRefLibrary[S]=Vo(t,null,n,j,S,s+"/controls/-"));var M=d;if(!C||H(f,"required")){var N=Math.min(Math.max(C?0:M.get("tupleItems")+M.get("listItems")||0,w(e)?e.length:0),_);for(v=p.length;v<N;v++)p.push(w(e)?Vo(t,e[v],n,j,i+"/-",s+"/controls/-"):C?null:o.cloneDeep(t.templateRefLibrary[S]))}}return{controlType:l,controls:p,validators:f};case"$ref":var k=U.compile(a.$ref),F=jo(U.toDataPointer(k,a),t.dataRecursiveRefMap,t.arrayMap);if(F&&!H(t.templateRefLibrary,F)){t.templateRefLibrary[F]=null;var A=Vo(t,n,n,k);A?t.templateRefLibrary[F]=A:delete t.templateRefLibrary[F]}return null;case"FormControl":return{controlType:l,value:{value:n&&P(e)?e:null,disabled:d.get("disabled")||!1},validators:f};default:return null}}function Ro(t){var e=[],n=null;if(H(t,"validators")&&(R(t.validators,function(t,n){"function"==typeof vo[n]&&e.push(vo[n].apply(null,t))}),e.length&&T(t.controlType,["FormGroup","FormArray"])&&(n=e.length>1?vo.compose(e):e[0])),H(t,"controlType"))switch(t.controlType){case"FormGroup":var i={};return R(t.controls,function(t,e){var n=Ro(t);n&&(i[e]=n)}),new r.FormGroup(i,n);case"FormArray":return new r.FormArray(o.filter(o.map(t.controls,function(t){return Ro(t)})),n);case"FormControl":return new r.FormControl(t.value,e)}return null}function qo(t,e){var n=!1;if(H(t,"required")&&!y(t.required)){n=!0;var o=w(t.required)?t.required:[t.required];o=R(o,function(t){return U.set(e,"/"+t+"/validators/required",[])})}return n}function Ho(t,e,n,o,r,i){if(void 0===r&&(r=!1),void 0===i&&(i=!1),null===t||"object"!=typeof t)return t;var s=w(t)?[]:{};return U.forEachDeep(t,function(t,a){if(r&&w(t))U.set(s,a,[]);else if(r&&x(t)&&!O(t))U.set(s,a,{});else{var u=U.has(e,[a,"schemaType"])?a:jo(a,n,o);if(U.has(e,[u,"schemaType"])){var l=e.get(u).get("schemaType");if("null"===l)U.set(s,a,null);else if((m(t)||r)&&T(l,["string","integer","number","boolean"])){var c=i||null===t&&r?N(t,l):M(t,l);(h(c)||r)&&U.set(s,a,c)}else"object"!==l||r||(e.get(u).get("required")||[]).forEach(function(t){var n=e.get(u+"/"+t).get("schemaType");"array"===n?U.set(s,a+"/"+t,[]):"object"===n&&U.set(s,a+"/"+t,{})});"date-time"===e.get(u).get("schemaFormat")&&(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d:[0-5]\d(?:\.\d+)?$/i.test(t)?U.set(s,a,t+"Z"):/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s][0-2]\d:[0-5]\d$/i.test(t)?U.set(s,a,t+":00Z"):i&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)&&U.set(s,a,t+":00:00:00Z"))}else("object"!=typeof t||O(t)||null===t&&r)&&(console.error("formatFormData error: Schema type not found for form value at "+u),console.error("dataMap",e),console.error("recursiveRefMap",n),console.error("genericPointer",u))}}),s}function zo(t,e,n){if(void 0===n&&(n=!1),!x(t)||!U.isJsonPointer(e)){if(!U.isJsonPointer(e)){if("string"==typeof e)if(o=t.get(e))return o;console.error("getControl error: Invalid JSON Pointer: "+e)}return x(t)||console.error("getControl error: Invalid formGroup: "+t),null}var o,r=U.parse(e);if((n&&(r=r.slice(0,-1)),"function"==typeof t.get&&r.every(function(t){return-1===t.indexOf(".")}))&&(o=t.get(r.join("."))))return o;for(var i=t,s=0,a=r;s<a.length;s++){var u=a[s];if(H(i,"controls")&&(i=i.controls),w(i)&&"-"===u)i=i[i.length-1];else{if(!H(i,u))return console.error('getControl error: Unable to find "'+u+'" item in FormGroup.'),console.error(e),void console.error(t);i=i[u]}}return i}var Wo=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t};function $o(t,e){var n=!U.get(t,"/formOptions/addSubmit"),r=Jo(t.layout,function(r,i,s){var a={_id:o.uniqueId(),options:{}};if(x(r))Object.assign(a,r),Object.keys(a).filter(function(t){return!T(t,["_id","$ref","arrayItem","arrayItemType","dataPointer","dataType","items","key","name","options","recursiveReference","type","widget"])}).forEach(function(t){a.options[t]=a[t],delete a[t]}),!H(a,"type")&&b(a.widget)&&(a.type=a.widget,delete a.widget),H(a.options,"title")||H(a.options,"legend")&&(a.options.title=a.options.legend,delete a.options.legend),H(a.options,"validationMessages")||(H(a.options,"errorMessages")?(a.options.validationMessages=a.options.errorMessages,delete a.options.errorMessages):H(a.options,"validationMessage")&&("string"==typeof a.options.validationMessage?a.options.validationMessages=a.options.validationMessage:(a.options.validationMessages={},Object.keys(a.options.validationMessage).forEach(function(t){var e=t+"",n="0"===e?"type":"1"===e?"enum":"100"===e?"multipleOf":"101"===e?"minimum":"102"===e?"exclusiveMinimum":"103"===e?"maximum":"104"===e?"exclusiveMaximum":"200"===e?"minLength":"201"===e?"maxLength":"202"===e?"pattern":"300"===e?"minProperties":"301"===e?"maxProperties":"302"===e?"required":"304"===e?"dependencies":"400"===e?"minItems":"401"===e?"maxItems":"402"===e?"uniqueItems":"500"===e?"format":e+"";a.options.validationMessages[n]=a.options.validationMessage[t]})),delete a.options.validationMessage));else if(U.isJsonPointer(r))a.dataPointer=r;else{if(!b(r))return console.error("buildLayout error: Form layout element not recognized:"),console.error(r),null;a.key=r}var u=null;if(!H(a,"dataPointer"))if(H(a,"key"))a.dataPointer="*"===a.key?a.key:U.compile(U.parseObjectPath(a.key),"-"),delete a.key;else if(H(a,"type")&&"array"===a.type.slice(-5)){var l=function(t){if(null!==t&&"object"==typeof t){if(H(t,"dataPointer"))return t.dataPointer;if(w(t.items))for(var e=0,n=t.items;e<n.length;e++){var o=n[e];if(H(o,"dataPointer")&&-1!==o.dataPointer.indexOf("/-"))return o.dataPointer;if(H(o,"items")){var r=l(o);if(r)return r}}}},c=l(a);c&&(a.dataPointer=c.slice(0,c.lastIndexOf("/-")))}if(H(a,"dataPointer")){if("*"===a.dataPointer)return Bo(t,e,t.formValues);var p=U.get(t.formValues,a.dataPointer.replace(/\/-/g,"/1"));a.dataPointer=U.toGenericPointer(a.dataPointer,t.arrayMap);var d=U.toKey(a.dataPointer);!a.name&&b(d)&&"-"!==d&&(a.name=d);var f=jo(a.dataPointer,t.dataRecursiveRefMap,t.arrayMap),h=!f.length||f!==a.dataPointer,m=void 0;t.dataMap.has(f)||t.dataMap.set(f,new Map);var v=t.dataMap.get(f);if(v.has("schemaPointer")?m=v.get("schemaPointer"):(m=U.toSchemaPointer(f,t.schema),v.set("schemaPointer",m)),v.set("disabled",!!a.options.disabled),u=U.get(t.schema,m)){if(H(a,"type"))if(e.hasWidget(a.type))a.type=So(a.type,u,a);else{var g=a.type;a.type=Co(u,a),console.error('error: widget type "'+g+'" not found in library. Replacing with "'+a.type+'".')}else a.type=Co(u,a);"object"===u.type&&w(u.required)&&v.set("required",u.required),a.dataType=u.type||(H(u,"$ref")?"$ref":null),Mo(a,u,t),"checkboxes"===a.type&&H(u,"items")?Mo(a,u.items,t):"array"===a.dataType&&(a.options.maxItems=Math.min(u.maxItems||1e3,a.options.maxItems||1e3),a.options.minItems=Math.max(u.minItems||0,a.options.minItems||0),a.options.listItems=Math.max(a.options.listItems||0,w(p)?p.length:0),a.options.tupleItems=w(u.items)?u.items.length:0,a.options.maxItems<a.options.tupleItems?(a.options.tupleItems=a.options.maxItems,a.options.listItems=0):a.options.maxItems<a.options.tupleItems+a.options.listItems?a.options.listItems=a.options.maxItems-a.options.tupleItems:a.options.minItems>a.options.tupleItems+a.options.listItems&&(a.options.listItems=a.options.minItems-a.options.tupleItems),v.has("maxItems")||(v.set("maxItems",a.options.maxItems),v.set("minItems",a.options.minItems),v.set("tupleItems",a.options.tupleItems),v.set("listItems",a.options.listItems)),t.arrayMap.has(f)||t.arrayMap.set(f,a.options.tupleItems)),Po(t.schema,m)&&(a.options.required=!0,t.fieldsRequired=!0)}else Mo(a,{},t);if(a.options.title||/^\d+$/.test(a.name)||(a.options.title=B(a.name)),H(a.options,"copyValueTo")&&("string"==typeof a.options.copyValueTo&&(a.options.copyValueTo=[a.options.copyValueTo]),w(a.options.copyValueTo)&&(a.options.copyValueTo=a.options.copyValueTo.map(function(t){return U.compile(U.parseObjectPath(t),"-")}))),a.widget=e.getWidget(a.type),v.set("inputType",a.type),v.set("widget",a.widget),"array"===a.dataType&&(H(a,"items")||H(a,"additionalItems"))){var _=jo(a.dataPointer+"/-",t.dataRecursiveRefMap,t.arrayMap);if(t.dataMap.has(_)||t.dataMap.set(_,new Map),t.dataMap.get(_).set("inputType","section"),a.items.length>1){for(var O=[],I=a.items.length-1;I>=0;I--){var j=a.items[I];if(H(j,"dataPointer")&&j.dataPointer.slice(0,_.length)===_){var C=a.items.splice(I,1)[0];C.dataPointer=a.dataPointer+"/-"+C.dataPointer.slice(_.length),O.unshift(C)}else j.arrayItem=!0,j.arrayItemType="list",j.removable=!1!==a.options.removable}O.length&&a.items.push({_id:o.uniqueId(),arrayItem:!0,arrayItemType:a.options.tupleItems>a.items.length?"tuple":"list",items:O,options:{removable:!1!==a.options.removable},dataPointer:a.dataPointer+"/-",type:"section",widget:e.getWidget("section")})}else a.items[0].arrayItem=!0,a.items[0].dataPointer||(a.items[0].dataPointer=U.toGenericPointer(_,t.arrayMap)),U.has(a,"/items/0/options/removable")||(a.items[0].options.removable=!0),!1===a.options.orderable&&(a.items[0].options.orderable=!1),a.items[0].arrayItemType=a.options.tupleItems?"tuple":"list";if(w(a.items)){var S=a.items.filter(function(t){return"$ref"!==t.type}).length-a.options.tupleItems;S>a.options.listItems&&(a.options.listItems=S,v.set("listItems",S))}if(H(t.layoutRefLibrary,_)||(t.layoutRefLibrary[_]=o.cloneDeep(a.items[a.items.length-1]),h&&(t.layoutRefLibrary[_].recursiveReference=!0),R(t.layoutRefLibrary[_],function(t,e){H(t,"_id")&&(t._id=null),h&&H(t,"dataPointer")&&(t.dataPointer=t.dataPointer.slice(_.length))},"top-down")),!a.recursiveReference||a.options.required){var P=Math.min(Math.max(a.options.tupleItems+a.options.listItems,w(p)?p.length:0),a.options.maxItems);for(I=a.items.length;I<P;I++)a.items.push(Go({$ref:_,dataPointer:a.dataPointer,recursiveReference:a.recursiveReference},t,e))}if(!1!==a.options.addable&&a.options.minItems<a.options.maxItems&&"$ref"!==(a.items[a.items.length-1]||{}).type){var M="Add";if(a.options.title)/^add\b/i.test(a.options.title)?M=a.options.title:M+=" "+a.options.title;else if(a.name&&!/^\d+$/.test(a.name))/^add\b/i.test(a.name)?M+=" "+B(a.name):M=B(a.name);else{var N=Io(t.schema,a.dataPointer,"parentSchema");if(H(N,"title"))M+=" to "+N.title;else{var k=U.parse(a.dataPointer);M+=" to "+B(k[k.length-2])}}a.items.push({_id:o.uniqueId(),arrayItem:!0,arrayItemType:"list",dataPointer:a.dataPointer+"/-",options:{listItems:a.options.listItems,maxItems:a.options.maxItems,minItems:a.options.minItems,removable:!1,title:M,tupleItems:a.options.tupleItems},recursiveReference:h,type:"$ref",widget:e.getWidget("$ref"),$ref:_}),b(U.get(a,"/style/add"))&&(a.items[a.items.length-1].options.fieldStyle=a.style.add,delete a.style.add,y(a.style)&&delete a.style)}}else a.arrayItem=!1}else if(H(a,"type")||H(a,"items")){var F=U.get(t.layout,s,0,-2).type;H(a,"type")||(a.type=T(F,["tabs","tabarray"])?"tab":"array"),a.arrayItem="array"===F,a.widget=e.getWidget(a.type),Mo(a,{},t)}return"submit"===a.type&&(n=!0),a});if(t.hasRootReference){var i=o.cloneDeep(r);"submit"===i[i.length-1].type&&i.pop(),t.layoutRefLibrary[""]={_id:null,dataPointer:"",dataType:"object",items:i,name:"",options:o.cloneDeep(t.formOptions.defautWidgetOptions),recursiveReference:!0,required:!1,type:"section",widget:e.getWidget("section")}}return n||r.push({_id:o.uniqueId(),options:{title:"Submit"},type:"submit",widget:e.getWidget("submit")}),r}function Bo(t,e,n,r,i,s,a,u,l,c){void 0===n&&(n=null),void 0===r&&(r=""),void 0===i&&(i=""),void 0===s&&(s=!1),void 0===a&&(a=null),void 0===u&&(u=null),void 0===l&&(l=!1),void 0===c&&(c="");var p=U.get(t.schema,r);if(!H(p,"type")&&!H(p,"$ref")&&!H(p,"x-schema-form"))return null;var d=Co(p);!h(n)&&(!0===t.formOptions.setSchemaDefaults||"auto"===t.formOptions.setSchemaDefaults&&y(t.formValues))&&(n=U.get(t.schema,r+"/default"));var f={_id:l?null:o.uniqueId(),arrayItem:s,dataPointer:U.toGenericPointer(i,t.arrayMap),dataType:p.type||(H(p,"$ref")?"$ref":null),options:{},required:Po(t.schema,r),type:d,widget:e.getWidget(d)},m=U.toKey(f.dataPointer);"-"!==m&&(f.name=m),f.arrayItem&&(f.arrayItemType=a,f.options.removable=!1!==u);var b=jo(c+i,t.dataRecursiveRefMap,t.arrayMap);b.length;t.dataMap.has(b)||t.dataMap.set(b,new Map);var g=t.dataMap.get(b);if(g.has("inputType")||(g.set("schemaPointer",r),g.set("inputType",f.type),g.set("widget",f.widget),g.set("disabled",!!f.options.disabled)),Mo(f,p,t),f.options.title||!f.name||/^\d+$/.test(f.name)||(f.options.title=B(f.name)),"object"===f.dataType){if(w(p.required)&&!g.has("required")&&g.set("required",p.required),x(p.properties)){var _=[],O=p["ui:order"]||Object.keys(p.properties);if(O.includes("*")&&!H(p.properties,"*"))for(var I=Object.keys(p.properties).filter(function(t){return!O.includes(t)}),j=O.length-1;j>=0;j--)"*"===O[j]&&O.splice.apply(O,[j,1].concat(I));O.filter(function(t){return H(p.properties,t)||H(p,"additionalProperties")}).forEach(function(o){var s=H(p.properties,o)?"/properties/"+o:"/additionalProperties",a=Bo(t,e,x(n)?n[o]:null,r+s,i+"/"+o,!1,null,null,l,c);a&&(Po(p,"/"+o)&&(a.options.required=!0,t.fieldsRequired=!0),_.push(a))}),""!==i||l?f.items=_:f=_}}else if("array"===f.dataType){f.items=[],f.options.maxItems=Math.min(p.maxItems||1e3,f.options.maxItems||1e3),f.options.minItems=Math.max(p.minItems||0,f.options.minItems||0),!f.options.minItems&&Po(t.schema,r)&&(f.options.minItems=1),H(f.options,"listItems")||(f.options.listItems=1),f.options.tupleItems=w(p.items)?p.items.length:0,f.options.maxItems<=f.options.tupleItems?(f.options.tupleItems=f.options.maxItems,f.options.listItems=0):f.options.maxItems<f.options.tupleItems+f.options.listItems?f.options.listItems=f.options.maxItems-f.options.tupleItems:f.options.minItems>f.options.tupleItems+f.options.listItems&&(f.options.listItems=f.options.minItems-f.options.tupleItems),g.has("maxItems")||(g.set("maxItems",f.options.maxItems),g.set("minItems",f.options.minItems),g.set("tupleItems",f.options.tupleItems),g.set("listItems",f.options.listItems)),t.arrayMap.has(b)||t.arrayMap.set(b,f.options.tupleItems),u=!1!==f.options.removable;var C=null;if(w(p.items)){f.items=[];for(j=0;j<f.options.tupleItems;j++){var S=void 0,P=!(M=jo(b+"/"+j,t.dataRecursiveRefMap,t.arrayMap)).length||M!==b+"/"+j;u&&j>=f.options.minItems?(H(t.layoutRefLibrary,M)||(t.layoutRefLibrary[M]=null,t.layoutRefLibrary[M]=Bo(t,e,w(n)?n[j]:null,r+"/items/"+j,P?"":i+"/"+j,!0,"tuple",!0,!0,P?i+"/"+j:""),P&&(t.layoutRefLibrary[M].recursiveReference=!0)),S=Go({$ref:M,dataPointer:i+"/"+j,recursiveReference:P},t,e,w(n)?n[j]:null)):S=Bo(t,e,w(n)?n[j]:null,r+"/items/"+j,i+"/"+j,!0,"tuple",!1,l,c),S&&f.items.push(S)}x(p.additionalItems)&&(C=r+"/additionalItems")}else x(p.items)&&(C=r+"/items");if(C){P=!(M=jo(b+"/-",t.dataRecursiveRefMap,t.arrayMap)).length||M!==b+"/-";var M,N=jo(C,t.schemaRecursiveRefMap,t.arrayMap);if(M.length&&!H(t.layoutRefLibrary,M)&&(t.layoutRefLibrary[M]=null,t.layoutRefLibrary[M]=Bo(t,e,null,N,P?"":i+"/-",!0,"list",u,!0,P?i+"/-":""),P&&(t.layoutRefLibrary[M].recursiveReference=!0)),!P||f.options.required){var k=Math.min(Math.max(P?0:f.options.tupleItems+f.options.listItems,w(n)?n.length:0),f.options.maxItems);if(f.items.length<k)for(j=f.items.length;j<k;j++)f.items.push(Go({$ref:M,dataPointer:i+"/-",recursiveReference:P},t,e,w(n)?n[j]:null))}if(!1!==f.options.addable&&f.options.minItems<f.options.maxItems&&"$ref"!==(f.items[f.items.length-1]||{}).type){var F=(E=((t.layoutRefLibrary[M]||{}).options||{}).title)?"Add ":"Add to ";E||(E=p.title||B(U.toKey(i))),/^add\b/i.test(E)||(E=F+E),f.items.push({_id:o.uniqueId(),arrayItem:!0,arrayItemType:"list",dataPointer:f.dataPointer+"/-",options:{listItems:f.options.listItems,maxItems:f.options.maxItems,minItems:f.options.minItems,removable:!1,title:E,tupleItems:f.options.tupleItems},recursiveReference:P,type:"$ref",widget:e.getWidget("$ref"),$ref:M})}}}else if("$ref"===f.dataType){var A=U.compile(p.$ref),T=U.toDataPointer(A,t.schema),E="";if(f.options.add)E=f.options.add;else if(f.name&&!/^\d+$/.test(f.name))E=(/^add\b/i.test(f.name)?"":"Add ")+B(f.name);else{var D=U.get(t.schema,r,0,-1);if(H(D,"title"))E="Add to "+D.title;else{var L=U.parse(f.dataPointer);E="Add to "+B(L[L.length-2])}}if(Object.assign(f,{recursiveReference:!0,widget:e.getWidget("$ref"),$ref:T}),Object.assign(f.options,{removable:!1,title:E}),v(U.get(t.schema,r,0,-1).maxItems)&&(f.options.maxItems=U.get(t.schema,r,0,-1).maxItems),T.length)if(H(t.layoutRefLibrary,T))t.layoutRefLibrary[T].recursiveReference||(t.layoutRefLibrary[T].recursiveReference=!0);else{t.layoutRefLibrary[T]=null;var V=Bo(t,e,null,A,"",f.arrayItem,f.arrayItemType,!0,!0,i);V?(V.recursiveReference=!0,t.layoutRefLibrary[T]=V):delete t.layoutRefLibrary[T]}}return f}function Jo(t,e,n,o){void 0===n&&(n=""),void 0===o&&(o=t);var r=0,i=[];return R(t,function(t,s){var a=+s+r,u=n+"/"+a,l=V(t),c=[];x(t)&&(H(t,"tabs")&&(t.items=t.tabs,delete t.tabs),H(t,"items")&&(c=w(t.items)?t.items:[t.items])),c.length&&(l.items=Jo(c,e,u+"/items",o)),h(l=e(l,a,u,o))?(w(l)&&(r+=l.length-1),i=i.concat(l)):r--}),i}function Go(t,e,n,r){if(void 0===n&&(n=null),void 0===r&&(r=null),t.recursiveReference&&n)return(i=o.cloneDeep(t)).options||(i.options={}),Object.assign(i,{recursiveReference:!0,widget:n.getWidget("$ref")}),Object.assign(i.options,{removable:!1,title:"Add "+i.$ref}),i;var i=e.layoutRefLibrary[t.$ref];return h(r)?i=Bo(e,n,r,U.toSchemaPointer(t.$ref,e.schema),t.$ref,i.arrayItem,i.arrayItemType,i.options.removable,!1):(i=o.cloneDeep(i),U.forEachDeep(i,function(e,n){H(e,"_id")&&(e._id=o.uniqueId()),t.recursiveReference&&H(e,"dataPointer")&&(e.dataPointer=t.dataPointer+e.dataPointer)})),i}function Uo(t,e,n,o){void 0===n&&(n=!0),void 0===o&&(o=!0);var r=[],i=!1;if(t)if(w(t))if(e)for(var s=0,a=Object.keys(t);s<a.length;s++){if(x(t[_=a[s]])){var u=t[_].value;if(e.includes(u)){var l=t[_].name;r.push({name:l,value:u}),void 0!==u&&null!==u||(i=!0)}}else if(b(t[_])&&_<e.length){var c=t[_];u=e[_];r.push({name:c,value:u}),void 0!==u&&null!==u||(i=!0)}}else r=t,n||(i=!!r.filter(function(t){return void 0===t.value||null===t.value}).length);else if(e)for(var p=0,d=Object.keys(e);p<d.length;p++){if(H(t,u=e[_=d[p]])){var f=t[u];r.push({name:f,value:u}),void 0!==u&&null!==u||(i=!0)}}else for(var h=0,m=Object.keys(t);h<m.length;h++){var y=t[u=m[h]];r.push({name:y,value:u}),void 0!==u&&null!==u||(i=!0)}else if(e)for(var v=0,g=Object.keys(e);v<g.length;v++){var _,O=e[_=g[v]];u=e[_];r.push({name:O,value:u}),void 0!==u&&null!==u||(i=!0)}else r=[{name:"True",value:!0},{name:"False",value:!1}];return r.some(function(t){return H(t,"group")})&&(i=!1,r=o?r.reduce(function(t,e){return H(e,"group")?(w(e.items)&&(t=t.concat(e.items.map(function(t){return Wo({},t,{name:e.group+": "+t.name})})),e.items.some(function(t){return void 0===t.value||null===t.value})&&(i=!0)),H(e,"name")&&H(e,"value")&&(e.name=e.group+": "+e.name,delete e.group,t.push(e),void 0!==e.value&&null!==e.value||(i=!0))):(t.push(e),void 0!==e.value&&null!==e.value||(i=!0)),t},[]):r.reduce(function(t,e){return H(e,"group")?(e.group!==(t[t.length-1]||{}).group&&t.push({group:e.group,items:e.items||[]}),H(e,"name")&&H(e,"value")&&(t[t.length-1].items.push({name:e.name,value:e.value}),void 0!==e.value&&null!==e.value||(i=!0))):(t.push(e),void 0!==e.value&&null!==e.value||(i=!0)),t},[])),n||i||r.unshift({name:"<em>None</em>",value:null}),r}function Yo(t,e){void 0===e&&(e={});var n=e.dateFormat||"YYYY-MM-DD";if("string"==typeof t&&(t=Zo(t)),"[object Date]"!==Object.prototype.toString.call(t))return null;return n.replace(/YYYY/gi,t.getFullYear()+"").replace(/YY/gi,(t.getFullYear()+"").slice(-2)).replace(/MMMM/gi,["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]).replace(/MMM/gi,["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]).replace(/MM/gi,("0"+(t.getMonth()+1)).slice(-2)).replace(/M/gi,t.getMonth()+1+"").replace(/DDDD/gi,["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.getDay()]).replace(/DDD/gi,["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()]).replace(/DD/gi,("0"+t.getDate()).slice(-2)).replace(/D/gi,t.getDate()+"").replace(/S/gi,function(t){"number"==typeof t&&(t+="");var e=t.slice(-1);return"1"!==t.slice(-2,1)&&{1:"st",2:"nd",3:"rd"}[e]||"th"}(t.getDate()))}function Zo(t){var e=Ko(t);if(!e)return null;var n=[];/^\d+[^\d]\d+[^\d]\d+$/.test(e)?n=e.split(/[^\d]/).map(function(t){return+t}):/^\d{8}$/.test(e)&&(n=[+e.slice(0,4),+e.slice(4,6),+e.slice(6)]);var o=+((new Date).getFullYear()+"").slice(-2);if(n[0]>1e3&&n[0]<2100&&n[1]<=12&&n[2]<=31)return new Date(n[0],n[1]-1,n[2]);if(n[0]<=12&&n[1]<=31&&n[2]>1e3&&n[2]<2100)return new Date(n[2],n[0]-1,n[1]);if(n[0]<=12&&n[1]<=31&&n[2]<100){var r=(n[2]<=o?2e3:1900)+n[2];return new Date(r,n[0]-1,n[1])}if(n[0]<100&&n[1]<=12&&n[2]<=31){r=(n[0]<=o?2e3:1900)+n[0];return new Date(r,n[1]-1,n[2])}return null}function Ko(t){return t?(e=t.match(/(?:19|20)\d\d[-_\\\/\. ](?:0?\d|1[012])[-_\\\/\. ](?:[012]?\d|3[01])(?!\d)/))?e[0]:(e=t.match(/(?:[012]?\d|3[01])[-_\\\/\. ](?:0?\d|1[012])[-_\\\/\. ](?:19|20)\d\d(?!\d)/))?e[0]:(e=t.match(/^(?:[012]?\d|3[01])[-_\\\/\. ](?:0?\d|1[012])[-_\\\/\. ]\d\d(?!\d)/))?e[0]:(e=t.match(/^\d\d[-_\\\/\. ](?:[012]?\d|3[01])[-_\\\/\. ](?:0?\d|1[012])(?!\d)/))?e[0]:(e=t.match(/^(?:19|20)\d\d(?:0\d|1[012])(?:[012]\d|3[01])/))?e[0]:void 0:null;var e}var Qo,Xo={required:"This field is required.",minLength:"Must be {{minimumLength}} characters or longer (current length: {{currentLength}})",maxLength:"Must be {{maximumLength}} characters or shorter (current length: {{currentLength}})",pattern:"Must match pattern: {{requiredPattern}}",format:function(t){switch(t.requiredFormat){case"date":return'Must be a date, like "2000-12-31"';case"time":return'Must be a time, like "16:20" or "03:14:15.9265"';case"date-time":return'Must be a date-time, like "2000-03-14T01:59" or "2000-03-14T01:59:26.535Z"';case"email":return'Must be an email address, like "name@example.com"';case"hostname":return'Must be a hostname, like "example.com"';case"ipv4":return'Must be an IPv4 address, like "127.0.0.1"';case"ipv6":return'Must be an IPv6 address, like "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return'Must be a url, like "http://www.example.com/page.html"';case"uuid":return'Must be a uuid, like "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return'Must be a color, like "#FFFFFF" or "rgb(255, 255, 255)"';case"json-pointer":return'Must be a JSON Pointer, like "/pointer/to/something"';case"relative-json-pointer":return'Must be a relative JSON Pointer, like "2/pointer/to/something"';case"regex":return'Must be a regular expression, like "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return"Must be a correctly formatted "+t.requiredFormat}},minimum:"Must be {{minimumValue}} or more",exclusiveMinimum:"Must be more than {{exclusiveMinimumValue}}",maximum:"Must be {{maximumValue}} or less",exclusiveMaximum:"Must be less than {{exclusiveMaximumValue}}",multipleOf:function(t){return 1/t.multipleOfValue%10==0?"Must have "+Math.log10(1/t.multipleOfValue)+" or fewer decimal places.":"Must be a multiple of "+t.multipleOfValue+"."},minProperties:"Must have {{minimumProperties}} or more items (current items: {{currentProperties}})",maxProperties:"Must have {{maximumProperties}} or fewer items (current items: {{currentProperties}})",minItems:"Must have {{minimumItems}} or more items (current items: {{currentItems}})",maxItems:"Must have {{maximumItems}} or fewer items (current items: {{currentItems}})",uniqueItems:"All items must be unique"},tr={required:"Est obligatoire.",minLength:"Doit avoir minimum {{minimumLength}} caractères (actuellement: {{currentLength}})",maxLength:"Doit avoir maximum {{maximumLength}} caractères (actuellement: {{currentLength}})",pattern:"Doit respecter: {{requiredPattern}}",format:function(t){switch(t.requiredFormat){case"date":return'Doit être une date, tel que "2000-12-31"';case"time":return'Doit être une heure, tel que "16:20" ou "03:14:15.9265"';case"date-time":return'Doit être une date et une heure, tel que "2000-03-14T01:59" ou "2000-03-14T01:59:26.535Z"';case"email":return'Doit être une adresse e-mail, tel que "name@example.com"';case"hostname":return'Doit être un nom de domaine, tel que "example.com"';case"ipv4":return'Doit être une adresse IPv4, tel que "127.0.0.1"';case"ipv6":return'Doit être une adresse IPv6, tel que "1234:5678:9ABC:DEF0:1234:5678:9ABC:DEF0"';case"url":return'Doit être une URL, tel que "http://www.example.com/page.html"';case"uuid":return'Doit être un UUID, tel que "12345678-9ABC-DEF0-1234-56789ABCDEF0"';case"color":return'Doit être une couleur, tel que "#FFFFFF" or "rgb(255, 255, 255)"';case"json-pointer":return'Doit être un JSON Pointer, tel que "/pointer/to/something"';case"relative-json-pointer":return'Doit être un relative JSON Pointer, tel que "2/pointer/to/something"';case"regex":return'Doit être une expression régulière, tel que "(1-)?\\d{3}-\\d{3}-\\d{4}"';default:return"Doit être avoir le format correct: "+t.requiredFormat}},minimum:"Doit être supérieur à {{minimumValue}}",exclusiveMinimum:"Doit avoir minimum {{exclusiveMinimumValue}} charactères",maximum:"Doit être inférieur à {{maximumValue}}",exclusiveMaximum:"Doit avoir maximum {{exclusiveMaximumValue}} charactères",multipleOf:function(t){return 1/t.multipleOfValue%10==0?"Doit comporter "+Math.log10(1/t.multipleOfValue)+" ou moins de decimales.":"Doit être un multiple de "+t.multipleOfValue+"."},minProperties:"Doit comporter au minimum {{minimumProperties}} éléments",maxProperties:"Doit comporter au maximum {{maximumProperties}} éléments",minItems:"Doit comporter au minimum {{minimumItems}} éléments",maxItems:"Doit comporter au maximum {{minimumItems}} éléments",uniqueItems:"Tous les éléments doivent être uniques"},er=function(){function t(){this.JsonFormCompatibility=!1,this.ReactJsonSchemaFormCompatibility=!1,this.AngularSchemaFormCompatibility=!1,this.tpldata={},this.ajvOptions={allErrors:!0,jsonPointers:!0,unknownFormats:"ignore"},this.ajv=new i(this.ajvOptions),this.validateFormData=null,this.formValues={},this.data={},this.schema={},this.layout=[],this.formGroupTemplate={},this.formGroup=null,this.framework=null,this.validData=null,this.isValid=null,this.ajvErrors=null,this.validationErrors=null,this.dataErrors=new Map,this.formValueSubscription=null,this.dataChanges=new e.Subject,this.isValidChanges=new e.Subject,this.validationErrorChanges=new e.Subject,this.arrayMap=new Map,this.dataMap=new Map,this.dataRecursiveRefMap=new Map,this.schemaRecursiveRefMap=new Map,this.schemaRefLibrary={},this.layoutRefLibrary={"":null},this.templateRefLibrary={},this.hasRootReference=!1,this.language="en-US",this.defaultFormOptions={addSubmit:"auto",debug:!1,disableInvalidSubmit:!0,formDisabled:!1,formReadonly:!1,fieldsRequired:!1,framework:"no-framework",loadExternalAssets:!1,pristine:{errors:!0,success:!0},supressPropertyTitles:!1,setSchemaDefaults:"auto",setLayoutDefaults:"auto",validateOnRender:"auto",widgets:{},defautWidgetOptions:{listItems:1,addable:!0,orderable:!0,removable:!0,enableErrorState:!0,enableSuccessState:!0,feedback:!1,feedbackOnRender:!1,notitle:!1,disabled:!1,readonly:!1,returnEmptyFields:!0,validationMessages:{}}},this.setLanguage(this.language)}return t.prototype.setLanguage=function(t){void 0===t&&(t="en-US"),this.language=t;var e="fr"===t.slice(0,2)?tr:Xo;this.defaultFormOptions.defautWidgetOptions.validationMessages=o.cloneDeep(e)},t.prototype.getData=function(){return this.data},t.prototype.getSchema=function(){return this.schema},t.prototype.getLayout=function(){return this.layout},t.prototype.resetAllValues=function(){this.JsonFormCompatibility=!1,this.ReactJsonSchemaFormCompatibility=!1,this.AngularSchemaFormCompatibility=!1,this.tpldata={},this.validateFormData=null,this.formValues={},this.schema={},this.layout=[],this.formGroupTemplate={},this.formGroup=null,this.framework=null,this.data={},this.validData=null,this.isValid=null,this.validationErrors=null,this.arrayMap=new Map,this.dataMap=new Map,this.dataRecursiveRefMap=new Map,this.schemaRecursiveRefMap=new Map,this.layoutRefLibrary={},this.schemaRefLibrary={},this.templateRefLibrary={},this.formOptions=o.cloneDeep(this.defaultFormOptions)},t.prototype.buildRemoteError=function(t){var e=this;R(t,function(t,n){if(n in e.formGroup.controls)for(var o=0,r=t;o<r.length;o++){var i=r[o],s={};s[i.code]=i.message,e.formGroup.get(n).setErrors(s,{emitEvent:!0})}})},t.prototype.validateData=function(t,e){void 0===e&&(e=!0),this.data=Ho(t,this.dataMap,this.dataRecursiveRefMap,this.arrayMap,this.formOptions.returnEmptyFields),this.isValid=this.validateFormData(this.data),this.validData=this.isValid?this.data:null;var n,o;this.ajvErrors=this.validateFormData.errors,this.validationErrors=(n=this.validateFormData.errors,o={},(n||[]).forEach(function(t){o[t.dataPath]||(o[t.dataPath]=[]),o[t.dataPath].push(t.message)}),o),e&&(this.dataChanges.next(this.data),this.isValidChanges.next(this.isValid),this.validationErrorChanges.next(this.ajvErrors))},t.prototype.buildFormGroupTemplate=function(t,e){void 0===t&&(t=null),void 0===e&&(e=!0),this.formGroupTemplate=Vo(this,t,e)},t.prototype.buildFormGroup=function(){var t=this;this.formGroup=Ro(this.formGroupTemplate),this.formGroup&&(this.compileAjvSchema(),this.validateData(this.formGroup.value),this.formValueSubscription&&this.formValueSubscription.unsubscribe(),this.formValueSubscription=this.formGroup.valueChanges.subscribe(function(e){return t.validateData(e)}))},t.prototype.buildLayout=function(t){this.layout=$o(this,t)},t.prototype.setOptions=function(t){if(x(t)){var e=o.cloneDeep(t);x(e.defaultOptions)&&(Object.assign(this.formOptions.defautWidgetOptions,e.defaultOptions),delete e.defaultOptions),x(e.defautWidgetOptions)&&(Object.assign(this.formOptions.defautWidgetOptions,e.defautWidgetOptions),delete e.defautWidgetOptions),Object.assign(this.formOptions,e);var n=this.formOptions.defautWidgetOptions;["ErrorState","SuccessState"].filter(function(t){return H(n,"disable"+t)}).forEach(function(t){n["enable"+t]=!n["disable"+t],delete n["disable"+t]})}},t.prototype.compileAjvSchema=function(){this.validateFormData||(Array.isArray(this.schema.properties["ui:order"])&&(this.schema["ui:order"]=this.schema.properties["ui:order"],delete this.schema.properties["ui:order"]),this.ajv.removeSchema(this.schema),this.validateFormData=this.ajv.compile(this.schema))},t.prototype.buildSchemaFromData=function(t,e){if(void 0===e&&(e=!1),t)return Oo(t,e);this.schema=Oo(this.formValues,e)},t.prototype.buildSchemaFromLayout=function(t){t||(this.schema=void this.layout)},t.prototype.setTpldata=function(t){void 0===t&&(t={}),this.tpldata=t},t.prototype.parseText=function(t,e,n,o){var r=this;return void 0===t&&(t=""),void 0===e&&(e={}),void 0===n&&(n={}),void 0===o&&(o=null),t&&/{{.+?}}/.test(t)?t.replace(/{{(.+?)}}/g,function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return r.parseExpression(t[1],e,n,o,r.tpldata)}):t},t.prototype.parseExpression=function(t,e,n,o,r){var i=this;if(void 0===t&&(t=""),void 0===e&&(e={}),void 0===n&&(n={}),void 0===o&&(o=null),void 0===r&&(r=null),"string"!=typeof t)return"";var s="number"==typeof o?o+1+"":o||"";if(("'"===(t=t.trim())[0]||'"'===t[0])&&t[0]===t[t.length-1]&&-1===t.slice(1,t.length-1).indexOf(t[0]))return t.slice(1,t.length-1);if("idx"===t||"$index"===t)return s;if("value"===t&&!H(n,"value"))return e;if(['"',"'"," ","||","&&","+"].every(function(e){return-1===t.indexOf(e)})){var a=U.parseObjectPath(t);return"value"===a[0]&&U.has(e,a.slice(1))?U.get(e,a.slice(1)):"values"===a[0]&&U.has(n,a.slice(1))?U.get(n,a.slice(1)):"tpldata"===a[0]&&U.has(r,a.slice(1))?U.get(r,a.slice(1)):U.has(n,a)?U.get(n,a):""}return t.indexOf("[idx]")>-1&&(t=t.replace(/\[idx\]/g,s)),t.indexOf("[$index]")>-1&&(t=t.replace(/\[$index\]/g,s)),t.indexOf("||")>-1?t.split("||").reduce(function(t,s){return t||i.parseExpression(s,e,n,o,r)},""):t.indexOf("&&")>-1?t.split("&&").reduce(function(t,s){return t&&i.parseExpression(s,e,n,o,r)}," ").trim():t.indexOf("+")>-1?t.split("+").map(function(t){return i.parseExpression(t,e,n,o,r)}).join(""):""},t.prototype.setArrayItemTitle=function(t,e,n){void 0===t&&(t={}),void 0===e&&(e=null),void 0===n&&(n=null);var o=t.layoutNode,r=this.getFormControlValue(t),i="array"===(o.type||"").slice(-5)&&w(r),s=U.getFirst(i&&"$ref"!==e.type?[[e,"/options/legend"],[e,"/options/title"],[o,"/options/title"],[o,"/options/legend"]]:[[e,"/options/title"],[e,"/options/legend"],[o,"/options/title"],[o,"/options/legend"]]);if(!s)return s;var a=w(r)&&n<r.length?r[n]:r;return this.parseText(s,a,r,n)},t.prototype.setItemTitle=function(t){return!t.options.title&&/^(\d+|-)$/.test(t.layoutNode.name)?null:this.parseText(t.options.title||J(t.layoutNode.name),this.getFormControlValue(this),(this.getFormControlGroup(this)||{}).value,t.dataIndex[t.dataIndex.length-1])},t.prototype.evaluateCondition=function(t,e){var n=e&&e[e.length-1],o=!0;if(m((t.options||{}).condition))if("string"==typeof t.options.condition){var r=t.options.condition;m(n)&&(r=r.replace("[arrayIndex]","["+n+"]")),r=U.parseObjectPath(r),(o=!!U.get(this.data,r))||"model"!==r[0]||(o=!!U.get({model:this.data},r))}else if("function"==typeof t.options.condition)o=t.options.condition(this.data);else if("string"==typeof t.options.condition.functionBody)try{o=new Function("model","arrayIndices",t.options.condition.functionBody)(this.data,e)}catch(e){o=!0,console.error("condition functionBody errored out on evaluation: "+t.options.condition.functionBody)}return o},t.prototype.initializeControl=function(t,e){var n=this;if(void 0===e&&(e=!0),!x(t))return!1;if(y(t.options)&&(t.options=y((t.layoutNode||{}).options)?o.cloneDeep(this.formOptions):t.layoutNode.options),t.formControl=this.getFormControl(t),t.boundControl=e&&!!t.formControl,t.formControl)t.controlName=this.getFormControlName(t),t.controlValue=t.formControl.value,t.controlDisabled=t.formControl.disabled,t.options.errorMessage="VALID"===t.formControl.status?null:this.formatErrors(t.formControl.errors,t.options.validationMessages),t.options.showErrors=!0===this.formOptions.validateOnRender||"auto"===this.formOptions.validateOnRender&&m(t.controlValue),t.formControl.statusChanges.subscribe(function(e){return t.options.errorMessage="VALID"===e?null:n.formatErrors(t.formControl.errors,t.options.validationMessages)}),t.formControl.valueChanges.subscribe(function(e){o.isEqual(t.controlValue,e)||(t.controlValue=e)});else{t.controlName=t.layoutNode.name,t.controlValue=t.layoutNode.value||null;var r=this.getDataPointer(t);e&&r&&console.error('warning: control "'+r+'" is not bound to the Angular FormGroup.')}return t.boundControl},t.prototype.formatErrors=function(t,e){if(void 0===e&&(e={}),y(t))return null;x(e)||(e={});var n=function(t){return t[0].toUpperCase()+(t.slice(1)||"").replace(/([a-z])([A-Z])/g,"$1 $2").replace(/_/g," ")},o=function(t){return"object"==typeof t?Object.keys(t).map(function(e){return!0===t[e]?n(e):!1===t[e]?"Not "+n(e):n(e)+": "+o(t[e])}).join(", "):n(t.toString())};return Object.keys(t).filter(function(e){return"required"!==e||1===Object.keys(t).length}).map(function(r){return"string"==typeof e?e:"function"==typeof e[r]?e[r](t[r]):"string"==typeof e[r]?/{{.+?}}/.test(e[r])?Object.keys(t[r]).reduce(function(e,n){return e.replace(new RegExp("{{"+n+"}}","g"),t[r][n])},e[r]):e[r]:n(r)+" Error: "+o(t[r])}).join("<br>")},t.prototype.updateValue=function(t,e){if(t.controlValue=e,t.boundControl&&(t.formControl.setValue(e),t.formControl.markAsDirty()),t.layoutNode.value=e,w(t.options.copyValueTo))for(var n=0,o=t.options.copyValueTo;n<o.length;n++){var r=o[n],i=zo(this.formGroup,r);x(i)&&"function"==typeof i.setValue&&(i.setValue(e),i.markAsDirty())}},t.prototype.updateArrayCheckboxList=function(t,e){for(var n=this.getFormControl(t);n.value.length;)n.removeAt(0);for(var o=jo(t.layoutNode.dataPointer+"/-",this.dataRecursiveRefMap,this.arrayMap),r=0,i=e;r<i.length;r++){var s=i[r];if(s.checked){var a=Ro(this.templateRefLibrary[o]);a.setValue(s.value),n.push(a)}}n.markAsDirty()},t.prototype.getFormControl=function(t){return t.layoutNode&&h(t.layoutNode.dataPointer)&&"$ref"!==t.layoutNode.type?zo(this.formGroup,this.getDataPointer(t)):null},t.prototype.getFormControlValue=function(t){if(!t.layoutNode||!h(t.layoutNode.dataPointer)||"$ref"===t.layoutNode.type)return null;var e=zo(this.formGroup,this.getDataPointer(t));return e?e.value:null},t.prototype.getFormControlGroup=function(t){return t.layoutNode&&h(t.layoutNode.dataPointer)?zo(this.formGroup,this.getDataPointer(t),!0):null},t.prototype.getFormControlName=function(t){return t.layoutNode&&h(t.layoutNode.dataPointer)&&m(t.dataIndex)?U.toKey(this.getDataPointer(t)):null},t.prototype.getLayoutArray=function(t){return U.get(this.layout,this.getLayoutPointer(t),0,-1)},t.prototype.getParentNode=function(t){return U.get(this.layout,this.getLayoutPointer(t),0,-2)},t.prototype.getDataPointer=function(t){return t.layoutNode&&h(t.layoutNode.dataPointer)&&m(t.dataIndex)?U.toIndexedPointer(t.layoutNode.dataPointer,t.dataIndex,this.arrayMap):null},t.prototype.getLayoutPointer=function(t){return m(t.layoutIndex)?"/"+t.layoutIndex.join("/items/"):null},t.prototype.isControlBound=function(t){if(!t.layoutNode||!h(t.layoutNode.dataPointer)||!m(t.dataIndex))return!1;var e=this.getFormControlGroup(t),n=this.getFormControlName(t);return!!e&&H(e.controls,n)},t.prototype.addItem=function(t,e){if(!(t.layoutNode&&h(t.layoutNode.$ref)&&m(t.dataIndex)&&m(t.layoutIndex)))return!1;var n=Ro(this.templateRefLibrary[t.layoutNode.$ref]);t.layoutNode.arrayItem?this.getFormControlGroup(t).push(n):this.getFormControlGroup(t).addControl(e||this.getFormControlName(t),n);var o=Go(t.layoutNode,this);return o.arrayItem=t.layoutNode.arrayItem,t.layoutNode.arrayItemType?o.arrayItemType=t.layoutNode.arrayItemType:delete o.arrayItemType,e&&(o.name=e,o.dataPointer+="/"+U.escape(e),o.options.title=B(e)),U.insert(this.layout,this.getLayoutPointer(t),o),!0},t.prototype.moveArrayItem=function(t,e,n){if(!(t.layoutNode&&h(t.layoutNode.dataPointer)&&m(t.dataIndex)&&m(t.layoutIndex)&&h(e)&&h(n)&&e!==n))return!1;var o=this.getFormControlGroup(t),r=o.at(e);o.removeAt(e),o.insert(n,r),o.updateValueAndValidity();var i=this.getLayoutArray(t);return i.splice(n,0,i.splice(e,1)[0]),!0},t.prototype.removeItem=function(t){return!!(t.layoutNode&&h(t.layoutNode.dataPointer)&&m(t.dataIndex)&&m(t.layoutIndex))&&(t.layoutNode.arrayItem?this.getFormControlGroup(t).removeAt(t.dataIndex[t.dataIndex.length-1]):this.getFormControlGroup(t).removeControl(this.getFormControlName(t)),U.remove(this.layout,this.getLayoutPointer(t)),!0)},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[]},t}(),nr=function(){function t(t,e,n){this.elementRef=t,this.jsf=e,this.ngZone=n,this.overParentElement=!1,this.overChildElement=!1}return t.prototype.ngOnInit=function(){var t=this;this.orderable&&this.layoutNode&&this.layoutIndex&&this.dataIndex&&(this.element=this.elementRef.nativeElement,this.element.draggable=!0,this.arrayLayoutIndex="move:"+this.layoutIndex.slice(0,-1).toString(),this.ngZone.runOutsideAngular(function(){t.element.addEventListener("dragstart",function(e){e.dataTransfer.effectAllowed="move";var n=t.dataIndex[t.dataIndex.length-1];sessionStorage.setItem(t.arrayLayoutIndex,n+"")}),t.element.addEventListener("dragover",function(t){return t.preventDefault&&t.preventDefault(),t.dataTransfer.dropEffect="move",!1}),t.element.addEventListener("dragenter",function(e){if(t.overParentElement)return t.overChildElement=!0;t.overParentElement=!0;var n=sessionStorage.getItem(t.arrayLayoutIndex);null!==n&&(t.dataIndex[t.dataIndex.length-1]<+n?t.element.classList.add("drag-target-top"):t.dataIndex[t.dataIndex.length-1]>+n&&t.element.classList.add("drag-target-bottom"))}),t.element.addEventListener("dragleave",function(e){t.overChildElement?t.overChildElement=!1:t.overParentElement&&(t.overParentElement=!1);var n=sessionStorage.getItem(t.arrayLayoutIndex);t.overParentElement||t.overChildElement||null===n||(t.element.classList.remove("drag-target-top"),t.element.classList.remove("drag-target-bottom"))}),t.element.addEventListener("drop",function(e){t.element.classList.remove("drag-target-top"),t.element.classList.remove("drag-target-bottom");var n=sessionStorage.getItem(t.arrayLayoutIndex),o=t.dataIndex[t.dataIndex.length-1];return null!==n&&+n!==o&&t.jsf.moveArrayItem(t,+n,o),sessionStorage.removeItem(t.arrayLayoutIndex),!1})}))},t.decorators=[{type:n.Directive,args:[{selector:"[orderable]"}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:er},{type:n.NgZone}]},t.propDecorators={orderable:[{type:n.Input}],layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),or=function(){function t(t){this.jsf=t}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{}},Object.defineProperty(t.prototype,"showAddButton",{get:function(){return!this.layoutNode.arrayItem||this.layoutIndex[this.layoutIndex.length-1]<this.options.maxItems},enumerable:!0,configurable:!0}),t.prototype.addItem=function(t){t.preventDefault(),this.jsf.addItem(this)},Object.defineProperty(t.prototype,"buttonText",{get:function(){var t={dataIndex:this.dataIndex.slice(0,-1),layoutIndex:this.layoutIndex.slice(0,-1),layoutNode:this.jsf.getParentNode(this)};return t.layoutNode.add||this.jsf.setArrayItemTitle(t,this.layoutNode,this.itemCount)},enumerable:!0,configurable:!0}),t.decorators=[{type:n.Component,args:[{selector:"add-reference-widget",template:'\n    <button *ngIf="showAddButton"\n      [class]="options?.fieldHtmlClass || \'\'"\n      [disabled]="options?.readonly"\n      (click)="addItem($event)">\n      <span *ngIf="options?.icon" [class]="options?.icon"></span>\n      <span *ngIf="options?.title" [innerHTML]="buttonText"></span>\n    </button>',changeDetection:n.ChangeDetectionStrategy.Default}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),rr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"one-of-widget",template:""}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),ir=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){"function"==typeof this.options.onClick?this.options.onClick(t):this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"button-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <button\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [name]="controlName"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (click)="updateValue($event)">\n        <span *ngIf="options?.icon || options?.title"\n          [class]="options?.icon"\n          [innerHTML]="options?.title"></span>\n      </button>\n    </div>'}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),sr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.trueValue=!0,this.falseValue=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),null!==this.controlValue&&void 0!==this.controlValue||(this.controlValue=this.options.title)},t.prototype.updateValue=function(t){t.preventDefault(),this.jsf.updateValue(this,t.target.checked?this.trueValue:this.falseValue)},Object.defineProperty(t.prototype,"isChecked",{get:function(){return this.jsf.getFormControlValue(this)===this.trueValue},enumerable:!0,configurable:!0}),t.decorators=[{type:n.Component,args:[{selector:"checkbox-widget",template:"\n    <label\n      [attr.for]=\"'control' + layoutNode?._id\"\n      [class]=\"options?.itemLabelHtmlClass || ''\">\n      <input *ngIf=\"boundControl\"\n        [formControl]=\"formControl\"\n        [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n        [class]=\"(options?.fieldHtmlClass || '') + (isChecked ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\"\n        [id]=\"'control' + layoutNode?._id\"\n        [name]=\"controlName\"\n        [readonly]=\"options?.readonly ? 'readonly' : null\"\n        type=\"checkbox\">\n      <input *ngIf=\"!boundControl\"\n        [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n        [checked]=\"isChecked ? 'checked' : null\"\n        [class]=\"(options?.fieldHtmlClass || '') + (isChecked ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\"\n        [disabled]=\"controlDisabled\"\n        [id]=\"'control' + layoutNode?._id\"\n        [name]=\"controlName\"\n        [readonly]=\"options?.readonly ? 'readonly' : null\"\n        [value]=\"controlValue\"\n        type=\"checkbox\"\n        (change)=\"updateValue($event)\">\n      <span *ngIf=\"options?.title\"\n        [style.display]=\"options?.notitle ? 'none' : ''\"\n        [innerHTML]=\"options?.title\"></span>\n    </label>"}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),ar=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.checkboxList=[]}return t.prototype.ngOnInit=function(){if(this.options=this.layoutNode.options||{},this.layoutOrientation="checkboxes-inline"===this.layoutNode.type||"checkboxbuttons"===this.layoutNode.type?"horizontal":"vertical",this.jsf.initializeControl(this),this.checkboxList=Uo(this.options.titleMap||this.options.enumNames,this.options.enum,!0),this.boundControl){var t=this.jsf.getFormControl(this);this.checkboxList.forEach(function(e){return e.checked=t.value.includes(e.value)})}},t.prototype.updateValue=function(t){for(var e=0,n=this.checkboxList;e<n.length;e++){var o=n[e];t.target.value===o.value&&(o.checked=t.target.checked)}this.boundControl&&this.jsf.updateArrayCheckboxList(this,this.checkboxList)},t.decorators=[{type:n.Component,args:[{selector:"checkboxes-widget",template:'\n    <label *ngIf="options?.title"\n      [class]="options?.labelHtmlClass || \'\'"\n      [style.display]="options?.notitle ? \'none\' : \'\'"\n      [innerHTML]="options?.title"></label>\n\n    \x3c!-- \'horizontal\' = checkboxes-inline or checkboxbuttons --\x3e\n    <div *ngIf="layoutOrientation === \'horizontal\'" [class]="options?.htmlClass || \'\'">\n      <label *ngFor="let checkboxItem of checkboxList"\n        [attr.for]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n        [class]="(options?.itemLabelHtmlClass || \'\') + (checkboxItem.checked ?\n          (\' \' + (options?.activeClass || \'\') + \' \' + (options?.style?.selected || \'\')) :\n          (\' \' + (options?.style?.unselected || \'\')))">\n        <input type="checkbox"\n          [attr.required]="options?.required"\n          [checked]="checkboxItem.checked"\n          [class]="options?.fieldHtmlClass || \'\'"\n          [disabled]="controlDisabled"\n          [id]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n          [name]="checkboxItem?.name"\n          [readonly]="options?.readonly ? \'readonly\' : null"\n          [value]="checkboxItem.value"\n          (change)="updateValue($event)">\n        <span [innerHTML]="checkboxItem.name"></span>\n      </label>\n    </div>\n\n    \x3c!-- \'vertical\' = regular checkboxes --\x3e\n    <div *ngIf="layoutOrientation === \'vertical\'">\n      <div *ngFor="let checkboxItem of checkboxList" [class]="options?.htmlClass || \'\'">\n        <label\n          [attr.for]="\'control\' + layoutNode?._id + \'/\' + checkboxItem.value"\n          [class]="(options?.itemLabelHtmlClass || \'\') + (checkboxItem.checked ?\n            (\' \' + (options?.activeClass || \'\') + \' \' + (options?.style?.selected || \'\')) :\n            (\' \' + (options?.style?.unselected || \'\')))">\n          <input type="checkbox"\n            [attr.required]="options?.required"\n            [checked]="checkboxItem.checked"\n            [class]="options?.fieldHtmlClass || \'\'"\n            [disabled]="controlDisabled"\n            [id]="options?.name + \'/\' + checkboxItem.value"\n            [name]="checkboxItem?.name"\n            [readonly]="options?.readonly ? \'readonly\' : null"\n            [value]="checkboxItem.value"\n            (change)="updateValue($event)">\n          <span [innerHTML]="checkboxItem?.name"></span>\n        </label>\n      </div>\n    </div>'}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),ur=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"file-widget",template:""}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),lr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.autoCompleteList=[]}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"input-widget",template:'\n    <div [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <input *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [type]="layoutNode?.type">\n      <input *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (input)="updateValue($event)">\n        <datalist *ngIf="options?.typeahead?.source"\n          [id]="\'control\' + layoutNode?._id + \'Autocomplete\'">\n          <option *ngFor="let word of options?.typeahead?.source" [value]="word">\n        </datalist>\n    </div>'}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),cr=function(){function t(t){this.jsf=t,this.message=null}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.message=this.options.help||this.options.helpvalue||this.options.msg||this.options.message},t.decorators=[{type:n.Component,args:[{selector:"message-widget",template:'\n    <span *ngIf="message"\n      [class]="options?.labelHtmlClass || \'\'"\n      [innerHTML]="message"></span>'}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),pr=function(){function t(){}return t.decorators=[{type:n.Component,args:[{selector:"none-widget",template:""}]}],t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),dr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.allowNegative=!0,this.allowDecimal=!0,this.allowExponents=!1,this.lastValidNumber=""}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),"integer"===this.layoutNode.dataType&&(this.allowDecimal=!1)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"number-widget",template:'\n    <div [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <input *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.max]="options?.maximum"\n        [attr.min]="options?.minimum"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.step]="options?.multipleOf || options?.step || \'any\'"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [title]="lastValidNumber"\n        [type]="layoutNode?.type === \'range\' ? \'range\' : \'number\'">\n      <input *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.max]="options?.maximum"\n        [attr.min]="options?.minimum"\n        [attr.placeholder]="options?.placeholder"\n        [attr.required]="options?.required"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.step]="options?.multipleOf || options?.step || \'any\'"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [title]="lastValidNumber"\n        [type]="layoutNode?.type === \'range\' ? \'range\' : \'number\'"\n        [value]="controlValue"\n        (input)="updateValue($event)">\n      <span *ngIf="layoutNode?.type === \'range\'" [innerHTML]="controlValue"></span>\n    </div>'}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),fr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.layoutOrientation="vertical",this.radiosList=[]}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},"radios-inline"!==this.layoutNode.type&&"radiobuttons"!==this.layoutNode.type||(this.layoutOrientation="horizontal"),this.radiosList=Uo(this.options.titleMap||this.options.enumNames,this.options.enum,!0),this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"radios-widget",template:"\n    <label *ngIf=\"options?.title\"\n      [attr.for]=\"'control' + layoutNode?._id\"\n      [class]=\"options?.labelHtmlClass || ''\"\n      [style.display]=\"options?.notitle ? 'none' : ''\"\n      [innerHTML]=\"options?.title\"></label>\n\n    \x3c!-- 'horizontal' = radios-inline or radiobuttons --\x3e\n    <div *ngIf=\"layoutOrientation === 'horizontal'\"\n      [class]=\"options?.htmlClass || ''\">\n      <label *ngFor=\"let radioItem of radiosList\"\n        [attr.for]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n        [class]=\"(options?.itemLabelHtmlClass || '') +\n          ((controlValue + '' === radioItem?.value + '') ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + (options?.style?.unselected || '')))\">\n        <input type=\"radio\"\n          [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n          [attr.readonly]=\"options?.readonly ? 'readonly' : null\"\n          [attr.required]=\"options?.required\"\n          [checked]=\"radioItem?.value === controlValue\"\n          [class]=\"options?.fieldHtmlClass || ''\"\n          [disabled]=\"controlDisabled\"\n          [id]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n          [name]=\"controlName\"\n          [value]=\"radioItem?.value\"\n          (change)=\"updateValue($event)\">\n        <span [innerHTML]=\"radioItem?.name\"></span>\n      </label>\n    </div>\n\n    \x3c!-- 'vertical' = regular radios --\x3e\n    <div *ngIf=\"layoutOrientation !== 'horizontal'\">\n      <div *ngFor=\"let radioItem of radiosList\"\n        [class]=\"options?.htmlClass || ''\">\n        <label\n          [attr.for]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n          [class]=\"(options?.itemLabelHtmlClass || '') +\n            ((controlValue + '' === radioItem?.value + '') ?\n            (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n            (' ' + (options?.style?.unselected || '')))\">\n          <input type=\"radio\"\n            [attr.aria-describedby]=\"'control' + layoutNode?._id + 'Status'\"\n            [attr.readonly]=\"options?.readonly ? 'readonly' : null\"\n            [attr.required]=\"options?.required\"\n            [checked]=\"radioItem?.value === controlValue\"\n            [class]=\"options?.fieldHtmlClass || ''\"\n            [disabled]=\"controlDisabled\"\n            [id]=\"'control' + layoutNode?._id + '/' + radioItem?.value\"\n            [name]=\"controlName\"\n            [value]=\"radioItem?.value\"\n            (change)=\"updateValue($event)\">\n          <span [innerHTML]=\"radioItem?.name\"></span>\n        </label>\n      </div>\n    </div>"}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),hr=function(){function t(t){this.jsf=t,this.isFlexItem=!1}return t.prototype.isDraggable=function(t){return t.arrayItem&&"$ref"!==t.type&&"list"===t.arrayItemType&&!1!==this.isOrderable},t.prototype.getFlexAttribute=function(t,e){var n=["flex-grow","flex-shrink","flex-basis"].indexOf(e);return((t.options||{}).flex||"").split(/\s+/)[n]||(t.options||{})[e]||["1","1","auto"][n]},t.prototype.showWidget=function(t){return this.jsf.evaluateCondition(t,this.dataIndex)},t.decorators=[{type:n.Component,args:[{selector:"root-widget",template:'\n    <div *ngFor="let layoutItem of layout; let i = index"\n      [class.form-flex-item]="isFlexItem"\n      [style.align-self]="(layoutItem.options || {})[\'align-self\']"\n      [style.flex-basis]="getFlexAttribute(layoutItem, \'flex-basis\')"\n      [style.flex-grow]="getFlexAttribute(layoutItem, \'flex-grow\')"\n      [style.flex-shrink]="getFlexAttribute(layoutItem, \'flex-shrink\')"\n      [style.order]="(layoutItem.options || {}).order">\n      <div\n        [dataIndex]="layoutItem?.arrayItem ? (dataIndex || []).concat(i) : (dataIndex || [])"\n        [layoutIndex]="(layoutIndex || []).concat(i)"\n        [layoutNode]="layoutItem"\n        [orderable]="isDraggable(layoutItem)">\n        <select-framework-widget *ngIf="showWidget(layoutItem)"\n          [dataIndex]="layoutItem?.arrayItem ? (dataIndex || []).concat(i) : (dataIndex || [])"\n          [layoutIndex]="(layoutIndex || []).concat(i)"\n          [layoutNode]="layoutItem"></select-framework-widget>\n      </div>\n    </div>',styles:["\n    [draggable=true] {\n      transition: all 150ms cubic-bezier(.4, 0, .2, 1);\n    }\n    [draggable=true]:hover {\n      cursor: move;\n      box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);\n      position: relative; z-index: 10;\n      margin-top: -1px;\n      margin-left: -1px;\n      margin-right: 1px;\n      margin-bottom: 1px;\n    }\n    [draggable=true].drag-target-top {\n      box-shadow: 0 -2px 0 #000;\n      position: relative; z-index: 20;\n    }\n    [draggable=true].drag-target-bottom {\n      box-shadow: 0 2px 0 #000;\n      position: relative; z-index: 20;\n    }\n  "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={dataIndex:[{type:n.Input}],layoutIndex:[{type:n.Input}],layout:[{type:n.Input}],isOrderable:[{type:n.Input}],isFlexItem:[{type:n.Input}]},t}(),mr=function(){function t(t){this.jsf=t,this.expanded=!0}return Object.defineProperty(t.prototype,"sectionTitle",{get:function(){return this.options.notitle?null:this.jsf.setItemTitle(this)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){switch(this.jsf.initializeControl(this),this.options=this.layoutNode.options||{},this.expanded="boolean"==typeof this.options.expanded?this.options.expanded:!this.options.expandable,this.layoutNode.type){case"fieldset":case"array":case"tab":case"advancedfieldset":case"authfieldset":case"optionfieldset":case"selectfieldset":this.containerType="fieldset";break;default:this.containerType="div"}},t.prototype.toggleExpanded=function(){this.options.expandable&&(this.expanded=!this.expanded)},t.prototype.getFlexAttribute=function(t){var e="flex"===this.layoutNode.type||!!this.options.displayFlex||"flex"===this.options.display;if("flex"!==t&&!e)return null;switch(t){case"is-flex":return e;case"display":return e?"flex":"initial";case"flex-direction":case"flex-wrap":var n=["flex-direction","flex-wrap"].indexOf(t);return(this.options["flex-flow"]||"").split(/\s+/)[n]||this.options[t]||["column","nowrap"][n];case"justify-content":case"align-items":case"align-content":return this.options[t]}},t.decorators=[{type:n.Component,args:[{selector:"section-widget",template:'\n    <div *ngIf="containerType === \'div\'"\n      [class]="options?.htmlClass || \'\'"\n      [class.expandable]="options?.expandable && !expanded"\n      [class.expanded]="options?.expandable && expanded">\n      <label *ngIf="sectionTitle"\n        class="legend"\n        [class]="options?.labelHtmlClass || \'\'"\n        [innerHTML]="sectionTitle"\n        (click)="toggleExpanded()"></label>\n      <root-widget *ngIf="expanded"\n        [dataIndex]="dataIndex"\n        [layout]="layoutNode.items"\n        [layoutIndex]="layoutIndex"\n        [isFlexItem]="getFlexAttribute(\'is-flex\')"\n        [isOrderable]="options?.orderable"\n        [class.form-flex-column]="getFlexAttribute(\'flex-direction\') === \'column\'"\n        [class.form-flex-row]="getFlexAttribute(\'flex-direction\') === \'row\'"\n        [style.align-content]="getFlexAttribute(\'align-content\')"\n        [style.align-items]="getFlexAttribute(\'align-items\')"\n        [style.display]="getFlexAttribute(\'display\')"\n        [style.flex-direction]="getFlexAttribute(\'flex-direction\')"\n        [style.flex-wrap]="getFlexAttribute(\'flex-wrap\')"\n        [style.justify-content]="getFlexAttribute(\'justify-content\')"></root-widget>\n    </div>\n    <fieldset *ngIf="containerType === \'fieldset\'"\n      [class]="options?.htmlClass || \'\'"\n      [class.expandable]="options?.expandable && !expanded"\n      [class.expanded]="options?.expandable && expanded"\n      [disabled]="options?.readonly">\n      <legend *ngIf="sectionTitle"\n        class="legend"\n        [class]="options?.labelHtmlClass || \'\'"\n        [innerHTML]="sectionTitle"\n        (click)="toggleExpanded()"></legend>\n      <div *ngIf="options?.messageLocation !== \'bottom\'">\n        <p *ngIf="options?.description"\n        class="help-block"\n        [class]="options?.labelHelpBlockClass || \'\'"\n        [innerHTML]="options?.description"></p>\n      </div>\n      <root-widget *ngIf="expanded"\n        [dataIndex]="dataIndex"\n        [layout]="layoutNode.items"\n        [layoutIndex]="layoutIndex"\n        [isFlexItem]="getFlexAttribute(\'is-flex\')"\n        [isOrderable]="options?.orderable"\n        [class.form-flex-column]="getFlexAttribute(\'flex-direction\') === \'column\'"\n        [class.form-flex-row]="getFlexAttribute(\'flex-direction\') === \'row\'"\n        [style.align-content]="getFlexAttribute(\'align-content\')"\n        [style.align-items]="getFlexAttribute(\'align-items\')"\n        [style.display]="getFlexAttribute(\'display\')"\n        [style.flex-direction]="getFlexAttribute(\'flex-direction\')"\n        [style.flex-wrap]="getFlexAttribute(\'flex-wrap\')"\n        [style.justify-content]="getFlexAttribute(\'justify-content\')"></root-widget>\n      <div *ngIf="options?.messageLocation === \'bottom\'">\n        <p *ngIf="options?.description"\n        class="help-block"\n        [class]="options?.labelHelpBlockClass || \'\'"\n        [innerHTML]="options?.description"></p>\n      </div>\n    </fieldset>',styles:["\n    .legend { font-weight: bold; }\n    .expandable > legend:before, .expandable > label:before  { content: '▶'; padding-right: .3em; }\n    .expanded > legend:before, .expanded > label:before  { content: '▼'; padding-right: .2em; }\n  "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),yr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.selectList=[],this.isArray=w}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.selectList=Uo(this.options.titleMap||this.options.enumNames,this.options.enum,!!this.options.required,!!this.options.flatList),this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"select-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <select *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName">\n        <ng-template ngFor let-selectItem [ngForOf]="selectList">\n          <option *ngIf="!isArray(selectItem?.items)"\n            [value]="selectItem?.value">\n            <span [innerHTML]="selectItem?.name"></span>\n          </option>\n          <optgroup *ngIf="isArray(selectItem?.items)"\n            [label]="selectItem?.group">\n            <option *ngFor="let subItem of selectItem.items"\n              [value]="subItem?.value">\n              <span [innerHTML]="subItem?.name"></span>\n            </option>\n          </optgroup>\n        </ng-template>\n      </select>\n      <select *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        (change)="updateValue($event)">\n        <ng-template ngFor let-selectItem [ngForOf]="selectList">\n          <option *ngIf="!isArray(selectItem?.items)"\n            [selected]="selectItem?.value === controlValue"\n            [value]="selectItem?.value">\n            <span [innerHTML]="selectItem?.name"></span>\n          </option>\n          <optgroup *ngIf="isArray(selectItem?.items)"\n            [label]="selectItem?.group">\n            <option *ngFor="let subItem of selectItem.items"\n              [attr.selected]="subItem?.value === controlValue"\n              [value]="subItem?.value">\n              <span [innerHTML]="subItem?.name"></span>\n            </option>\n          </optgroup>\n        </ng-template>\n      </select>\n    </div>'}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),br=function(){function t(t,e){this.componentFactory=t,this.jsf=e,this.newComponent=null}return t.prototype.ngOnInit=function(){this.updateComponent()},t.prototype.ngOnChanges=function(){this.updateComponent()},t.prototype.updateComponent=function(){if(!this.newComponent&&this.jsf.framework&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.jsf.framework))),this.newComponent)for(var t=0,e=["layoutNode","layoutIndex","dataIndex"];t<e.length;t++){var n=e[t];this.newComponent.instance[n]=this[n]}},t.decorators=[{type:n.Component,args:[{selector:"select-framework-widget",template:"<div #widgetContainer></div>"}]}],t.ctorParameters=function(){return[{type:n.ComponentFactoryResolver},{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}],widgetContainer:[{type:n.ViewChild,args:["widgetContainer",{read:n.ViewContainerRef}]}]},t}(),vr=function(){function t(t,e){this.componentFactory=t,this.jsf=e,this.newComponent=null}return t.prototype.ngOnInit=function(){this.updateComponent()},t.prototype.ngOnChanges=function(){this.updateComponent()},t.prototype.updateComponent=function(){if(!this.newComponent&&(this.layoutNode||{}).widget&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.layoutNode.widget))),this.newComponent)for(var t=0,e=["layoutNode","layoutIndex","dataIndex"];t<e.length;t++){var n=e[t];this.newComponent.instance[n]=this[n]}},t.decorators=[{type:n.Component,args:[{selector:"select-widget-widget",template:"<div #widgetContainer></div>"}]}],t.ctorParameters=function(){return[{type:n.ComponentFactoryResolver},{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}],widgetContainer:[{type:n.ViewChild,args:["widgetContainer",{read:n.ViewContainerRef}]}]},t}(),gr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){var t=this;this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),H(this.options,"disabled")?this.controlDisabled=this.options.disabled:this.jsf.formOptions.disableInvalidSubmit&&(this.controlDisabled=!this.jsf.isValid,this.jsf.isValidChanges.subscribe(function(e){return t.controlDisabled=!e})),null!==this.controlValue&&void 0!==this.controlValue||(this.controlValue=this.options.title)},t.prototype.updateValue=function(t){"function"==typeof this.options.onClick?this.options.onClick(t):this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"submit-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <input\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (click)="updateValue($event)">\n    </div>'}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),_r=function(){function t(t){this.jsf=t,this.selectedItem=0,this.showAddTab=!0}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.itemCount=this.layoutNode.items.length-1,this.updateControl()},t.prototype.select=function(t){"$ref"===this.layoutNode.items[t].type&&(this.itemCount=this.layoutNode.items.length,this.jsf.addItem({layoutNode:this.layoutNode.items[t],layoutIndex:this.layoutIndex.concat(t),dataIndex:this.dataIndex.concat(t)}),this.updateControl()),this.selectedItem=t},t.prototype.updateControl=function(){var t=this.layoutNode.items[this.layoutNode.items.length-1];"$ref"===t.type&&this.itemCount>=(t.options.maxItems||1e3)&&(this.showAddTab=!1)},t.prototype.setTabTitle=function(t,e){return this.jsf.setArrayItemTitle(this,t,e)},t.decorators=[{type:n.Component,args:[{selector:"tabs-widget",template:"\n    <ul\n      [class]=\"options?.labelHtmlClass || ''\">\n      <li *ngFor=\"let item of layoutNode?.items; let i = index\"\n        [class]=\"(options?.itemLabelHtmlClass || '') + (selectedItem === i ?\n          (' ' + (options?.activeClass || '') + ' ' + (options?.style?.selected || '')) :\n          (' ' + options?.style?.unselected))\"\n        role=\"presentation\"\n        data-tabs>\n        <a *ngIf=\"showAddTab || item.type !== '$ref'\"\n           [class]=\"'nav-link' + (selectedItem === i ? (' ' + options?.activeClass + ' ' + options?.style?.selected) :\n            (' ' + options?.style?.unselected))\"\n          [innerHTML]=\"setTabTitle(item, i)\"\n          (click)=\"select(i)\"></a>\n      </li>\n    </ul>\n\n    <div *ngFor=\"let layoutItem of layoutNode?.items; let i = index\"\n      [class]=\"options?.htmlClass || ''\">\n\n      <select-framework-widget *ngIf=\"selectedItem === i\"\n        [class]=\"(options?.fieldHtmlClass || '') +\n          ' ' + (options?.activeClass || '') +\n          ' ' + (options?.style?.selected || '')\"\n        [dataIndex]=\"layoutNode?.dataType === 'array' ? (dataIndex || []).concat(i) : dataIndex\"\n        [layoutIndex]=\"(layoutIndex || []).concat(i)\"\n        [layoutNode]=\"layoutItem\"></select-framework-widget>\n\n    </div>",styles:[" a { cursor: pointer; } "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),xr=function(){function t(t,e){this.componentFactory=t,this.jsf=e,this.newComponent=null}return t.prototype.ngOnInit=function(){this.updateComponent()},t.prototype.ngOnChanges=function(){this.updateComponent()},t.prototype.updateComponent=function(){if(!this.newComponent&&this.layoutNode.options.template&&(this.newComponent=this.widgetContainer.createComponent(this.componentFactory.resolveComponentFactory(this.layoutNode.options.template))),this.newComponent)for(var t=0,e=["layoutNode","layoutIndex","dataIndex"];t<e.length;t++){var n=e[t];this.newComponent.instance[n]=this[n]}},t.decorators=[{type:n.Component,args:[{selector:"template-widget",template:"<div #widgetContainer></div>"}]}],t.ctorParameters=function(){return[{type:n.ComponentFactoryResolver},{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}],widgetContainer:[{type:n.ViewChild,args:["widgetContainer",{read:n.ViewContainerRef}]}]},t}(),wr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"textarea-widget",template:'\n    <div\n      [class]="options?.htmlClass || \'\'">\n      <label *ngIf="options?.title"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <textarea *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"></textarea>\n      <textarea *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [attr.placeholder]="options?.placeholder"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [class]="options?.fieldHtmlClass || \'\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [value]="controlValue"\n        (input)="updateValue($event)">{{controlValue}}</textarea>\n    </div>'}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Or=function(){function t(){this.defaultWidget="text",this.widgetLibrary={none:pr,root:hr,"select-framework":br,"select-widget":vr,$ref:or,email:"text",integer:"number",number:dr,password:"text",search:"text",tel:"text",text:lr,url:"text",color:"text",date:"text",datetime:"text","datetime-local":"text",month:"text",range:"number",time:"text",week:"text",checkbox:sr,file:ur,hidden:"text",image:"text",radio:"radios",reset:"submit",submit:gr,button:ir,select:yr,textarea:wr,checkboxes:ar,"checkboxes-inline":"checkboxes",checkboxbuttons:"checkboxes",radios:fr,"radios-inline":"radios",radiobuttons:"radios",section:mr,div:"section",fieldset:"section",flex:"section","one-of":rr,array:"section",tabarray:"tabs",tab:"section",tabs:_r,message:cr,help:"message",msg:"message",html:"message",template:xr,advancedfieldset:"section",authfieldset:"section",optionfieldset:"one-of",selectfieldset:"one-of",conditional:"section",actions:"section",tagsinput:"section",updown:"number","date-time":"datetime-local","alt-datetime":"datetime-local","alt-date":"date",wizard:"section",textline:"text"},this.registeredWidgets={},this.frameworkWidgets={},this.activeWidgets={},this.setActiveWidgets()}return t.prototype.setActiveWidgets=function(){this.activeWidgets=Object.assign({},this.widgetLibrary,this.frameworkWidgets,this.registeredWidgets);for(var t=0,e=Object.keys(this.activeWidgets);t<e.length;t++){var n=e[t],o=this.activeWidgets[n];if("string"==typeof o){for(var r=[];"string"==typeof o&&!r.includes(o);)r.push(o),o=this.activeWidgets[o];"string"!=typeof o&&(this.activeWidgets[n]=o)}}return!0},t.prototype.setDefaultWidget=function(t){return!!this.hasWidget(t)&&(this.defaultWidget=t,!0)},t.prototype.hasWidget=function(t,e){return void 0===e&&(e="activeWidgets"),!(!t||"string"!=typeof t)&&H(this[e],t)},t.prototype.hasDefaultWidget=function(t){return this.hasWidget(t,"widgetLibrary")},t.prototype.registerWidget=function(t,e){return!(!t||!e||"string"!=typeof t)&&(this.registeredWidgets[t]=e,this.setActiveWidgets())},t.prototype.unRegisterWidget=function(t){return!!H(this.registeredWidgets,t)&&(delete this.registeredWidgets[t],this.setActiveWidgets())},t.prototype.unRegisterAllWidgets=function(t){return void 0===t&&(t=!0),this.registeredWidgets={},t&&(this.frameworkWidgets={}),this.setActiveWidgets()},t.prototype.registerFrameworkWidgets=function(t){return null!==t&&"object"==typeof t||(t={}),this.frameworkWidgets=t,this.setActiveWidgets()},t.prototype.unRegisterFrameworkWidgets=function(){return!!Object.keys(this.frameworkWidgets).length&&(this.frameworkWidgets={},this.setActiveWidgets())},t.prototype.getWidget=function(t,e){return void 0===e&&(e="activeWidgets"),this.hasWidget(t,e)?this[e][t]:this.hasWidget(this.defaultWidget,e)?this[e][this.defaultWidget]:null},t.prototype.getAllWidgets=function(){return{widgetLibrary:this.widgetLibrary,registeredWidgets:this.registeredWidgets,frameworkWidgets:this.frameworkWidgets,activeWidgets:this.activeWidgets}},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[]},t}(),Ir=function(){function t(){this.widgets={},this.stylesheets=[],this.scripts=[]}return t.decorators=[{type:n.Injectable}],t}(),jr=function(){function t(t,e){var n=this;this.frameworks=t,this.widgetLibrary=e,this.activeFramework=null,this.loadExternalAssets=!1,this.frameworkLibrary={},this.frameworks.forEach(function(t){return n.frameworkLibrary[t.name]=t}),this.defaultFramework=this.frameworks[0].name,this.setFramework(this.defaultFramework)}return t.prototype.setLoadExternalAssets=function(t){void 0===t&&(t=!0),this.loadExternalAssets=!!t},t.prototype.setFramework=function(t,e){return void 0===t&&(t=this.defaultFramework),void 0===e&&(e=this.loadExternalAssets),this.activeFramework="string"==typeof t&&this.hasFramework(t)?this.frameworkLibrary[t]:"object"==typeof t&&H(t,"framework")?t:this.frameworkLibrary[this.defaultFramework],this.registerFrameworkWidgets(this.activeFramework)},t.prototype.registerFrameworkWidgets=function(t){return H(t,"widgets")?this.widgetLibrary.registerFrameworkWidgets(t.widgets):this.widgetLibrary.unRegisterFrameworkWidgets()},t.prototype.hasFramework=function(t){return H(this.frameworkLibrary,t)},t.prototype.getFramework=function(){return this.activeFramework||this.setFramework("default",!0),this.activeFramework.framework},t.prototype.getFrameworkWidgets=function(){return this.activeFramework.widgets||{}},t.prototype.getFrameworkStylesheets=function(t){return void 0===t&&(t=this.loadExternalAssets),t&&this.activeFramework.stylesheets||[]},t.prototype.getFrameworkScripts=function(t){return void 0===t&&(t=this.loadExternalAssets),t&&this.activeFramework.scripts||[]},t.decorators=[{type:n.Injectable}],t.ctorParameters=function(){return[{type:Array,decorators:[{type:n.Inject,args:[Ir]}]},{type:Or,decorators:[{type:n.Inject,args:[Or]}]}]},t}(),Cr={provide:r.NG_VALUE_ACCESSOR,useExisting:n.forwardRef(function(){return Sr}),multi:!0},Sr=function(){function t(t,e,o,r,i){this.changeDetector=t,this.frameworkLibrary=e,this.widgetLibrary=o,this.jsf=r,this.sanitizer=i,this.formValueSubscription=null,this.formInitialized=!1,this.objectWrap=!1,this.previousInputs={schema:null,layout:null,data:null,options:null,framework:null,widgets:null,form:null,model:null,JSONSchema:null,UISchema:null,formData:null,loadExternalAssets:null,debug:null},this.onChanges=new n.EventEmitter,this.onSubmit=new n.EventEmitter,this.isValid=new n.EventEmitter,this.validationErrors=new n.EventEmitter,this.formSchema=new n.EventEmitter,this.formLayout=new n.EventEmitter,this.dataChange=new n.EventEmitter,this.modelChange=new n.EventEmitter,this.formDataChange=new n.EventEmitter,this.ngModelChange=new n.EventEmitter}return Object.defineProperty(t.prototype,"value",{get:function(){return this.objectWrap?this.jsf.data[1]:this.jsf.data},set:function(t){this.setFormValues(t,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stylesheets",{get:function(){var t=this.frameworkLibrary.getFrameworkStylesheets(),e=this.sanitizer.bypassSecurityTrustResourceUrl;return t.map(function(t){return e(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scripts",{get:function(){var t=this.frameworkLibrary.getFrameworkScripts(),e=this.sanitizer.bypassSecurityTrustResourceUrl;return t.map(function(t){return e(t)})},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.updateForm()},t.prototype.ngOnChanges=function(){this.updateForm()},t.prototype.writeValue=function(t){this.setFormValues(t,!1),this.formValuesInput||(this.formValuesInput="ngModel")},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype.setDisabledState=function(t){this.jsf.formOptions.formDisabled!==!!t&&(this.jsf.formOptions.formDisabled=!!t,this.initializeForm())},t.prototype.updateForm=function(){var t=this;if(!this.formInitialized||!this.formValuesInput||this.language&&this.language!==this.jsf.language)this.initializeForm();else{this.language&&this.language!==this.jsf.language&&this.jsf.setLanguage(this.language);var e=Object.keys(this.previousInputs).filter(function(e){return t.previousInputs[e]!==t[e]}),n=!0;if(1===e.length&&"form"===e[0]&&this.formValuesInput.startsWith("form.")&&(e=Object.keys(this.previousInputs.form||{}).filter(function(e){return!o.isEqual(t.previousInputs.form[e],t.form[e])}).map(function(t){return"form."+t}),n=!1),1===e.length&&e[0]===this.formValuesInput)if(-1===this.formValuesInput.indexOf("."))this.setFormValues(this[this.formValuesInput],n);else{var r=this.formValuesInput.split("."),i=r[0],s=r[1];this.setFormValues(this[i][s],n)}else e.length&&(this.initializeForm(),this.onChange&&this.onChange(this.jsf.formValues),this.onTouched&&this.onTouched(this.jsf.formValues));Object.keys(this.previousInputs).filter(function(e){return t.previousInputs[e]!==t[e]}).forEach(function(e){return t.previousInputs[e]=t[e]})}},t.prototype.setFormValues=function(t,e){if(void 0===e&&(e=!0),t){var n=this.objectWrap?t[1]:t;this.jsf.formGroup?e&&this.jsf.formGroup.reset():(this.jsf.formValues=t,this.activateForm()),this.jsf.formGroup&&this.jsf.formGroup.patchValue(n),this.onChange&&this.onChange(n),this.onTouched&&this.onTouched(n)}else this.jsf.formGroup.reset()},t.prototype.submitForm=function(){var t=this.jsf.validData;this.onSubmit.emit(this.objectWrap?t[1]:t)},t.prototype.initializeForm=function(){if(this.schema||this.layout||this.data||this.form||this.model||this.JSONSchema||this.UISchema||this.formData||this.ngModel||this.jsf.data){if(this.jsf.resetAllValues(),this.initializeOptions(),this.initializeSchema(),this.initializeLayout(),this.initializeData(),this.activateForm(),this.debug||this.jsf.formOptions.debug){this.debugOutput=[].map(function(t){return JSON.stringify(t,null,2)}).join("\n")}this.formInitialized=!0}},t.prototype.initializeOptions=function(){this.language&&this.language!==this.jsf.language&&this.jsf.setLanguage(this.language),this.jsf.setOptions({debug:!!this.debug});var t=this.loadExternalAssets||!1,e=this.framework||"default";if(x(this.options)&&(this.jsf.setOptions(this.options),t=this.options.loadExternalAssets||t,e=this.options.framework||e),x(this.form)&&x(this.form.options)&&(this.jsf.setOptions(this.form.options),t=this.form.options.loadExternalAssets||t,e=this.form.options.framework||e),x(this.widgets)&&this.jsf.setOptions({widgets:this.widgets}),this.frameworkLibrary.setLoadExternalAssets(t),this.frameworkLibrary.setFramework(e),this.jsf.framework=this.frameworkLibrary.getFramework(),x(this.jsf.formOptions.widgets))for(var n=0,o=Object.keys(this.jsf.formOptions.widgets);n<o.length;n++){var r=o[n];this.widgetLibrary.registerWidget(r,this.jsf.formOptions.widgets[r])}x(this.form)&&x(this.form.tpldata)&&this.jsf.setTpldata(this.form.tpldata)},t.prototype.initializeSchema=function(){x(this.schema)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.schema=o.cloneDeep(this.schema)):H(this.form,"schema")&&x(this.form.schema)?this.jsf.schema=o.cloneDeep(this.form.schema):x(this.JSONSchema)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.jsf.schema=o.cloneDeep(this.JSONSchema)):H(this.form,"JSONSchema")&&x(this.form.JSONSchema)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.jsf.schema=o.cloneDeep(this.form.JSONSchema)):H(this.form,"properties")&&x(this.form.properties)?this.jsf.schema=o.cloneDeep(this.form):x(this.form),y(this.jsf.schema)||(T("object",this.jsf.schema.type)&&(this.jsf.schema.type="object"),H(this.jsf.schema,"type")&&"object"!==this.jsf.schema.type?(this.jsf.schema={type:"object",properties:{1:this.jsf.schema}},this.objectWrap=!0):H(this.jsf.schema,"type")||(x(this.jsf.schema.properties)||x(this.jsf.schema.patternProperties)||x(this.jsf.schema.additionalProperties)?this.jsf.schema.type="object":(this.jsf.JsonFormCompatibility=!0,this.jsf.schema={type:"object",properties:this.jsf.schema})),this.jsf.schema=Lo(this.jsf.schema),this.jsf.compileAjvSchema(),this.jsf.schema=Fo(this.jsf.schema,this.jsf.schemaRefLibrary,this.jsf.schemaRecursiveRefMap,this.jsf.dataRecursiveRefMap,this.jsf.arrayMap),H(this.jsf.schemaRefLibrary,"")&&(this.jsf.hasRootReference=!0))},t.prototype.initializeData=function(){m(this.data)?(this.jsf.formValues=o.cloneDeep(this.data),this.formValuesInput="data"):m(this.model)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.formValues=o.cloneDeep(this.model),this.formValuesInput="model"):m(this.ngModel)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.formValues=o.cloneDeep(this.ngModel),this.formValuesInput="ngModel"):x(this.form)&&m(this.form.value)?(this.jsf.JsonFormCompatibility=!0,this.jsf.formValues=o.cloneDeep(this.form.value),this.formValuesInput="form.value"):x(this.form)&&m(this.form.data)?(this.jsf.formValues=o.cloneDeep(this.form.data),this.formValuesInput="form.data"):m(this.formData)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.formValuesInput="formData"):H(this.form,"formData")&&m(this.form.formData)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,this.jsf.formValues=o.cloneDeep(this.form.formData),this.formValuesInput="form.formData"):this.formValuesInput=null},t.prototype.initializeLayout=function(){var t=this,e=function(t){return(x(t)||w(t))&&R(t,function(t,e){H(t,"options")&&x(t.options)&&(t.titleMap=t.options,delete t.options)},"top-down"),t};w(this.layout)?this.jsf.layout=o.cloneDeep(this.layout):w(this.form)?(this.jsf.AngularSchemaFormCompatibility=!0,this.jsf.layout=o.cloneDeep(this.form)):this.form&&w(this.form.form)?(this.jsf.JsonFormCompatibility=!0,this.jsf.layout=e(o.cloneDeep(this.form.form))):this.form&&w(this.form.layout)?this.jsf.layout=o.cloneDeep(this.form.layout):this.jsf.layout=["*"];var n=null;x(this.UISchema)?(this.jsf.ReactJsonSchemaFormCompatibility=!0,n=o.cloneDeep(this.UISchema)):H(this.form,"UISchema")?(this.jsf.ReactJsonSchemaFormCompatibility=!0,n=o.cloneDeep(this.form.UISchema)):H(this.form,"uiSchema")?(this.jsf.ReactJsonSchemaFormCompatibility=!0,n=o.cloneDeep(this.form.uiSchema)):H(this.form,"customFormItems")&&(this.jsf.JsonFormCompatibility=!0,n=e(o.cloneDeep(this.form.customFormItems))),n&&U.forEachDeep(n,function(e,n){var o=n.replace(/\//g,"/properties/").replace(/\/properties\/items\/properties\//g,"/items/properties/").replace(/\/properties\/titleMap\/properties\//g,"/titleMap/properties/");if(m(e)&&m(n)){var r=U.toKey(n),i=(U.parse(o)||[]).slice(0,-2),s=void 0;"ui:order"===r.toLowerCase()?s=i.concat(["ui:order"]):("ui:"===r.slice(0,3).toLowerCase()&&(r=r.slice(3)),s=i.concat(["x-schema-form",r])),U.has(t.jsf.schema,i)&&!U.has(t.jsf.schema,s)&&U.set(t.jsf.schema,s,e)}})},t.prototype.activateForm=function(){var t=this;if(y(this.jsf.schema)&&(y(this.jsf.formValues)||this.jsf.buildSchemaFromData()),y(this.jsf.schema)||(this.jsf.compileAjvSchema(),this.jsf.buildLayout(this.widgetLibrary),this.jsf.buildFormGroupTemplate(this.jsf.formValues),this.jsf.buildFormGroup()),this.jsf.formGroup){y(this.jsf.formValues)||!0===this.jsf.formOptions.setSchemaDefaults||!0===this.jsf.formOptions.setLayoutDefaults||this.setFormValues(this.jsf.formValues),this.jsf.dataChanges.subscribe(function(e){t.onChanges.emit(t.objectWrap?e[1]:e),t.formValuesInput&&-1===t.formValuesInput.indexOf(".")&&t[t.formValuesInput+"Change"].emit(t.objectWrap?e[1]:e)}),this.jsf.formGroup.statusChanges.subscribe(function(){return t.changeDetector.markForCheck()}),this.jsf.isValidChanges.subscribe(function(e){return t.isValid.emit(e)}),this.jsf.validationErrorChanges.subscribe(function(e){return t.validationErrors.emit(e)}),this.formSchema.emit(this.jsf.schema),this.formLayout.emit(this.jsf.layout),this.onChanges.emit(this.objectWrap?this.jsf.data[1]:this.jsf.data);var e=U.get(this.jsf,"/formOptions/validateOnRender");if(e){var n=function(t){(!0===e||m(t.value))&&t.markAsTouched(),Object.keys(t.controls||{}).forEach(function(e){return n(t.controls[e])})};n(this.jsf.formGroup),this.isValid.emit(this.jsf.isValid),this.validationErrors.emit(this.jsf.ajvErrors)}}},t.decorators=[{type:n.Component,args:[{selector:"json-schema-form",template:'\n    <div *ngFor="let stylesheet of stylesheets">\n      <link rel="stylesheet" [href]="stylesheet">\n    </div>\n    <div *ngFor="let script of scripts">\n      <script type="text/javascript" [src]="script"><\/script>\n    </div>\n    <form class="json-schema-form" (ngSubmit)="submitForm()">\n      <root-widget [layout]="jsf?.layout"></root-widget>\n    </form>\n    <div *ngIf="debug || jsf?.formOptions?.debug">\n      Debug output: <pre>{{debugOutput}}</pre>\n    </div>',changeDetection:n.ChangeDetectionStrategy.OnPush,providers:[er,Cr]}]}],t.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:jr},{type:Or},{type:er},{type:s.DomSanitizer}]},t.propDecorators={schema:[{type:n.Input}],layout:[{type:n.Input}],data:[{type:n.Input}],options:[{type:n.Input}],framework:[{type:n.Input}],widgets:[{type:n.Input}],form:[{type:n.Input}],model:[{type:n.Input}],JSONSchema:[{type:n.Input}],UISchema:[{type:n.Input}],formData:[{type:n.Input}],ngModel:[{type:n.Input}],language:[{type:n.Input}],loadExternalAssets:[{type:n.Input}],debug:[{type:n.Input}],value:[{type:n.Input}],onChanges:[{type:n.Output}],onSubmit:[{type:n.Output}],isValid:[{type:n.Output}],validationErrors:[{type:n.Output}],formSchema:[{type:n.Output}],formLayout:[{type:n.Output}],dataChange:[{type:n.Output}],modelChange:[{type:n.Output}],formDataChange:[{type:n.Output}],ngModelChange:[{type:n.Output}]},t}(),Pr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.jsf.initializeControl(this)},t.decorators=[{type:n.Component,args:[{selector:"hidden-widget",template:'\n    <input *ngIf="boundControl"\n      [formControl]="formControl"\n      [id]="\'control\' + layoutNode?._id"\n      [name]="controlName"\n      type="hidden">\n    <input *ngIf="!boundControl"\n      [disabled]="controlDisabled"\n      [name]="controlName"\n      [id]="\'control\' + layoutNode?._id"\n      type="hidden"\n      [value]="controlValue">'}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Mr=function(){function t(t){this.jsf=t}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{}},t.decorators=[{type:n.Component,args:[{selector:"tab-widget",template:'\n    <div [class]="options?.htmlClass || \'\'">\n      <root-widget\n        [dataIndex]="dataIndex"\n        [layoutIndex]="layoutIndex"\n        [layout]="layoutNode.items"></root-widget>\n    </div>'}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Nr=[or,rr,ir,sr,ar,ur,Pr,lr,cr,pr,dr,fr,hr,mr,yr,br,vr,gr,Mr,_r,xr,wr],kr=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[er]}},t.decorators=[{type:n.NgModule,args:[{imports:[a.CommonModule,r.FormsModule,r.ReactiveFormsModule],declarations:Nr.concat([nr]),exports:Nr.concat([nr]),entryComponents:Nr.slice(),providers:[er]}]}],t}(),Fr=function(){function t(){}return t.decorators=[{type:n.Component,args:[{selector:"no-framework",template:'\n    <select-widget-widget\n      [dataIndex]="dataIndex"\n      [layoutIndex]="layoutIndex"\n      [layoutNode]="layoutNode"></select-widget-widget>'}]}],t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Ar=(Qo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}Qo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),Tr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="no-framework",e.framework=Fr,e}return Ar(e,t),e.decorators=[{type:n.Injectable}],e}(Ir),Er=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[{provide:Ir,useClass:Tr,multi:!0}]}},t.decorators=[{type:n.NgModule,args:[{imports:[a.CommonModule,kr],declarations:[Fr],exports:[Fr],entryComponents:[Fr]}]}],t}(),Dr=function(){function t(){}return t.forRoot=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=e.length?e.map(function(t){return t.forRoot().providers[0]}):[{provide:Ir,useClass:Tr,multi:!0}];return{ngModule:t,providers:[er,jr,Or].concat(o)}},t.decorators=[{type:n.NgModule,args:[{imports:[a.CommonModule,r.FormsModule,r.ReactiveFormsModule,kr,Er],declarations:[Sr],exports:[Sr,kr]}]}],t}(),Lr=function(){function t(t){this.jsf=t,this.isFlexItem=!1}return t.prototype.removeItem=function(t){this.jsf.removeItem(t)},t.prototype.getFlexAttribute=function(t,e){var n=["flex-grow","flex-shrink","flex-basis"].indexOf(e);return((t.options||{}).flex||"").split(/\s+/)[n]||(t.options||{})[e]||["1","1","auto"][n]},t.prototype.showWidget=function(t){return this.jsf.evaluateCondition(t,this.dataIndex)},t.decorators=[{type:n.Component,args:[{selector:"flex-layout-root-widget",template:'\n    <div *ngFor="let layoutNode of layout; let i = index"\n      [class.form-flex-item]="isFlexItem"\n      [style.flex-grow]="getFlexAttribute(layoutNode, \'flex-grow\')"\n      [style.flex-shrink]="getFlexAttribute(layoutNode, \'flex-shrink\')"\n      [style.flex-basis]="getFlexAttribute(layoutNode, \'flex-basis\')"\n      [style.align-self]="(layoutNode?.options || {})[\'align-self\']"\n      [style.order]="layoutNode?.options?.order"\n      [fxFlex]="layoutNode?.options?.fxFlex"\n      [fxFlexOrder]="layoutNode?.options?.fxFlexOrder"\n      [fxFlexOffset]="layoutNode?.options?.fxFlexOffset"\n      [fxFlexAlign]="layoutNode?.options?.fxFlexAlign">\n      <select-framework-widget *ngIf="showWidget(layoutNode)"\n        [dataIndex]="layoutNode?.arrayItem ? (dataIndex || []).concat(i) : (dataIndex || [])"\n        [layoutIndex]="(layoutIndex || []).concat(i)"\n        [layoutNode]="layoutNode"></select-framework-widget>\n    <div>',changeDetection:n.ChangeDetectionStrategy.Default}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={dataIndex:[{type:n.Input}],layoutIndex:[{type:n.Input}],layout:[{type:n.Input}],isFlexItem:[{type:n.Input}]},t}(),Vr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.expanded=!0,this.containerType="div"}return Object.defineProperty(t.prototype,"sectionTitle",{get:function(){return this.options.notitle?null:this.jsf.setItemTitle(this)},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){switch(this.jsf.initializeControl(this),this.options=this.layoutNode.options||{},this.expanded="boolean"==typeof this.options.expanded?this.options.expanded:!this.options.expandable,this.layoutNode.type){case"section":case"array":case"fieldset":case"advancedfieldset":case"authfieldset":case"optionfieldset":case"selectfieldset":this.containerType="fieldset";break;case"card":this.containerType="card";break;case"expansion-panel":this.containerType="expansion-panel";break;default:this.containerType="div"}},t.prototype.toggleExpanded=function(){this.options.expandable&&(this.expanded=!this.expanded)},t.prototype.getFlexAttribute=function(t){var e="flex"===this.layoutNode.type||!!this.options.displayFlex||"flex"===this.options.display;switch(t){case"is-flex":return e;case"display":return e?"flex":"initial";case"flex-direction":case"flex-wrap":var n=["flex-direction","flex-wrap"].indexOf(t);return(this.options["flex-flow"]||"").split(/\s+/)[n]||this.options[t]||["column","nowrap"][n];case"justify-content":case"align-items":case"align-content":return this.options[t]}},t.decorators=[{type:n.Component,args:[{selector:"flex-layout-section-widget",template:'\n    <div *ngIf="containerType === \'div\'"\n      [class]="options?.htmlClass || \'\'"\n      [class.expandable]="options?.expandable && !expanded"\n      [class.expanded]="options?.expandable && expanded">\n      <label *ngIf="sectionTitle"\n        [class]="\'legend \' + (options?.labelHtmlClass || \'\')"\n        [innerHTML]="sectionTitle"\n        (click)="toggleExpanded()"></label>\n      <flex-layout-root-widget *ngIf="expanded"\n        [layout]="layoutNode.items"\n        [dataIndex]="dataIndex"\n        [layoutIndex]="layoutIndex"\n        [isFlexItem]="getFlexAttribute(\'is-flex\')"\n        [class.form-flex-column]="getFlexAttribute(\'flex-direction\') === \'column\'"\n        [class.form-flex-row]="getFlexAttribute(\'flex-direction\') === \'row\'"\n        [style.display]="getFlexAttribute(\'display\')"\n        [style.flex-direction]="getFlexAttribute(\'flex-direction\')"\n        [style.flex-wrap]="getFlexAttribute(\'flex-wrap\')"\n        [style.justify-content]="getFlexAttribute(\'justify-content\')"\n        [style.align-items]="getFlexAttribute(\'align-items\')"\n        [style.align-content]="getFlexAttribute(\'align-content\')"\n        [fxLayout]="options?.fxLayout"\n        [fxLayoutGap]="options?.fxLayoutGap"\n        [fxLayoutAlign]="options?.fxLayoutAlign"\n        [attr.fxFlexFill]="options?.fxLayoutAlign"></flex-layout-root-widget>\n      <mat-error *ngIf="options?.showErrors && options?.errorMessage"\n        [innerHTML]="options?.errorMessage"></mat-error>\n    </div>\n\n    <fieldset *ngIf="containerType === \'fieldset\'"\n      [class]="options?.htmlClass || \'\'"\n      [class.expandable]="options?.expandable && !expanded"\n      [class.expanded]="options?.expandable && expanded"\n      [disabled]="options?.readonly">\n      <legend *ngIf="sectionTitle"\n        [class]="\'legend \' + (options?.labelHtmlClass || \'\')"\n        [innerHTML]="sectionTitle"\n        (click)="toggleExpanded()"></legend>\n      <flex-layout-root-widget *ngIf="expanded"\n        [layout]="layoutNode.items"\n        [dataIndex]="dataIndex"\n        [layoutIndex]="layoutIndex"\n        [isFlexItem]="getFlexAttribute(\'is-flex\')"\n        [class.form-flex-column]="getFlexAttribute(\'flex-direction\') === \'column\'"\n        [class.form-flex-row]="getFlexAttribute(\'flex-direction\') === \'row\'"\n        [style.display]="getFlexAttribute(\'display\')"\n        [style.flex-direction]="getFlexAttribute(\'flex-direction\')"\n        [style.flex-wrap]="getFlexAttribute(\'flex-wrap\')"\n        [style.justify-content]="getFlexAttribute(\'justify-content\')"\n        [style.align-items]="getFlexAttribute(\'align-items\')"\n        [style.align-content]="getFlexAttribute(\'align-content\')"\n        [fxLayout]="options?.fxLayout"\n        [fxLayoutGap]="options?.fxLayoutGap"\n        [fxLayoutAlign]="options?.fxLayoutAlign"\n        [attr.fxFlexFill]="options?.fxLayoutAlign"></flex-layout-root-widget>\n      <mat-error *ngIf="options?.showErrors && options?.errorMessage"\n        [innerHTML]="options?.errorMessage"></mat-error>\n    </fieldset>\n\n    <mat-card *ngIf="containerType === \'card\'"\n      [class]="options?.htmlClass || \'\'"\n      [class.expandable]="options?.expandable && !expanded"\n      [class.expanded]="options?.expandable && expanded">\n      <mat-card-header *ngIf="sectionTitle">\n        <legend\n          [class]="\'legend \' + (options?.labelHtmlClass || \'\')"\n          [innerHTML]="sectionTitle"\n          (click)="toggleExpanded()"></legend>\n      </mat-card-header>\n      <mat-card-content *ngIf="expanded">\n        <fieldset [disabled]="options?.readonly">\n          <flex-layout-root-widget *ngIf="expanded"\n            [layout]="layoutNode.items"\n            [dataIndex]="dataIndex"\n            [layoutIndex]="layoutIndex"\n            [isFlexItem]="getFlexAttribute(\'is-flex\')"\n            [class.form-flex-column]="getFlexAttribute(\'flex-direction\') === \'column\'"\n            [class.form-flex-row]="getFlexAttribute(\'flex-direction\') === \'row\'"\n            [style.display]="getFlexAttribute(\'display\')"\n            [style.flex-direction]="getFlexAttribute(\'flex-direction\')"\n            [style.flex-wrap]="getFlexAttribute(\'flex-wrap\')"\n            [style.justify-content]="getFlexAttribute(\'justify-content\')"\n            [style.align-items]="getFlexAttribute(\'align-items\')"\n            [style.align-content]="getFlexAttribute(\'align-content\')"\n            [fxLayout]="options?.fxLayout"\n            [fxLayoutGap]="options?.fxLayoutGap"\n            [fxLayoutAlign]="options?.fxLayoutAlign"\n            [attr.fxFlexFill]="options?.fxLayoutAlign"></flex-layout-root-widget>\n          </fieldset>\n      </mat-card-content>\n      <mat-card-footer>\n        <mat-error *ngIf="options?.showErrors && options?.errorMessage"\n          [innerHTML]="options?.errorMessage"></mat-error>\n      </mat-card-footer>\n    </mat-card>\n\n    <mat-expansion-panel *ngIf="containerType === \'expansion-panel\'"\n      [expanded]="expanded"\n      [hideToggle]="!options?.expandable">\n      <mat-expansion-panel-header>\n        <mat-panel-title>\n          <legend *ngIf="sectionTitle"\n            [class]="options?.labelHtmlClass"\n            [innerHTML]="sectionTitle"\n            (click)="toggleExpanded()"></legend>\n        </mat-panel-title>\n      </mat-expansion-panel-header>\n      <fieldset [disabled]="options?.readonly">\n        <flex-layout-root-widget *ngIf="expanded"\n          [layout]="layoutNode.items"\n          [dataIndex]="dataIndex"\n          [layoutIndex]="layoutIndex"\n          [isFlexItem]="getFlexAttribute(\'is-flex\')"\n          [class.form-flex-column]="getFlexAttribute(\'flex-direction\') === \'column\'"\n          [class.form-flex-row]="getFlexAttribute(\'flex-direction\') === \'row\'"\n          [style.display]="getFlexAttribute(\'display\')"\n          [style.flex-direction]="getFlexAttribute(\'flex-direction\')"\n          [style.flex-wrap]="getFlexAttribute(\'flex-wrap\')"\n          [style.justify-content]="getFlexAttribute(\'justify-content\')"\n          [style.align-items]="getFlexAttribute(\'align-items\')"\n          [style.align-content]="getFlexAttribute(\'align-content\')"\n          [fxLayout]="options?.fxLayout"\n          [fxLayoutGap]="options?.fxLayoutGap"\n          [fxLayoutAlign]="options?.fxLayoutAlign"\n          [attr.fxFlexFill]="options?.fxLayoutAlign"></flex-layout-root-widget>\n      </fieldset>\n      <mat-error *ngIf="options?.showErrors && options?.errorMessage"\n        [innerHTML]="options?.errorMessage"></mat-error>\n    </mat-expansion-panel>',styles:["\n    fieldset { border: 0; margin: 0; padding: 0; }\n    .legend { font-weight: bold; }\n    .expandable > .legend:before { content: '▶'; padding-right: .3em; }\n    .expanded > .legend:before { content: '▼'; padding-right: .2em; }\n  "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Rr=function(){function t(t){this.jsf=t}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{}},Object.defineProperty(t.prototype,"showAddButton",{get:function(){return!this.layoutNode.arrayItem||this.layoutIndex[this.layoutIndex.length-1]<this.options.maxItems},enumerable:!0,configurable:!0}),t.prototype.addItem=function(t){t.preventDefault(),this.jsf.addItem(this)},Object.defineProperty(t.prototype,"buttonText",{get:function(){var t={dataIndex:this.dataIndex.slice(0,-1),layoutIndex:this.layoutIndex.slice(0,-1),layoutNode:this.jsf.getParentNode(this)};return t.layoutNode.add||this.jsf.setArrayItemTitle(t,this.layoutNode,this.itemCount)},enumerable:!0,configurable:!0}),t.decorators=[{type:n.Component,args:[{selector:"material-add-reference-widget",template:'\n    <section [class]="options?.htmlClass || \'\'" align="end">\n      <button mat-raised-button *ngIf="showAddButton"\n        [color]="options?.color || \'accent\'"\n        [disabled]="options?.readonly"\n        (click)="addItem($event)">\n        <span *ngIf="options?.icon" [class]="options?.icon"></span>\n        <span *ngIf="options?.title" [innerHTML]="buttonText"></span>\n      </button>\n    </section>',changeDetection:n.ChangeDetectionStrategy.Default}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),qr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"material-one-of-widget",template:""}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Hr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){var t=this;this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),H(this.options,"disabled")?this.controlDisabled=this.options.disabled:this.jsf.formOptions.disableInvalidSubmit&&(this.controlDisabled=!this.jsf.isValid,this.jsf.isValidChanges.subscribe(function(e){return t.controlDisabled=!e}))},t.prototype.updateValue=function(t){"function"==typeof this.options.onClick?this.options.onClick(t):this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"material-button-widget",template:'\n    <div class="button-row" [class]="options?.htmlClass || \'\'">\n      <button mat-raised-button\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [color]="options?.color || \'primary\'"\n        [disabled]="controlDisabled || options?.readonly"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (click)="updateValue($event)">\n        <mat-icon *ngIf="options?.icon" class="mat-24">{{options?.icon}}</mat-icon>\n        <span *ngIf="options?.title" [innerHTML]="options?.title"></span>\n      </button>\n    </div>',styles:[" button { margin-top: 10px; } "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),zr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.radiosList=[],this.vertical=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.radiosList=Uo(this.options.titleMap||this.options.enumNames,this.options.enum,!0),this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.options.showErrors=!0,this.jsf.updateValue(this,t)},t.decorators=[{type:n.Component,args:[{selector:"material-button-group-widget",template:'\n    <div>\n      <div *ngIf="options?.title">\n        <label\n          [attr.for]="\'control\' + layoutNode?._id"\n          [class]="options?.labelHtmlClass || \'\'"\n          [style.display]="options?.notitle ? \'none\' : \'\'"\n          [innerHTML]="options?.title"></label>\n      </div>\n      <mat-button-toggle-group\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [disabled]="controlDisabled || options?.readonly"\n        [name]="controlName"\n        [value]="controlValue"\n        [vertical]="!!options.vertical">\n        <mat-button-toggle *ngFor="let radioItem of radiosList"\n          [id]="\'control\' + layoutNode?._id + \'/\' + radioItem?.name"\n          [value]="radioItem?.value"\n          (click)="updateValue(radioItem?.value)">\n          <span [innerHTML]="radioItem?.name"></span>\n        </mat-button-toggle>\n      </mat-button-toggle-group>\n      <mat-error *ngIf="options?.showErrors && options?.errorMessage"\n        [innerHTML]="options?.errorMessage"></mat-error>\n    </div>',styles:[" mat-error { font-size: 75%; } "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Wr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.trueValue=!0,this.falseValue=!1,this.showSlideToggle=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this,!this.options.readonly),null!==this.controlValue&&void 0!==this.controlValue||(this.controlValue=!1,this.jsf.updateValue(this,this.falseValue)),"slide-toggle"!==this.layoutNode.type&&"slide-toggle"!==this.layoutNode.format||(this.showSlideToggle=!0)},t.prototype.updateValue=function(t){this.options.showErrors=!0,this.jsf.updateValue(this,t.checked?this.trueValue:this.falseValue)},Object.defineProperty(t.prototype,"isChecked",{get:function(){return this.jsf.getFormControlValue(this)===this.trueValue},enumerable:!0,configurable:!0}),t.decorators=[{type:n.Component,args:[{selector:"material-checkbox-widget",template:'\n    <mat-checkbox *ngIf="boundControl && !showSlideToggle"\n      [formControl]="formControl"\n      labelPosition="left"\n      [color]="options?.color || \'primary\'"\n      [id]="\'control\' + layoutNode?._id"\n      labelPosition="after"\n      [name]="controlName"\n      (blur)="options.showErrors = true">\n      <span *ngIf="options?.title"\n        class="checkbox-name"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></span>\n    </mat-checkbox>\n    <mat-checkbox *ngIf="!boundControl && !showSlideToggle"\n      labelPosition="left"\n      [color]="options?.color || \'primary\'"\n      [disabled]="controlDisabled || options?.readonly"\n      [id]="\'control\' + layoutNode?._id"\n      labelPosition="after"\n      [name]="controlName"\n      [checked]="isChecked"\n      (blur)="options.showErrors = true"\n      (change)="updateValue($event)">\n      <span *ngIf="options?.title"\n        class="checkbox-name"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></span>\n    </mat-checkbox>\n    <mat-slide-toggle *ngIf="boundControl && showSlideToggle"\n      [formControl]="formControl"\n      align="left"\n      [color]="options?.color || \'primary\'"\n      [id]="\'control\' + layoutNode?._id"\n      labelPosition="after"\n      [name]="controlName"\n      (blur)="options.showErrors = true">\n      <span *ngIf="options?.title"\n        class="checkbox-name"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></span>\n    </mat-slide-toggle>\n    <mat-slide-toggle *ngIf="!boundControl && showSlideToggle"\n      align="left"\n      [color]="options?.color || \'primary\'"\n      [disabled]="controlDisabled || options?.readonly"\n      [id]="\'control\' + layoutNode?._id"\n      labelPosition="after"\n      [name]="controlName"\n      [checked]="isChecked"\n      (blur)="options.showErrors = true"\n      (change)="updateValue($event)">\n      <span *ngIf="options?.title"\n        class="checkbox-name"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></span>\n    </mat-slide-toggle>\n    <mat-error *ngIf="options?.showErrors && options?.errorMessage"\n      [innerHTML]="options?.errorMessage"></mat-error>',styles:["\n    .checkbox-name { white-space: nowrap; }\n    mat-error { font-size: 75%; }\n  "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),$r=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.horizontalList=!1,this.checkboxList=[]}return t.prototype.ngOnInit=function(){if(this.options=this.layoutNode.options||{},this.horizontalList="checkboxes-inline"===this.layoutNode.type||"checkboxbuttons"===this.layoutNode.type,this.jsf.initializeControl(this),this.checkboxList=Uo(this.options.titleMap||this.options.enumNames,this.options.enum,!0),this.boundControl)for(var t=this.jsf.getFormControl(this),e=0,n=this.checkboxList;e<n.length;e++){var o=n[e];o.checked=t.value.includes(o.value)}},Object.defineProperty(t.prototype,"allChecked",{get:function(){return this.checkboxList.filter(function(t){return t.checked}).length===this.checkboxList.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"someChecked",{get:function(){var t=this.checkboxList.filter(function(t){return t.checked}).length;return t>0&&t<this.checkboxList.length},enumerable:!0,configurable:!0}),t.prototype.updateValue=function(){this.options.showErrors=!0,this.boundControl&&this.jsf.updateArrayCheckboxList(this,this.checkboxList)},t.prototype.updateAllValues=function(t){this.options.showErrors=!0,this.checkboxList.forEach(function(e){return e.checked=t.checked}),this.updateValue()},t.decorators=[{type:n.Component,args:[{selector:"material-checkboxes-widget",template:'\n    <div>\n      <mat-checkbox type="checkbox"\n        [checked]="allChecked"\n        [color]="options?.color || \'primary\'"\n        [disabled]="controlDisabled || options?.readonly"\n        [indeterminate]="someChecked"\n        [name]="options?.name"\n        (blur)="options.showErrors = true"\n        (change)="updateAllValues($event)">\n        <span class="checkbox-name" [innerHTML]="options?.name"></span>\n      </mat-checkbox>\n      <label *ngIf="options?.title"\n        class="title"\n        [class]="options?.labelHtmlClass || \'\'"\n        [style.display]="options?.notitle ? \'none\' : \'\'"\n        [innerHTML]="options?.title"></label>\n      <ul class="checkbox-list" [class.horizontal-list]="horizontalList">\n        <li *ngFor="let checkboxItem of checkboxList"\n          [class]="options?.htmlClass || \'\'">\n          <mat-checkbox type="checkbox"\n            [(ngModel)]="checkboxItem.checked"\n            [color]="options?.color || \'primary\'"\n            [disabled]="controlDisabled || options?.readonly"\n            [name]="checkboxItem?.name"\n            (blur)="options.showErrors = true"\n            (change)="updateValue()">\n            <span class="checkbox-name" [innerHTML]="checkboxItem?.name"></span>\n          </mat-checkbox>\n        </li>\n      </ul>\n      <mat-error *ngIf="options?.showErrors && options?.errorMessage"\n        [innerHTML]="options?.errorMessage"></mat-error>\n    </div>',styles:["\n    .title { font-weight: bold; }\n    .checkbox-list { list-style-type: none; }\n    .horizontal-list > li { display: inline-block; margin-right: 10px; zoom: 1; }\n    .checkbox-name { white-space: nowrap; }\n    mat-error { font-size: 75%; }\n  "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Br=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"material-chip-list-widget",template:""}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Jr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.autoCompleteList=[]}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this,!this.options.readonly),this.setControlDate(this.controlValue),this.options.notitle||this.options.description||!this.options.placeholder||(this.options.description=this.options.placeholder)},t.prototype.ngOnChanges=function(){this.setControlDate(this.controlValue)},t.prototype.setControlDate=function(t){this.dateValue=Zo(t)},t.prototype.updateValue=function(t){this.options.showErrors=!0,this.jsf.updateValue(this,Yo(t,this.options))},t.decorators=[{type:n.Component,args:[{selector:"material-datepicker-widget",template:'\n    <mat-form-field [style.width]="\'100%\'">\n      <span matPrefix *ngIf="options?.prefix || options?.fieldAddonLeft"\n        [innerHTML]="options?.prefix || options?.fieldAddonLeft"></span>\n      <input matInput *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [id]="\'control\' + layoutNode?._id"\n        [max]="options?.maximum"\n        [matDatepicker]="picker"\n        [min]="options?.minimum"\n        [name]="controlName"\n        [placeholder]="options?.title"\n        [required]="options?.required"\n        [style.width]="\'100%\'"\n        (blur)="options.showErrors = true">\n      <input matInput *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [disabled]="controlDisabled || options?.readonly"\n        [id]="\'control\' + layoutNode?._id"\n        [max]="options?.maximum"\n        [matDatepicker]="picker"\n        [min]="options?.minimum"\n        [name]="controlName"\n        [placeholder]="options?.title"\n        [required]="options?.required"\n        [style.width]="\'100%\'"\n        [value]="dateValue"\n        (blur)="options.showErrors = true"\n        (change)="updateValue($event)"\n        (input)="updateValue($event)">\n      <span matSuffix *ngIf="options?.suffix || options?.fieldAddonRight"\n        [innerHTML]="options?.suffix || options?.fieldAddonRight"></span>\n      <mat-hint *ngIf="options?.description && (!options?.showErrors || !options?.errorMessage)"\n        align="end" [innerHTML]="options?.description"></mat-hint>\n      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>\n    </mat-form-field>\n    <mat-datepicker #picker\n      (selectedChanged)="updateValue($event)"></mat-datepicker>\n    <mat-error *ngIf="options?.showErrors && options?.errorMessage"\n      [innerHTML]="options?.errorMessage"></mat-error>',styles:["\n    mat-error { font-size: 75%; margin-top: -1rem; margin-bottom: 0.5rem; }\n    ::ng-deep mat-form-field .mat-form-field-wrapper .mat-form-field-flex\n      .mat-form-field-infix { width: initial; }\n  "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Gr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"material-file-widget",template:""}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Ur=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.autoCompleteList=[]}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),this.options.notitle||this.options.description||!this.options.placeholder||(this.options.description=this.options.placeholder)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"material-input-widget",template:'\n    <mat-form-field\n      [class]="options?.htmlClass || \'\'"\n      [floatLabel]="options?.floatPlaceholder || (options?.notitle ? \'never\' : \'auto\')"\n      [style.width]="\'100%\'">\n      <span matPrefix *ngIf="options?.prefix || options?.fieldAddonLeft"\n        [innerHTML]="options?.prefix || options?.fieldAddonLeft"></span>\n      <input matInput *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [placeholder]="options?.notitle ? options?.placeholder : options?.title"\n        [required]="options?.required"\n        [style.width]="\'100%\'"\n        [type]="layoutNode?.type"\n        (blur)="options.showErrors = true">\n      <input matInput *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [placeholder]="options?.notitle ? options?.placeholder : options?.title"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [required]="options?.required"\n        [style.width]="\'100%\'"\n        [type]="layoutNode?.type"\n        [value]="controlValue"\n        (input)="updateValue($event)"\n        (blur)="options.showErrors = true">\n      <span matSuffix *ngIf="options?.suffix || options?.fieldAddonRight"\n        [innerHTML]="options?.suffix || options?.fieldAddonRight"></span>\n      <mat-hint *ngIf="options?.description && (!options?.showErrors || !options?.errorMessage)"\n        align="end" [innerHTML]="options?.description"></mat-hint>\n      <mat-autocomplete *ngIf="options?.typeahead?.source">\n        <mat-option *ngFor="let word of options?.typeahead?.source"\n          [value]="word">{{word}}</mat-option>\n      </mat-autocomplete>\n    </mat-form-field>\n    <mat-error *ngIf="options?.showErrors && options?.errorMessage"\n      [innerHTML]="options?.errorMessage"></mat-error>',styles:["\n    mat-error { font-size: 75%; margin-top: -1rem; margin-bottom: 0.5rem; }\n    ::ng-deep mat-form-field .mat-form-field-wrapper .mat-form-field-flex\n      .mat-form-field-infix { width: initial; }\n  "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Yr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.allowNegative=!0,this.allowDecimal=!0,this.allowExponents=!1,this.lastValidNumber=""}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),"integer"===this.layoutNode.dataType&&(this.allowDecimal=!1),this.options.notitle||this.options.description||!this.options.placeholder||(this.options.description=this.options.placeholder)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"material-number-widget",template:'\n    <mat-form-field\n      [class]="options?.htmlClass || \'\'"\n      [floatLabel]="options?.floatPlaceholder || (options?.notitle ? \'never\' : \'auto\')"\n      [style.width]="\'100%\'">\n      <span matPrefix *ngIf="options?.prefix || options?.fieldAddonLeft"\n        [innerHTML]="options?.prefix || options?.fieldAddonLeft"></span>\n      <input matInput *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.max]="options?.maximum"\n        [attr.min]="options?.minimum"\n        [attr.step]="options?.multipleOf || options?.step || \'any\'"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [placeholder]="options?.notitle ? options?.placeholder : options?.title"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [required]="options?.required"\n        [style.width]="\'100%\'"\n        [type]="\'number\'"\n        (blur)="options.showErrors = true">\n      <input matInput *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.max]="options?.maximum"\n        [attr.min]="options?.minimum"\n        [attr.step]="options?.multipleOf || options?.step || \'any\'"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [placeholder]="options?.notitle ? options?.placeholder : options?.title"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [required]="options?.required"\n        [style.width]="\'100%\'"\n        [type]="\'number\'"\n        [value]="controlValue"\n        (input)="updateValue($event)"\n        (blur)="options.showErrors = true">\n      <span matSuffix *ngIf="options?.suffix || options?.fieldAddonRight"\n        [innerHTML]="options?.suffix || options?.fieldAddonRight"></span>\n      <mat-hint *ngIf="layoutNode?.type === \'range\'" align="start"\n        [innerHTML]="controlValue"></mat-hint>\n      <mat-hint *ngIf="options?.description && (!options?.showErrors || !options?.errorMessage)"\n        align="end" [innerHTML]="options?.description"></mat-hint>\n    </mat-form-field>\n    <mat-error *ngIf="options?.showErrors && options?.errorMessage"\n      [innerHTML]="options?.errorMessage"></mat-error>',styles:["\n    mat-error { font-size: 75%; margin-top: -1rem; margin-bottom: 0.5rem; }\n    ::ng-deep mat-form-field .mat-form-field-wrapper .mat-form-field-flex\n      .mat-form-field-infix { width: initial; }\n  "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Zr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.flexDirection="column",this.radiosList=[]}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},"radios-inline"===this.layoutNode.type&&(this.flexDirection="row"),this.radiosList=Uo(this.options.titleMap||this.options.enumNames,this.options.enum,!0),this.jsf.initializeControl(this,!this.options.readonly)},t.prototype.updateValue=function(t){this.options.showErrors=!0,this.jsf.updateValue(this,t)},t.decorators=[{type:n.Component,args:[{selector:"material-radios-widget",template:'\n    <div>\n      <div *ngIf="options?.title">\n        <label\n          [attr.for]="\'control\' + layoutNode?._id"\n          [class]="options?.labelHtmlClass || \'\'"\n          [style.display]="options?.notitle ? \'none\' : \'\'"\n          [innerHTML]="options?.title"></label>\n      </div>\n      <mat-radio-group *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [style.flex-direction]="flexDirection"\n        [name]="controlName"\n        (blur)="options.showErrors = true">\n        <mat-radio-button *ngFor="let radioItem of radiosList"\n          [id]="\'control\' + layoutNode?._id + \'/\' + radioItem?.name"\n          [value]="radioItem?.value">\n          <span [innerHTML]="radioItem?.name"></span>\n        </mat-radio-button>\n      </mat-radio-group>\n      <mat-radio-group *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.readonly]="options?.readonly ? \'readonly\' : null"\n        [attr.required]="options?.required"\n        [style.flex-direction]="flexDirection"\n        [disabled]="controlDisabled || options?.readonly"\n        [name]="controlName"\n        [value]="controlValue">\n        <mat-radio-button *ngFor="let radioItem of radiosList"\n          [id]="\'control\' + layoutNode?._id + \'/\' + radioItem?.name"\n          [value]="radioItem?.value"\n          (click)="updateValue(radioItem?.value)">\n          <span [innerHTML]="radioItem?.name"></span>\n        </mat-radio-button>\n      </mat-radio-group>\n      <mat-error *ngIf="options?.showErrors && options?.errorMessage"\n        [innerHTML]="options?.errorMessage"></mat-error>\n    </div>',styles:["\n    mat-radio-group { display: inline-flex; }\n    mat-radio-button { margin: 2px; }\n    mat-error { font-size: 75%; }\n  "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Kr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.selectList=[],this.isArray=w}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.selectList=Uo(this.options.titleMap||this.options.enumNames,this.options.enum,!!this.options.required,!!this.options.flatList),this.jsf.initializeControl(this,!this.options.readonly),this.options.notitle||this.options.description||!this.options.placeholder||(this.options.description=this.options.placeholder)},t.prototype.updateValue=function(t){this.options.showErrors=!0,this.jsf.updateValue(this,t.value)},t.decorators=[{type:n.Component,args:[{selector:"material-select-widget",template:'\n    <mat-form-field\n      [class]="options?.htmlClass || \'\'"\n      [floatLabel]="options?.floatPlaceholder || (options?.notitle ? \'never\' : \'auto\')"\n      [style.width]="\'100%\'">\n      <span matPrefix *ngIf="options?.prefix || options?.fieldAddonLeft"\n        [innerHTML]="options?.prefix || options?.fieldAddonLeft"></span>\n      <mat-select *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.name]="controlName"\n        [id]="\'control\' + layoutNode?._id"\n        [multiple]="options?.multiple"\n        [placeholder]="options?.notitle ? options?.placeholder : options?.title"\n        [required]="options?.required"\n        [style.width]="\'100%\'"\n        (blur)="options.showErrors = true">\n        <ng-template ngFor let-selectItem [ngForOf]="selectList">\n          <mat-option *ngIf="!isArray(selectItem?.items)"\n            [value]="selectItem?.value">\n            <span [innerHTML]="selectItem?.name"></span>\n          </mat-option>\n          <mat-optgroup *ngIf="isArray(selectItem?.items)"\n            [label]="selectItem?.group">\n            <mat-option *ngFor="let subItem of selectItem.items"\n              [value]="subItem?.value">\n              <span [innerHTML]="subItem?.name"></span>\n            </mat-option>\n          </mat-optgroup>\n        </ng-template>\n      </mat-select>\n      <mat-select *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.name]="controlName"\n        [disabled]="controlDisabled || options?.readonly"\n        [id]="\'control\' + layoutNode?._id"\n        [multiple]="options?.multiple"\n        [placeholder]="options?.notitle ? options?.placeholder : options?.title"\n        [required]="options?.required"\n        [style.width]="\'100%\'"\n        [value]="controlValue"\n        (blur)="options.showErrors = true"\n        (selectionChange)="updateValue($event)">\n        <ng-template ngFor let-selectItem [ngForOf]="selectList">\n          <mat-option *ngIf="!isArray(selectItem?.items)"\n            [attr.selected]="selectItem?.value === controlValue"\n            [value]="selectItem?.value">\n            <span [innerHTML]="selectItem?.name"></span>\n          </mat-option>\n          <mat-optgroup *ngIf="isArray(selectItem?.items)"\n            [label]="selectItem?.group">\n            <mat-option *ngFor="let subItem of selectItem.items"\n              [attr.selected]="subItem?.value === controlValue"\n              [value]="subItem?.value">\n              <span [innerHTML]="subItem?.name"></span>\n            </mat-option>\n          </mat-optgroup>\n        </ng-template>\n      </mat-select>\n      <span matSuffix *ngIf="options?.suffix || options?.fieldAddonRight"\n        [innerHTML]="options?.suffix || options?.fieldAddonRight"></span>\n      <mat-hint *ngIf="options?.description && (!options?.showErrors || !options?.errorMessage)"\n        align="end" [innerHTML]="options?.description"></mat-hint>\n    </mat-form-field>\n    <mat-error *ngIf="options?.showErrors && options?.errorMessage"\n      [innerHTML]="options?.errorMessage"></mat-error>',styles:["\n    mat-error { font-size: 75%; margin-top: -1rem; margin-bottom: 0.5rem; }\n    ::ng-deep mat-form-field .mat-form-field-wrapper .mat-form-field-flex\n      .mat-form-field-infix { width: initial; }\n  "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Qr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1,this.allowNegative=!0,this.allowDecimal=!0,this.allowExponents=!1,this.lastValidNumber=""}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this,!this.options.readonly)},t.prototype.updateValue=function(t){this.options.showErrors=!0,this.jsf.updateValue(this,t.value)},t.decorators=[{type:n.Component,args:[{selector:"material-slider-widget",template:'\n    <mat-slider thumbLabel *ngIf="boundControl"\n      [formControl]="formControl"\n      [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n      [id]="\'control\' + layoutNode?._id"\n      [max]="options?.maximum"\n      [min]="options?.minimum"\n      [step]="options?.multipleOf || options?.step || \'any\'"\n      [style.width]="\'100%\'"\n      (blur)="options.showErrors = true"></mat-slider>\n    <mat-slider thumbLabel *ngIf="!boundControl"\n      [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n      [disabled]="controlDisabled || options?.readonly"\n      [id]="\'control\' + layoutNode?._id"\n      [max]="options?.maximum"\n      [min]="options?.minimum"\n      [step]="options?.multipleOf || options?.step || \'any\'"\n      [style.width]="\'100%\'"\n      [value]="controlValue"\n      (blur)="options.showErrors = true"\n      (change)="updateValue($event)"></mat-slider>\n    <mat-error *ngIf="options?.showErrors && options?.errorMessage"\n      [innerHTML]="options?.errorMessage"></mat-error>',styles:[" mat-error { font-size: 75%; } "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),Xr=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"material-stepper-widget",template:""}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),ti=function(){function t(t){this.jsf=t,this.selectedItem=0,this.showAddTab=!0}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.itemCount=this.layoutNode.items.length-1,this.updateControl()},t.prototype.select=function(t){"$ref"===this.layoutNode.items[t].type&&(this.jsf.addItem({layoutNode:this.layoutNode.items[t],layoutIndex:this.layoutIndex.concat(t),dataIndex:this.dataIndex.concat(t)}),this.updateControl()),this.selectedItem=t},t.prototype.updateControl=function(){this.itemCount=this.layoutNode.items.length-1;var t=this.layoutNode.items[this.layoutNode.items.length-1];this.showAddTab="$ref"===t.type&&this.itemCount<(t.options.maxItems||1e3)},t.prototype.setTabTitle=function(t,e){return this.jsf.setArrayItemTitle(this,t,e)},t.decorators=[{type:n.Component,args:[{selector:"material-tabs-widget",template:'\n    <nav mat-tab-nav-bar\n      [attr.aria-label]="options?.label || options?.title || \'\'"\n      [style.width]="\'100%\'">\n        <a mat-tab-link *ngFor="let item of layoutNode?.items; let i = index"\n          [active]="selectedItem === i"\n          (click)="select(i)">\n          <span *ngIf="showAddTab || item.type !== \'$ref\'"\n            [innerHTML]="setTabTitle(item, i)"></span>\n        </a>\n    </nav>\n    <div *ngFor="let layoutItem of layoutNode?.items; let i = index"\n      [class]="options?.htmlClass || \'\'">\n      <select-framework-widget *ngIf="selectedItem === i"\n        [class]="(options?.fieldHtmlClass || \'\') + \' \' + (options?.activeClass || \'\') + \' \' + (options?.style?.selected || \'\')"\n        [dataIndex]="layoutNode?.dataType === \'array\' ? (dataIndex || []).concat(i) : dataIndex"\n        [layoutIndex]="(layoutIndex || []).concat(i)"\n        [layoutNode]="layoutItem"></select-framework-widget>\n    </div>',styles:[" a { cursor: pointer; } "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),ei=function(){function t(t){this.jsf=t,this.controlDisabled=!1,this.boundControl=!1}return t.prototype.ngOnInit=function(){this.options=this.layoutNode.options||{},this.jsf.initializeControl(this),this.options.notitle||this.options.description||!this.options.placeholder||(this.options.description=this.options.placeholder)},t.prototype.updateValue=function(t){this.jsf.updateValue(this,t.target.value)},t.decorators=[{type:n.Component,args:[{selector:"material-textarea-widget",template:'\n    <mat-form-field\n      [class]="options?.htmlClass || \'\'"\n      [floatLabel]="options?.floatPlaceholder || (options?.notitle ? \'never\' : \'auto\')"\n      [style.width]="\'100%\'">\n      <span matPrefix *ngIf="options?.prefix || options?.fieldAddonLeft"\n        [innerHTML]="options?.prefix || options?.fieldAddonLeft"></span>\n      <textarea matInput *ngIf="boundControl"\n        [formControl]="formControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [required]="options?.required"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [placeholder]="options?.notitle ? options?.placeholder : options?.title"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [style.width]="\'100%\'"\n        (blur)="options.showErrors = true"></textarea>\n      <textarea matInput *ngIf="!boundControl"\n        [attr.aria-describedby]="\'control\' + layoutNode?._id + \'Status\'"\n        [attr.list]="\'control\' + layoutNode?._id + \'Autocomplete\'"\n        [attr.maxlength]="options?.maxLength"\n        [attr.minlength]="options?.minLength"\n        [attr.pattern]="options?.pattern"\n        [required]="options?.required"\n        [disabled]="controlDisabled"\n        [id]="\'control\' + layoutNode?._id"\n        [name]="controlName"\n        [placeholder]="options?.notitle ? options?.placeholder : options?.title"\n        [readonly]="options?.readonly ? \'readonly\' : null"\n        [style.width]="\'100%\'"\n        [value]="controlValue"\n        (input)="updateValue($event)"\n        (blur)="options.showErrors = true"></textarea>\n      <span matSuffix *ngIf="options?.suffix || options?.fieldAddonRight"\n        [innerHTML]="options?.suffix || options?.fieldAddonRight"></span>\n      <mat-hint *ngIf="options?.description && (!options?.showErrors || !options?.errorMessage)"\n        align="end" [innerHTML]="options?.description"></mat-hint>\n    </mat-form-field>\n    <mat-error *ngIf="options?.showErrors && options?.errorMessage"\n      [innerHTML]="options?.errorMessage"></mat-error>',styles:["\n    mat-error { font-size: 75%; margin-top: -1rem; margin-bottom: 0.5rem; }\n    ::ng-deep mat-form-field .mat-form-field-wrapper .mat-form-field-flex\n      .mat-form-field-infix { width: initial; }\n  "]}]}],t.ctorParameters=function(){return[{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),ni=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},oi=function(){function t(t,e){this.changeDetector=t,this.jsf=e,this.frameworkInitialized=!1,this.formControl=null,this.parentArray=null,this.isOrderable=!1,this.dynamicTitle=null}return Object.defineProperty(t.prototype,"showRemoveButton",{get:function(){return!(!this.layoutNode||!this.widgetOptions.removable||this.widgetOptions.readonly||"$ref"===this.layoutNode.type)&&(!!this.layoutNode.recursiveReference||!(!this.layoutNode.arrayItem||!this.parentArray)&&(!(this.parentArray.items.length-1<=this.parentArray.options.minItems)&&("list"===this.layoutNode.arrayItemType||this.layoutIndex[this.layoutIndex.length-1]===this.parentArray.items.length-2)))},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.initializeFramework()},t.prototype.ngOnChanges=function(){this.frameworkInitialized||this.initializeFramework(),this.dynamicTitle&&this.updateTitle()},t.prototype.initializeFramework=function(){this.layoutNode?(this.options=o.cloneDeep(this.layoutNode.options||{}),this.widgetLayoutNode=ni({},this.layoutNode,{options:o.cloneDeep(this.layoutNode.options||{})}),this.widgetOptions=this.widgetLayoutNode.options,this.formControl=this.jsf.getFormControl(this),h(this.widgetOptions.minimum)&&h(this.widgetOptions.maximum)&&this.widgetOptions.multipleOf>=1&&(this.layoutNode.type="range"),!["$ref","advancedfieldset","authfieldset","button","card","checkbox","expansion-panel","help","message","msg","section","submit","tabarray","tabs"].includes(this.layoutNode.type)&&/{{.+?}}/.test(this.widgetOptions.title||"")&&(this.dynamicTitle=this.widgetOptions.title,this.updateTitle()),this.layoutNode.arrayItem&&"$ref"!==this.layoutNode.type&&(this.parentArray=this.jsf.getParentNode(this),this.parentArray&&(this.isOrderable="tab"!==this.parentArray.type.slice(0,3)&&"list"===this.layoutNode.arrayItemType&&!this.widgetOptions.readonly&&this.parentArray.options.orderable)),this.frameworkInitialized=!0):this.options={}},t.prototype.updateTitle=function(){this.widgetLayoutNode.options.title=this.jsf.parseText(this.dynamicTitle,this.jsf.getFormControlValue(this),this.jsf.getFormControlGroup(this).value,this.dataIndex[this.dataIndex.length-1])},t.prototype.removeItem=function(){this.jsf.removeItem(this)},t.decorators=[{type:n.Component,args:[{selector:"material-design-framework",template:'\n    <div\n      [class.array-item]="widgetLayoutNode?.arrayItem && widgetLayoutNode?.type !== \'$ref\'"\n      [orderable]="isOrderable"\n      [dataIndex]="dataIndex"\n      [layoutIndex]="layoutIndex"\n      [layoutNode]="widgetLayoutNode">\n      <svg *ngIf="showRemoveButton"\n        xmlns="http://www.w3.org/2000/svg"\n        height="18" width="18" viewBox="0 0 24 24"\n        class="close-button"\n        (click)="removeItem()">\n        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/>\n      </svg>\n      <select-widget-widget\n        [dataIndex]="dataIndex"\n        [layoutIndex]="layoutIndex"\n        [layoutNode]="widgetLayoutNode"></select-widget-widget>\n    </div>\n    <div class="spacer" *ngIf="widgetLayoutNode?.arrayItem && widgetLayoutNode?.type !== \'$ref\'"></div>',styles:["\n    .array-item {\n      border-radius: 2px;\n      box-shadow: 0 3px 1px -2px rgba(0,0,0,.2),\n                  0 2px 2px  0   rgba(0,0,0,.14),\n                  0 1px 5px  0   rgba(0,0,0,.12);\n      padding: 6px;\n      position: relative;\n      transition: all 280ms cubic-bezier(.4, 0, .2, 1);\n    }\n    .close-button {\n      cursor: pointer;\n      position: absolute;\n      top: 6px;\n      right: 6px;\n      fill: rgba(0,0,0,.4);\n      visibility: hidden;\n      z-index: 500;\n    }\n    .close-button:hover { fill: rgba(0,0,0,.8); }\n    .array-item:hover > .close-button { visibility: visible; }\n    .spacer { margin: 6px 0; }\n    [draggable=true]:hover {\n      box-shadow: 0 5px 5px -3px rgba(0,0,0,.2),\n                  0 8px 10px 1px rgba(0,0,0,.14),\n                  0 3px 14px 2px rgba(0,0,0,.12);\n      cursor: move;\n      z-index: 10;\n    }\n    [draggable=true].drag-target-top {\n      box-shadow: 0 -2px 0 #000;\n      position: relative; z-index: 20;\n    }\n    [draggable=true].drag-target-bottom {\n      box-shadow: 0 2px 0 #000;\n      position: relative; z-index: 20;\n    }\n  "]}]}],t.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),ri=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ii=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="material-design",e.framework=oi,e.stylesheets=["//fonts.googleapis.com/icon?family=Material+Icons","//fonts.googleapis.com/css?family=Roboto:300,400,500,700"],e.widgets={root:Lr,section:Vr,$ref:Rr,button:Hr,"button-group":zr,checkbox:Wr,checkboxes:$r,"chip-list":Br,date:Jr,file:Gr,number:Yr,"one-of":qr,radios:Zr,select:Kr,slider:Qr,stepper:Xr,tabs:ti,text:Ur,textarea:ei,"alt-date":"date","any-of":"one-of",card:"section",color:"text","expansion-panel":"section",hidden:"none",image:"none",integer:"number",radiobuttons:"button-group",range:"slider",submit:"button",tagsinput:"chip-list",wizard:"stepper"},e}return ri(e,t),e.decorators=[{type:n.Injectable}],e}(Ir),si=[Lr,Vr,Rr,qr,Hr,zr,Wr,$r,Br,Jr,Gr,Ur,Yr,Zr,Kr,Qr,Xr,ti,ei,oi],ai=[l.MatAutocompleteModule,l.MatButtonModule,l.MatButtonToggleModule,l.MatCardModule,l.MatCheckboxModule,l.MatChipsModule,l.MatDatepickerModule,l.MatExpansionModule,l.MatFormFieldModule,l.MatIconModule,l.MatInputModule,l.MatNativeDateModule,l.MatRadioModule,l.MatSelectModule,l.MatSliderModule,l.MatSlideToggleModule,l.MatStepperModule,l.MatTabsModule,l.MatTooltipModule],ui=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[{provide:Ir,useClass:ii,multi:!0}]}},t.decorators=[{type:n.NgModule,args:[{imports:[a.CommonModule,r.FormsModule,r.ReactiveFormsModule,u.FlexLayoutModule].concat(ai,[kr]),declarations:si.slice(),exports:si.slice(),entryComponents:si.slice()}]}],t}(),li=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ci=function(){function t(t,e){this.changeDetector=t,this.jsf=e,this.frameworkInitialized=!1,this.formControl=null,this.debugOutput="",this.debug="",this.parentArray=null,this.isOrderable=!1}return Object.defineProperty(t.prototype,"showRemoveButton",{get:function(){return!(!this.options.removable||this.options.readonly||"$ref"===this.layoutNode.type)&&(!!this.layoutNode.recursiveReference||!(!this.layoutNode.arrayItem||!this.parentArray)&&(!(this.parentArray.items.length-1<=this.parentArray.options.minItems)&&("list"===this.layoutNode.arrayItemType||this.layoutIndex[this.layoutIndex.length-1]===this.parentArray.items.length-2)))},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.initializeFramework(),this.layoutNode.arrayItem&&"$ref"!==this.layoutNode.type&&(this.parentArray=this.jsf.getParentNode(this),this.parentArray&&(this.isOrderable="list"===this.layoutNode.arrayItemType&&!this.options.readonly&&this.parentArray.options.orderable))},t.prototype.ngOnChanges=function(){this.frameworkInitialized||this.initializeFramework()},t.prototype.initializeFramework=function(){var t=this;if(this.layoutNode){switch(this.options=o.cloneDeep(this.layoutNode.options),this.widgetLayoutNode=li({},this.layoutNode,{options:o.cloneDeep(this.layoutNode.options)}),this.widgetOptions=this.widgetLayoutNode.options,this.formControl=this.jsf.getFormControl(this),this.options.isInputWidget=T(this.layoutNode.type,["button","checkbox","checkboxes-inline","checkboxes","color","date","datetime-local","datetime","email","file","hidden","image","integer","month","number","password","radio","radiobuttons","radios-inline","radios","range","reset","search","select","submit","tel","text","textarea","time","url","week"]),this.options.title=this.setTitle(),this.options.htmlClass=L(this.options.htmlClass,"schema-form-"+this.layoutNode.type),"flex"!==this.layoutNode.type&&(this.options.htmlClass="array"===this.layoutNode.type?L(this.options.htmlClass,"list-group"):this.layoutNode.arrayItem&&"$ref"!==this.layoutNode.type?L(this.options.htmlClass,"list-group-item"):L(this.options.htmlClass,"form-group")),this.widgetOptions.htmlClass="",this.options.labelHtmlClass=L(this.options.labelHtmlClass,"control-label"),this.widgetOptions.activeClass=L(this.widgetOptions.activeClass,"active"),this.options.fieldAddonLeft=this.options.fieldAddonLeft||this.options.prepend,this.options.fieldAddonRight=this.options.fieldAddonRight||this.options.append,this.options.title&&"tab"!==this.layoutNode.type&&!this.options.notitle&&this.options.required&&!this.options.title.includes("*")&&(this.options.title+=' <strong class="text-danger">*</strong>'),this.layoutNode.type){case"checkbox":case"checkboxes":this.widgetOptions.htmlClass=L(this.widgetOptions.htmlClass,"checkbox");break;case"checkboxes-inline":this.widgetOptions.htmlClass=L(this.widgetOptions.htmlClass,"checkbox"),this.widgetOptions.itemLabelHtmlClass=L(this.widgetOptions.itemLabelHtmlClass,"checkbox-inline");break;case"radio":case"radios":this.widgetOptions.htmlClass=L(this.widgetOptions.htmlClass,"radio");break;case"radios-inline":this.widgetOptions.htmlClass=L(this.widgetOptions.htmlClass,"radio"),this.widgetOptions.itemLabelHtmlClass=L(this.widgetOptions.itemLabelHtmlClass,"radio-inline");break;case"checkboxbuttons":case"radiobuttons":this.widgetOptions.htmlClass=L(this.widgetOptions.htmlClass,"btn-group"),this.widgetOptions.itemLabelHtmlClass=L(this.widgetOptions.itemLabelHtmlClass,"btn"),this.widgetOptions.itemLabelHtmlClass=L(this.widgetOptions.itemLabelHtmlClass,this.options.style||"btn-default"),this.widgetOptions.fieldHtmlClass=L(this.widgetOptions.fieldHtmlClass,"sr-only");break;case"button":case"submit":this.widgetOptions.fieldHtmlClass=L(this.widgetOptions.fieldHtmlClass,"btn"),this.widgetOptions.fieldHtmlClass=L(this.widgetOptions.fieldHtmlClass,this.options.style||"btn-info");break;case"array":case"fieldset":case"section":case"conditional":case"advancedfieldset":case"authfieldset":case"selectfieldset":case"optionfieldset":this.options.messageLocation="top";break;case"tabarray":case"tabs":this.widgetOptions.htmlClass=L(this.widgetOptions.htmlClass,"tab-content"),this.widgetOptions.fieldHtmlClass=L(this.widgetOptions.fieldHtmlClass,"tab-pane"),this.widgetOptions.labelHtmlClass=L(this.widgetOptions.labelHtmlClass,"nav nav-tabs");break;case"$ref":this.widgetOptions.fieldHtmlClass=L(this.widgetOptions.fieldHtmlClass,"btn pull-right"),this.widgetOptions.fieldHtmlClass=L(this.widgetOptions.fieldHtmlClass,this.options.style||"btn-default"),this.options.icon="glyphicon glyphicon-plus";break;default:this.widgetOptions.fieldHtmlClass=L(this.widgetOptions.fieldHtmlClass,"form-control")}if(this.formControl&&(this.updateHelpBlock(this.formControl.status),this.formControl.statusChanges.subscribe(function(e){return t.updateHelpBlock(e)}),this.options.debug)){this.debugOutput=o.map([],function(t){return JSON.stringify(t,null,2)}).join("\n")}this.frameworkInitialized=!0}},t.prototype.updateHelpBlock=function(t){this.options.helpBlock="INVALID"===t&&this.options.enableErrorState&&this.formControl.errors&&(this.formControl.dirty||this.options.feedbackOnRender)?this.jsf.formatErrors(this.formControl.errors,this.options.validationMessages):this.options.description||this.options.help||null},t.prototype.setTitle=function(){switch(this.layoutNode.type){case"button":case"checkbox":case"section":case"help":case"msg":case"submit":case"message":case"tabarray":case"tabs":case"$ref":return null;case"advancedfieldset":return this.widgetOptions.expandable=!0,this.widgetOptions.title="Advanced options",null;case"authfieldset":return this.widgetOptions.expandable=!0,this.widgetOptions.title="Authentication settings",null;case"fieldset":return this.widgetOptions.title=this.options.title,null;default:return this.widgetOptions.title=null,this.jsf.setItemTitle(this)}},t.prototype.removeItem=function(){this.jsf.removeItem(this)},t.decorators=[{type:n.Component,args:[{selector:"bootstrap-3-framework",template:'\n    <div\n      [class]="options?.htmlClass || \'\'"\n      [class.has-feedback]="options?.feedback && options?.isInputWidget &&\n        (formControl?.dirty || options?.feedbackOnRender)"\n      [class.has-error]="options?.enableErrorState && formControl?.errors &&\n        (formControl?.dirty || options?.feedbackOnRender)"\n      [class.has-success]="options?.enableSuccessState && !formControl?.errors &&\n        (formControl?.dirty || options?.feedbackOnRender)">\n\n      <button *ngIf="showRemoveButton"\n        class="close pull-right"\n        type="button"\n        (click)="removeItem()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n      </button>\n      <div *ngIf="options?.messageLocation === \'top\'">\n          <p *ngIf="options?.helpBlock"\n          class="help-block"\n          [innerHTML]="options?.helpBlock"></p>\n      </div>\n\n      <label *ngIf="options?.title && layoutNode?.type !== \'tab\'"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [class.sr-only]="options?.notitle"\n        [innerHTML]="options?.title"></label>\n      <p *ngIf="layoutNode?.type === \'submit\' && jsf?.formOptions?.fieldsRequired">\n        <strong class="text-danger">*</strong> = required fields\n      </p>\n      <div [class.input-group]="options?.fieldAddonLeft || options?.fieldAddonRight">\n        <span *ngIf="options?.fieldAddonLeft"\n          class="input-group-addon"\n          [innerHTML]="options?.fieldAddonLeft"></span>\n\n        <select-widget-widget\n          [layoutNode]="widgetLayoutNode"\n          [dataIndex]="dataIndex"\n          [layoutIndex]="layoutIndex"></select-widget-widget>\n\n        <span *ngIf="options?.fieldAddonRight"\n          class="input-group-addon"\n          [innerHTML]="options?.fieldAddonRight"></span>\n      </div>\n\n      <span *ngIf="options?.feedback && options?.isInputWidget &&\n          !options?.fieldAddonRight && !layoutNode.arrayItem &&\n          (formControl?.dirty || options?.feedbackOnRender)"\n        [class.glyphicon-ok]="options?.enableSuccessState && !formControl?.errors"\n        [class.glyphicon-remove]="options?.enableErrorState && formControl?.errors"\n        aria-hidden="true"\n        class="form-control-feedback glyphicon"></span>\n      <div *ngIf="options?.messageLocation !== \'top\'">\n        <p *ngIf="options?.helpBlock"\n          class="help-block"\n          [innerHTML]="options?.helpBlock"></p>\n      </div>\n    </div>\n\n    <div *ngIf="debug && debugOutput">debug: <pre>{{debugOutput}}</pre></div>\n  ',styles:["\n    :host /deep/ .list-group-item .form-control-feedback { top: 40; }\n    :host /deep/ .checkbox,\n    :host /deep/ .radio { margin-top: 0; margin-bottom: 0; }\n    :host /deep/ .checkbox-inline,\n    :host /deep/ .checkbox-inline + .checkbox-inline,\n    :host /deep/ .checkbox-inline + .radio-inline,\n    :host /deep/ .radio-inline,\n    :host /deep/ .radio-inline + .radio-inline,\n    :host /deep/ .radio-inline + .checkbox-inline { margin-left: 0; margin-right: 10px; }\n    :host /deep/ .checkbox-inline:last-child,\n    :host /deep/ .radio-inline:last-child { margin-right: 0; }\n    :host /deep/ .ng-invalid.ng-touched { border: 1px solid #f44336; }\n  "]}]}],t.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),pi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),di=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="bootstrap-3",e.framework=ci,e.stylesheets=["//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css","//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"],e.scripts=["//ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js","//ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js","//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"],e}return pi(e,t),e.decorators=[{type:n.Injectable}],e}(Ir),fi=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[{provide:Ir,useClass:di,multi:!0}]}},t.decorators=[{type:n.NgModule,args:[{imports:[a.CommonModule,kr],declarations:[ci],exports:[ci],entryComponents:[ci]}]}],t}(),hi=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},mi=function(){function t(t,e){this.changeDetector=t,this.jsf=e,this.frameworkInitialized=!1,this.formControl=null,this.debugOutput="",this.debug="",this.parentArray=null,this.isOrderable=!1}return Object.defineProperty(t.prototype,"showRemoveButton",{get:function(){return!(!this.options.removable||this.options.readonly||"$ref"===this.layoutNode.type)&&(!!this.layoutNode.recursiveReference||!(!this.layoutNode.arrayItem||!this.parentArray)&&(!(this.parentArray.items.length-1<=this.parentArray.options.minItems)&&("list"===this.layoutNode.arrayItemType||this.layoutIndex[this.layoutIndex.length-1]===this.parentArray.items.length-2)))},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.initializeFramework(),this.layoutNode.arrayItem&&"$ref"!==this.layoutNode.type&&(this.parentArray=this.jsf.getParentNode(this),this.parentArray&&(this.isOrderable="list"===this.layoutNode.arrayItemType&&!this.options.readonly&&this.parentArray.options.orderable))},t.prototype.ngOnChanges=function(){this.frameworkInitialized||this.initializeFramework()},t.prototype.initializeFramework=function(){var t=this;if(this.layoutNode){switch(this.options=o.cloneDeep(this.layoutNode.options),this.widgetLayoutNode=hi({},this.layoutNode,{options:o.cloneDeep(this.layoutNode.options)}),this.widgetOptions=this.widgetLayoutNode.options,this.formControl=this.jsf.getFormControl(this),this.options.isInputWidget=T(this.layoutNode.type,["button","checkbox","checkboxes-inline","checkboxes","color","date","datetime-local","datetime","email","file","hidden","image","integer","month","number","password","radio","radiobuttons","radios-inline","radios","range","reset","search","select","submit","tel","text","textarea","time","url","week"]),this.options.title=this.setTitle(),this.options.htmlClass=L(this.options.htmlClass,"schema-form-"+this.layoutNode.type),this.options.htmlClass="array"===this.layoutNode.type?L(this.options.htmlClass,"list-group"):this.layoutNode.arrayItem&&"$ref"!==this.layoutNode.type?L(this.options.htmlClass,"list-group-item"):L(this.options.htmlClass,"form-group"),this.widgetOptions.htmlClass="",this.options.labelHtmlClass=L(this.options.labelHtmlClass,"control-label"),this.widgetOptions.activeClass=L(this.widgetOptions.activeClass,"active"),this.options.fieldAddonLeft=this.options.fieldAddonLeft||this.options.prepend,this.options.fieldAddonRight=this.options.fieldAddonRight||this.options.append,this.options.title&&"tab"!==this.layoutNode.type&&!this.options.notitle&&this.options.required&&!this.options.title.includes("*")&&(this.options.title+=' <strong class="text-danger">*</strong>'),this.layoutNode.type){case"checkbox":case"checkboxes":this.widgetOptions.htmlClass=L(this.widgetOptions.htmlClass,"checkbox");break;case"checkboxes-inline":this.widgetOptions.htmlClass=L(this.widgetOptions.htmlClass,"checkbox"),this.widgetOptions.itemLabelHtmlClass=L(this.widgetOptions.itemLabelHtmlClass,"checkbox-inline");break;case"radio":case"radios":this.widgetOptions.htmlClass=L(this.widgetOptions.htmlClass,"radio");break;case"radios-inline":this.widgetOptions.htmlClass=L(this.widgetOptions.htmlClass,"radio"),this.widgetOptions.itemLabelHtmlClass=L(this.widgetOptions.itemLabelHtmlClass,"radio-inline");break;case"checkboxbuttons":case"radiobuttons":this.widgetOptions.htmlClass=L(this.widgetOptions.htmlClass,"btn-group"),this.widgetOptions.itemLabelHtmlClass=L(this.widgetOptions.itemLabelHtmlClass,"btn"),this.widgetOptions.itemLabelHtmlClass=L(this.widgetOptions.itemLabelHtmlClass,this.options.style||"btn-default"),this.widgetOptions.fieldHtmlClass=L(this.widgetOptions.fieldHtmlClass,"sr-only");break;case"button":case"submit":this.widgetOptions.fieldHtmlClass=L(this.widgetOptions.fieldHtmlClass,"btn"),this.widgetOptions.fieldHtmlClass=L(this.widgetOptions.fieldHtmlClass,this.options.style||"btn-info");break;case"array":case"fieldset":case"section":case"conditional":case"advancedfieldset":case"authfieldset":case"selectfieldset":case"optionfieldset":this.options.messageLocation="top";break;case"tabarray":case"tabs":this.widgetOptions.htmlClass=L(this.widgetOptions.htmlClass,"tab-content"),this.widgetOptions.fieldHtmlClass=L(this.widgetOptions.fieldHtmlClass,"tab-pane"),this.widgetOptions.labelHtmlClass=L(this.widgetOptions.labelHtmlClass,"nav nav-tabs");break;case"$ref":this.widgetOptions.fieldHtmlClass=L(this.widgetOptions.fieldHtmlClass,"btn pull-right"),this.widgetOptions.fieldHtmlClass=L(this.widgetOptions.fieldHtmlClass,this.options.style||"btn-default"),this.options.icon="glyphicon glyphicon-plus";break;default:this.widgetOptions.fieldHtmlClass=L(this.widgetOptions.fieldHtmlClass,"form-control")}if(this.formControl&&(this.updateHelpBlock(this.formControl.status),this.formControl.statusChanges.subscribe(function(e){return t.updateHelpBlock(e)}),this.options.debug)){this.debugOutput=o.map([],function(t){return JSON.stringify(t,null,2)}).join("\n")}this.frameworkInitialized=!0}},t.prototype.updateHelpBlock=function(t){this.options.helpBlock="INVALID"===t&&this.options.enableErrorState&&this.formControl.errors&&(this.formControl.dirty||this.options.feedbackOnRender)?this.jsf.formatErrors(this.formControl.errors,this.options.validationMessages):this.options.description||this.options.help||null},t.prototype.setTitle=function(){switch(this.layoutNode.type){case"button":case"checkbox":case"section":case"help":case"msg":case"submit":case"message":case"tabarray":case"tabs":case"$ref":return null;case"advancedfieldset":return this.widgetOptions.expandable=!0,this.widgetOptions.title="Advanced options",null;case"authfieldset":return this.widgetOptions.expandable=!0,this.widgetOptions.title="Authentication settings",null;case"fieldset":return this.widgetOptions.title=this.options.title,null;default:return this.widgetOptions.title=null,this.jsf.setItemTitle(this)}},t.prototype.removeItem=function(){this.jsf.removeItem(this)},t.decorators=[{type:n.Component,args:[{selector:"bootstrap-4-framework",template:'\n    <div\n      [class]="options?.htmlClass || \'\'"\n      [class.has-feedback]="options?.feedback && options?.isInputWidget &&\n        (formControl?.dirty || options?.feedbackOnRender)"\n      [class.has-error]="options?.enableErrorState && formControl?.errors &&\n        (formControl?.dirty || options?.feedbackOnRender)"\n      [class.has-success]="options?.enableSuccessState && !formControl?.errors &&\n        (formControl?.dirty || options?.feedbackOnRender)">\n\n      <button *ngIf="showRemoveButton"\n        class="close pull-right"\n        type="button"\n        (click)="removeItem()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n      </button>\n      <div *ngIf="options?.messageLocation === \'top\'">\n        <p *ngIf="options?.helpBlock"\n          class="help-block"\n          [innerHTML]="options?.helpBlock"></p>\n      </div>\n\n      <label *ngIf="options?.title && layoutNode?.type !== \'tab\'"\n        [attr.for]="\'control\' + layoutNode?._id"\n        [class]="options?.labelHtmlClass || \'\'"\n        [class.sr-only]="options?.notitle"\n        [innerHTML]="options?.title"></label>\n      <p *ngIf="layoutNode?.type === \'submit\' && jsf?.formOptions?.fieldsRequired">\n        <strong class="text-danger">*</strong> = required fields\n      </p>\n      <div [class.input-group]="options?.fieldAddonLeft || options?.fieldAddonRight">\n        <span *ngIf="options?.fieldAddonLeft"\n          class="input-group-addon"\n          [innerHTML]="options?.fieldAddonLeft"></span>\n\n        <select-widget-widget\n          [layoutNode]="widgetLayoutNode"\n          [dataIndex]="dataIndex"\n          [layoutIndex]="layoutIndex"></select-widget-widget>\n\n        <span *ngIf="options?.fieldAddonRight"\n          class="input-group-addon"\n          [innerHTML]="options?.fieldAddonRight"></span>\n      </div>\n\n      <span *ngIf="options?.feedback && options?.isInputWidget &&\n          !options?.fieldAddonRight && !layoutNode.arrayItem &&\n          (formControl?.dirty || options?.feedbackOnRender)"\n        [class.glyphicon-ok]="options?.enableSuccessState && !formControl?.errors"\n        [class.glyphicon-remove]="options?.enableErrorState && formControl?.errors"\n        aria-hidden="true"\n        class="form-control-feedback glyphicon"></span>\n      <div *ngIf="options?.messageLocation !== \'top\'">\n        <p *ngIf="options?.helpBlock"\n          class="help-block"\n          [innerHTML]="options?.helpBlock"></p>\n      </div>\n    </div>\n\n    <div *ngIf="debug && debugOutput">debug: <pre>{{debugOutput}}</pre></div>\n  ',styles:["\n    :host /deep/ .list-group-item .form-control-feedback { top: 40px; }\n    :host /deep/ .checkbox,\n    :host /deep/ .radio { margin-top: 0; margin-bottom: 0; }\n    :host /deep/ .checkbox-inline,\n    :host /deep/ .checkbox-inline + .checkbox-inline,\n    :host /deep/ .checkbox-inline + .radio-inline,\n    :host /deep/ .radio-inline,\n    :host /deep/ .radio-inline + .radio-inline,\n    :host /deep/ .radio-inline + .checkbox-inline { margin-left: 0; margin-right: 10px; }\n    :host /deep/ .checkbox-inline:last-child,\n    :host /deep/ .radio-inline:last-child { margin-right: 0; }\n    :host /deep/ .ng-invalid.ng-touched { border: 1px solid #f44336; }\n  "]}]}],t.ctorParameters=function(){return[{type:n.ChangeDetectorRef},{type:er}]},t.propDecorators={layoutNode:[{type:n.Input}],layoutIndex:[{type:n.Input}],dataIndex:[{type:n.Input}]},t}(),yi=function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bi=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="bootstrap-4",e.framework=mi,e.stylesheets=["//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css"],e.scripts=["//code.jquery.com/jquery-3.2.1.slim.min.js","//cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js","//maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"],e}return yi(e,t),e.decorators=[{type:n.Injectable}],e}(Ir),vi=function(){function t(){}return t.forRoot=function(){return{ngModule:t,providers:[{provide:Ir,useClass:bi,multi:!0}]}},t.decorators=[{type:n.NgModule,args:[{imports:[a.CommonModule,kr],declarations:[mi],exports:[mi],entryComponents:[mi]}]}],t}();t.ɵd=si,t.ɵb=ai,t.ɵa=Cr,t.ɵc=Nr,t._executeValidators=c,t._executeAsyncValidators=p,t._mergeObjects=d,t._mergeErrors=f,t.isDefined=h,t.hasValue=m,t.isEmpty=y,t.isString=b,t.isNumber=v,t.isInteger=g,t.isBoolean=_,t.isFunction=function(t){return"function"==typeof t},t.isObject=x,t.isArray=w,t.isDate=O,t.isMap=I,t.isSet=j,t.isPromise=k,t.isObservable=F,t.getType=C,t.isType=S,t.isPrimitive=P,t.toJavaScriptType=M,t.toSchemaType=N,t.toObservable=A,t.inArray=T,t.xor=E,t.addClasses=L,t.copy=V,t.forEach=R,t.forEachCopy=q,t.hasOwn=H,t.mergeFilteredObject=z,t.uniqueItems=W,t.commonItems=$,t.fixTitle=B,t.toTitleCase=J,t.JsonPointer=U,t.JsonValidators=vo,t.buildSchemaFromLayout=wo,t.buildSchemaFromData=Oo,t.getFromSchema=Io,t.removeRecursiveReferences=jo,t.getInputType=Co,t.checkInlineType=So,t.isInputRequired=Po,t.updateInputOptions=Mo,t.getTitleMapFromOneOf=No,t.getControlValidators=ko,t.resolveSchemaReferences=Fo,t.getSubSchema=Ao,t.combineAllOf=To,t.fixRequiredArrayProperties=Eo,t.convertSchemaToDraft6=Lo,t.mergeSchemas=_o,t.buildFormGroupTemplate=Vo,t.buildFormGroup=Ro,t.formatFormData=Ho,t.getControl=zo,t.setRequiredFields=qo,t.buildLayout=$o,t.buildLayoutFromSchema=Bo,t.mapLayout=Jo,t.getLayoutNode=Go,t.buildTitleMap=Uo,t.dateToString=Yo,t.stringToDate=Zo,t.findDate=Ko,t.OrderableDirective=nr,t.JsonSchemaFormComponent=Sr,t.JsonSchemaFormService=er,t.JsonSchemaFormModule=Dr,t.WidgetLibraryService=Or,t.WidgetLibraryModule=kr,t.AddReferenceComponent=or,t.OneOfComponent=rr,t.ButtonComponent=ir,t.CheckboxComponent=sr,t.CheckboxesComponent=ar,t.FileComponent=ur,t.HiddenComponent=Pr,t.InputComponent=lr,t.MessageComponent=cr,t.NoneComponent=pr,t.NumberComponent=dr,t.RadiosComponent=fr,t.RootComponent=hr,t.SectionComponent=mr,t.SelectComponent=yr,t.SelectFrameworkComponent=br,t.SelectWidgetComponent=vr,t.SubmitComponent=gr,t.TabComponent=Mr,t.TabsComponent=_r,t.TemplateComponent=xr,t.TextareaComponent=wr,t.FrameworkLibraryService=jr,t.Framework=Ir,t.NoFramework=Tr,t.NoFrameworkComponent=Fr,t.NoFrameworkModule=Er,t.MaterialDesignFramework=ii,t.FlexLayoutRootComponent=Lr,t.FlexLayoutSectionComponent=Vr,t.MaterialAddReferenceComponent=Rr,t.MaterialOneOfComponent=qr,t.MaterialButtonComponent=Hr,t.MaterialButtonGroupComponent=zr,t.MaterialCheckboxComponent=Wr,t.MaterialCheckboxesComponent=$r,t.MaterialChipListComponent=Br,t.MaterialDatepickerComponent=Jr,t.MaterialFileComponent=Gr,t.MaterialInputComponent=Ur,t.MaterialNumberComponent=Yr,t.MaterialRadiosComponent=Zr,t.MaterialSelectComponent=Kr,t.MaterialSliderComponent=Qr,t.MaterialStepperComponent=Xr,t.MaterialTabsComponent=ti,t.MaterialTextareaComponent=ei,t.MaterialDesignFrameworkComponent=oi,t.MaterialDesignFrameworkModule=ui,t.Bootstrap3Framework=di,t.Bootstrap3FrameworkComponent=ci,t.Bootstrap3FrameworkModule=fi,t.Bootstrap4Framework=bi,t.Bootstrap4FrameworkComponent=mi,t.Bootstrap4FrameworkModule=vi,Object.defineProperty(t,"__esModule",{value:!0})});
